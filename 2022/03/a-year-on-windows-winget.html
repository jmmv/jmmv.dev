<!doctype html><html lang=en xmlns=http://www.w3.org/1999/xhtml xmlns:fb=http://ogp.me/ns/fb#><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:site_name" content="Julio Merino (jmmv.dev)"><meta property="twitter:site" content="@jmmv"><title>A year on Windows: Software installation - Julio Merino (jmmv.dev)</title><meta property="og:title" content="A year on Windows: Software installation - Julio Merino (jmmv.dev)"><meta property="twitter:title" content="A year on Windows: Software installation - Julio Merino (jmmv.dev)"><meta name=description content="Can you believe that Windows ships with something that looks like a package manager? By default since Windows 11? I know, right? Let&amp;rsquo;s take a look.
"><meta property="og:description" content="Can you believe that Windows ships with something that looks like a package manager? By default since Windows 11? I know, right? Let&amp;rsquo;s take a look.
"><meta property="twitter:description" content="Can you believe that Windows ships with something that looks like a package manager? By default since Windows 11? I know, right? Let&amp;rsquo;s take a look.
"><meta name=author content="Julio Merino"><meta property="twitter:creator" content="@jmmv"><meta name=generator content="Hugo 0.111.3"><meta property="og:url" content="https://jmmv.dev/2022/03/a-year-on-windows-winget.html"><meta property="og:type" content="blog"><meta property="twitter:card" content="summary"><link rel=canonical href=https://jmmv.dev/2022/03/a-year-on-windows-winget.html><link rel=alternate type=application/rss+xml title="Julio Merino (jmmv.dev)" href=/feed.xml><link rel=stylesheet href=/sass/main.min.161663676cac4bf21abc8967ec3267c26026aa58e9f392c5f3427e0ef089fe6b.css><link rel=stylesheet href=/css/chroma.css><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicons/favicon-96x96.png sizes=96x96><meta property="og:image" content="/images/favicons/favicon-1200x1200.png"><meta property="twitter:image" content="https://jmmv.dev/images/favicons/favicon-1200x1200.png"><script>const SITE_ID="e8da9f62-b7ac-4fe9-bf20-7c527199a376",BASE_URL="https://jmmv.dev/"</script></head><body><header class=site-header><nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary"><a class=navbar-brand href=/><img src=/images/favicons/favicon-30x30.png width=30 height=30 class="d-inline-block align-top" alt>
&nbsp;Julio Merino</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=/about.html>About</a></li><li class=nav-item><a class=nav-link href=/essays.html>Essays</a></li><li class=nav-item><a class=nav-link href=/resume.html>Resume</a></li><li class=nav-item><a class=nav-link href=/software.html>Software</a></li></ul><ul class="navbar-nav mr-4"><li class=nav-item><a class=nav-link href=/archive.html>Archive</a></li><li class=nav-item><a class=nav-link href=/series.html>Series</a></li><li class=nav-item><a class=nav-link href=/tags.html>Tags</a></li></ul><form class=form-inline method=get role=search action=https://www.google.com/search><div class=input-group><input type=search name=query class=form-control placeholder=Search aria-label=Search><div class=input-group-append><button type=submit value=Search class="btn btn-light">
<img src=/octicons/search.svg></button></div></div><input type=hidden name=sitesearch value=https://jmmv.dev/></form></div></nav></header><div class=page-header><div class=container><h1>A year on Windows: Software installation</h1><p>March 18, 2022 &#183;
About 6 minutes
&#183;
Tags:
<a href=/tags/windows>windows</a></p><p class=post-meta-p>This article is part number
12 of 13 of the
<a href=/series.html#A%20year%20on%20Windows><b>A year on Windows</b></a> series.</p></div></div><div class="container post-body"><div class=row><div class=col-md-9><div class=row><div class=col><article><p>Can you believe that Windows ships with something that looks like a package manager? By default since Windows 11? I know, right? Let&rsquo;s take a look.</p><p>Installing software on Windows has typically been a very different experience than what you get in a typical Linux or BSD system. The reason, I think, is simple: most Windows software was distributed via physical media (floppies, CDs and DVDs) and most of it was commercial. Such software was very slow to install, so the vendors used the installer&rsquo;s screen space to hype up ther product features. Take a look at just one example:</p><figure><img src=/images/2022-03-18-word-6-setup.png width=100% class=with-border style=max-width:640px><figcaption>Microsoft Word 6.0 Setup touting the AutoFormat feature while it copies files. A fairly typical installation program from the days of Windows 3.x.</figcaption></figure><p>Software distribution has changed quite a bit with commonplace broadband connections, but the mess of custom installers remains. Having to visit arbitrary web sites to download installers and going through their snowflake wizards one by one is time consuming. Plus it is risky if you don&rsquo;t pay attention to where you are downloading those executables from. People will type <code>nvidia drivers</code> in a search engine or, worse, in a file sharing service (I&rsquo;ve seen that), download the very first thing that shows up, and execute the binary without a second thought. Ta-da! Malware successfully acquired.</p><p>Furthermore, some of those installers remain as obnoxious as ever. I&rsquo;m looking at you, graphics drivers. I don&rsquo;t understand why something as &ldquo;simple&rdquo; as that must pollute the whole machine, ranging from the notification area in the taskbar to the context menus on the desktop, passing by system-wide keyboard shortcuts. Obviously, their installers are equally &ldquo;on your face&rdquo;. But anyway&mldr;</p><p>Microsoft tried to fix this by introducing the Microsoft Store and UWP apps. These apps are &ldquo;secure-er&rdquo; and are all installed in a common way via the Store desktop app&mldr; which is great, but whether an app is available in the Store or not is a hit or miss. If you want to do any &ldquo;real work&rdquo; on your computer&mdash;<a href=https://support.microsoft.com/en-us/windows/windows-10-and-windows-11-in-s-mode-faq-851057d6-1ee9-b9e5-c30b-93baebeebc85>S mode</a> didn&rsquo;t last even a day on my Surface Go 2&mdash;you will have to break free from the Store and go back to using scary-looking installer executables. Or do you?</p><h1 id=chocolatey>Chocolatey</h1><p>There have been unofficial package managers for Windows for quite a while. Chocolatey, which launched in 2011, is the prime example. I&rsquo;ve used it since I got into Windows a year ago because the convenience of doing <code>choco install whatever</code> vs. the process I described earlier is very valuable. Additionally, if you opt into using the PowerShell startup scripts that Chocolatey provides, the tools you install will seamlessly be available in the <code>PATH</code>, so after a <code>choco install vim</code>, typing <code>vim</code> in the terminal just works.</p><p>But Chocolatey <em>feels</em> bloated: it&rsquo;s slow to run and the hooks it adds to the PowerShell user profile make launching new PowerShell sessions slow. PowerShell has this neat feature to warn when <code>$PROFILE</code> delays startup, and I often get warnings claiming that the script took between 1 to 2 <em>seconds</em> to finish. This makes opening new PowerShell sessions feel even more bloated <a href=/2022/03/a-year-on-windows-powershell.html>than what I mentioned in a previous post</a>, which is no bueno.</p><h1 id=winget>winget</h1><p>Chocolatey is all fine and dandy, but it&rsquo;s one more thing to install. And didn&rsquo;t I say in the opening that Windows now comes with its own package manager? That&rsquo;s right, it does, and it is called <a href=https://docs.microsoft.com/en-us/windows/package-manager/winget/><strong>Windows Package Manager</strong> or <code>winget</code></a> for short:</p><figure><img src=/images/2022-03-18-winget.png width=100% style=max-width:882px><figcaption>winget's built-in usage message.</figcaption></figure><p>I did try <code>winget</code> as soon as it launched in 2020 but couldn&rsquo;t avoid Chocolatey because <code>winget</code>&rsquo;s software catalog was pretty limited. Things have improved over time, as expected. With my <a href=/2022/03/windows-10-mac-pro-2013.html>most recent Windows install</a>, I&rsquo;m trying to stay Chocolatey-free and so far I&rsquo;m succeeding. There are some notable tools missing though, like <code>less</code>, <code>ripgrep</code> or <code>fd-find</code>, which I&rsquo;ve had to install on the side. But so far so good.</p><p><code>winget</code> definitely feels faster than Chocolatey and having one less tool in the system is nice. But it also has downsides. The biggest one is that you must manually configure the <code>PATH</code> to point to newly installed software. And fiddling with environment variables on Windows just feels wrong. The UI is much better than it used to be, but still&mldr; a UI? Just give me a file to edit or a <a href=/2020/08/config-files-vs-directories.html>package-friendly <code>.d</code> directory</a> like macOS has in <code>/etc/paths.d</code>!</p><figure><img src=/images/2022-03-18-windows-path.png width=100% style=max-width:639px><figcaption>The <b>Environment variable editor</b> showing my <tt>PATH</tt> contents and how I had to add a bunch of directories after using <tt>winget</tt> to make Git, Vim and Emacs usable.</figcaption></figure><h1 id=uninstallation>Uninstallation</h1><p>OK, so software installation is now great. What about, you know, uninstallation? Having reliable uninstallation procedures is critical for peace of mind: knowing that you can clean up any piece of software you install &ldquo;just for a test drive&rdquo; is powerful. And I&rsquo;m not sure that Chocolatey or <code>winget</code> are there.</p><p>Whenever you use these package managers for Windows to install software, you quickly realize that, for the most part, they are just command-line wrappers around the original ad-hoc installers. These executables can still do whatever they want and there is zero guarantee that their uninstaller counterpart will do the right thing. Will the uninstaller truly remove all files littered through the system? What about Registry entries?</p><p>Compare this to the package managers you find on Linux or the BSDs. These package managers do not (typically) run installers: they <em>are</em> the installers. Tools like <code>dpkg</code> or <code>rpm</code> are responsible for extracting a package&rsquo;s files and putting those where they belong, and because they did that, they know <em>exactly</em> what files were installed. When the time comes to uninstall a package, these systems can just walk the list of files they previously registered and remove those.</p><p>Of course, these Unix-y package managers can also run arbitrary scripts at package installation and uninstallation time, so they cannot be trusted to be completely clean either. However, the <em>culture</em> around these systems means that the people creating their packages go to great extents to ensure that this is true. And there is a difference there. I still remember one of my proudest contributions to Gnome, which was to extend GConf to <a href="https://bugzilla.gnome.org/show_bug.cgi?id=130129">support cleaning up the system-wide database</a> when removing a package. Wow, 2003 called.</p><p>Anyway. In the case of <code>winget</code>, this situation is even more confusing because <code>winget</code> is a facade over <em>both</em> old-style installers and Store-based software. Take a look and notice the <strong>Source</strong> column over to the right:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>GO2 C:\Users\jmmv&gt; winget search spotify
</span></span><span class=line><span class=cl>Name                         Id                   Version              Match                   Source
</span></span><span class=line><span class=cl>------------------------------------------------------------------------------------------------------
</span></span><span class=line><span class=cl>Spotify - Music and Podcasts 9NCBCSZSJRSB         Unknown                                      msstore
</span></span><span class=line><span class=cl>Spotify                      Spotify.Spotify      1.1.80.699.gc3dac750                         winget
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>If you use <code>winget</code> to uninstall software that came from the <code>msstore</code> source, the uninstallation will be clean. But for software that came from the <code>winget</code> source&mldr; good luck because then you are subject to &ldquo;regular&rdquo; uninstaller executables.</p><hr><p>To recap, it&rsquo;s awesome to see <code>winget</code> as a standard tool in Windows because this is a huge step forward in system usability and administration. However, I&rsquo;m not fully convinced that this tool can be trusted to do the right thing when uninstalling software, so I&rsquo;m still wary of installing random stuff.</p><p>Tomorrow, it&rsquo;s time to wrap up this series (unless some other topic I did not think about comes up). I&rsquo;ll briefly touch upon the much-hated telemetry and conclude with a brief summary.</p></article><p class=post-meta-p>This article is part number
12 of 13 of the
<a href=/series.html#A%20year%20on%20Windows><b>A year on Windows</b></a> series.</p></div></div><div class="container post-links"><div class=row><div class="col mr-auto text-left"><span><a href=https://jmmv.dev/2022/03/a-year-on-windows-debugging.html>&#171; Previous</a></span></div><div class="col text-center"><span><a href=/archive.html>All posts</a></span></div><div class="col ml-auto text-right"><span><a href=https://jmmv.dev/2022/03/a-year-on-windows-finale.html>Next &#187;</a></span></div></div></div><div class="container post-votes"><div class=row><div class="col-lg-4 my-2"><div class=row><div class=col><a onclick=voteThumbsUp() class="btn btn-block btn-outline-success" id=thumbs-up-btn>üëç
(<span id=thumbs-up-count>0</span>)</a></div><div class=col><a onclick=voteThumbsDown() class="btn btn-block btn-outline-danger" id=thumbs-down-btn>üëé
(<span id=thumbs-down-count>0</span>)</a></div></div></div><div class="col-lg-8 my-2 d-none d-sm-block"><div class=row><div class="col-md-4 text-center"><a href="https://www.reddit.com/submit?title=A+year+on+Windows%3A+Software+installation&amp;url=https%3A%2F%2Fjmmv.dev%2F2022%2F03%2Fa-year-on-windows-winget.html" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/reddit.png alt=Reddit width=24 height=24></a></div><div class="col-md-4 text-center"><a href="https://news.ycombinator.com/submitlink?t=A+year+on+Windows%3A+Software+installation&amp;u=https%3A%2F%2Fjmmv.dev%2F2022%2F03%2Fa-year-on-windows-winget.html" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/ycombinator.png alt="Hacker News" width=24 height=24></a></div><div class="col-md-4 text-center"><a href="https://twitter.com/intent/tweet?status=A+year+on+Windows%3A+Software+installation+%E2%80%94+https%3A%2F%2Fjmmv.dev%2F2022%2F03%2Fa-year-on-windows-winget.html+%E2%80%94+cc+%40jmmv" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/Twitter_Social_Icon_Circle_Color.png alt=Twitter width=24 height=24></a></div></div></div></div><div class="row my-4" id=postCommentRow><div class=col><div class=media><img class=mr-3 src=/octicons/pencil.svg width=32px height=32px><div class="media-body container"><form method=post id=newPost><div class=row><div class="col my-1"><textarea class=form-control rows=1 id=postCommentContent onclick=showPostComment() placeholder="Leave a comment"></textarea></div></div><div class="row newPostControls" style=display:none><div class="col my-1 form-group"><label for=postCommentAuthor>Your name (optional):</label>
<input type=text class=form-control id=postCommentAuthor></div></div><div class="row newPostControls" style=display:none><div class="col my-1 form-group"><label for=postCommentEmail>Your email (optional):</label>
<input type=text class=form-control type=email id=postCommentEmail>
<small class="form-text text-muted">Invisible to all readers; if provided, you will receive notifications when replied to (not implemented yet)</small></div></div><div class=row id=postCommentError style=display:none><div class="col mt-1 alert-danger"><p></p></div></div><div class="row newPostControls" style=display:none><button class="col-md-3 my-1 btn btn-primary" type=submit id=submitCommentButton>Post</button>
<small class="col-md-9 my-1 text-muted">Comments are subject to moderation. This feature is experimental and is powered by <a href=/software/endtracker.html>EndTRACKER</a>. If you experience any issues, please <a href=/about.html#contact>contact me off-band</a>.</small></div></form></div></div></div></div><script>function hidePostComment(){var t,e=document.getElementById("postCommentContent");e.rows=1,e.value="",t=document.getElementsByClassName("newPostControls"),Array.prototype.forEach.call(t,function(e){e.style.display="none"})}function showPostComment(){var e,t=document.getElementById("postCommentContent");t.rows=5,e=document.getElementsByClassName("newPostControls"),Array.prototype.forEach.call(e,function(e){e.style.display=""})}const form=document.querySelector("#newPost");form.onsubmit=function(e){e.preventDefault();let t=document.getElementById("postCommentAuthor").value,n=document.getElementById("postCommentEmail").value,s=document.getElementById("postCommentContent").value;postComment(t,n,s,hidePostComment)}</script></div></div><div class="col-md-3 sidebar d-none d-md-block"><div class=row><div class="col text-center p-2"><p><a href=/about.html class=clear-link><img src=/images/avatars/20181124-snow.jpg class="rounded-circle shadow my-2" style=width:100px><br><b>Julio Merino</b><br>A blog on operating systems, programming languages, testing, build systems, my own software
projects and even personal productivity. Specifics include FreeBSD, Linux, Rust, Bazel and
EndBASIC.</a></p><div class=row><div class=col><div class=form-group><form action=https://endtracker.azurewebsites.net/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/subscribers/add method=post><input type=text name=email placeholder="Enter your email" class="form-control input-sm text-center my-1">
<button type=submit class="btn btn-primary btn-block my-1">Subscribe</button></form></div></div></div><div class="row px-2"><div class="col-sm-5 text-left"><small><span class=subscriber-count>0</span> subscribers</small></div><div class="col-sm-7 text-right"><p><a rel=me href=https://mastodon.online/@jmmv><img src=/images/badges/mastodon-logo.svg width=32px height=32px alt="Follow @jmmv on Mastodon"></a>
<a href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fjmmv.dev%2F&amp;screen_name=jmmv"><img src=/images/badges/Twitter_logo_blue.svg width=32px height=32px alt="Follow @jmmv on Twitter"></a>
<a href=/feed.xml><img src=/images/badges/feed-icon-28x28.png alt="RSS feed"></a></p></div></div></div></div><div class=row><div class=col><h2>Featured software</h2><ul><li class=overflow-ellipsis><a href=https://www.endbasic.dev/ target=_blank>EndBASIC: Online BASIC+DOS env</a></li><li class=overflow-ellipsis><a href=https://endtracker.azurewebsites.net/ target=_blank>EndTRACKER: Services for static sites</a></li></ul></div></div><div class=row><div class=col><h2>Featured posts</h2><ul><li class=overflow-ellipsis><a href=/2023/06/fast-machines-slow-machines.html>Fast machines, slow machines</a></li><li class=overflow-ellipsis><a href=/2022/12/endbasic-0.10.html>EndBASIC 0.10: Core language, evolved</a></li><li class=overflow-ellipsis><a href=/2022/10/bye-microsoft-hi-snowflake.html>Farewell, Microsoft; hello, Snowflake!</a></li><li class=overflow-ellipsis><a href=/2022/05/rust-is-hard-but-does-it-matter.html>Rust is hard, yes, but does it matter?</a></li><li class=overflow-ellipsis><a href=/2022/04/rust-traits-and-dependency-injection.html>Rust traits and dependency injection</a></li><li class=overflow-ellipsis><a href=/2022/03/a-year-on-windows-intro.html>A year on Windows: Introduction</a></li><li class=overflow-ellipsis><a href=/2021/04/always-be-quitting.html>Always be quitting</a></li><li class=overflow-ellipsis><a href=/2021/02/google-monorepos-and-caching.html>How does Google keep build times low?</a></li><li class=overflow-ellipsis><a href=/2020/12/google-no-clean-builds.html>How does Google avoid clean builds?</a></li><li class=overflow-ellipsis><a href=/2020/12/unit-testing-a-console-app.html>Unit-testing a console app (a text editor)</a></li><li class=overflow-ellipsis><a href=/essays.html#featured>More...</a></li></ul></div></div></div></div></div><footer class=container><div class=row><div class="col-4 order-2 texr-right"><p class=float-right><a href=#>Back to top</a></p></div><div class="col-8 order-1 mr-auto"><p>Copyright 2004&ndash;2023 Julio Merino</p></div></div></footer><script type=module>
  import { addAnchorsToHeaders, addElementClasses, BatchClient } from "\/js\/main.d30f168b11d80082408f4a983af9a626c6e57d58f7846b2174bac40d43be33e3.js";

  var batchClient = new BatchClient(SITE_ID);
  batchClient.doAll({
    put_request: true, get_comments: true, get_subscriber_count: true, get_votes: true });

  window.voteThumbsUp = function() { batchClient.voteThumbsUp(); }
  window.voteThumbsDown = function() { batchClient.voteThumbsDown(); }

  window.postComment = function(...args) {
    batchClient.postComment(...args);
  };

  addAnchorsToHeaders();
  addElementClasses();
</script><noscript><img src=https://hugo-dynamic.jmmv.dev/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/pages/aHR0cHM6Ly9qbW12LmRldi8yMDIyLzAzL2EteWVhci1vbi13aW5kb3dzLXdpbmdldC5odG1s/stamp.gif style=display:none></noscript></body></html>