<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  

  <title>pkg-config: A quick introduction - Julio Merino</title>
  <meta content="pkg-config: A quick introduction - Julio Merino" property="og:title">

  
  <meta name="description" content="If you have ever tried to check for the presence of a library from a configuration script, you know this is not an easy task. Getting the right compiler (CFLAGS) and linker (LIBS) flags can be very difficult, if not impossible, without manual help from the user.
To detect some libraries, you have to create a little test program and link it against the library you are looking for. If the build is successful, the library is available, and possibly ready to be used.">
  <meta name="author" content="Julio Merino">
  <meta name="generator" content="Hugo 0.36.1" />

  <meta content="http://julio.meroh.net/2005/03/pkg-config-quick-introduction.html" property="og:url">

  <link rel="canonical" href="http://julio.meroh.net/2005/03/pkg-config-quick-introduction.html">
  <link rel="alternate" type="application/rss+xml"
        title="Julio Merino" href="/feed.xml" />

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/chroma.css">

  
  <!--[if lt IE 9]>
    <script src="/js/html5shiv-3.7.2.min.js"></script>
    <script src="/js/respond-1.4.2.min.js"></script>
  <![endif]-->
</head>


  <body>
    <header class="site-header">

<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed"
              data-toggle="collapse" data-target="#navbar"
              aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Julio Merino</a>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
          
            <li><a class="page-link" href="/about.html" >About</a></li>
          
        
          
            <li><a class="page-link" href="/essays.html" >Essays</a></li>
          
        
          
            <li><a class="page-link" href="/software.html" >Software</a></li>
          
        
          
            <li><a class="page-link" href="/work.html" >Work</a></li>
          
        
      </ul>

      <form class="navbar-form navbar-right" method="get" role="search"
            action="http://www.google.com/search">
          <div class="form-group">
            <input type="text" name="query" class="form-control"
                   placeholder="Search">
            <input type="hidden" name="sitesearch" value="http://julio.meroh.net/">
          </div>
          <button type="submit" value="Search" class="btn btn-default">
            <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
          </button>
      </form>
    </div>
  </div>
</nav>

</header>


    <div class="page-header">
      <div class="container">
        <h1>pkg-config: A quick introduction</h1>

        <p>March 13, 2005</p>

        
      </div>
    </div>

    <div class="container">
      <article>
        <p>If you have ever tried to check for the presence of a library from a configuration script, you know this is not an easy task. Getting the right compiler (<tt>CFLAGS</tt>) and linker (<tt>LIBS</tt>) flags can be very difficult, if not impossible, without manual help from the user.</p>  <p>To detect some libraries, you have to create a little test program and link it against the library you are looking for. If the build is successful, the library is available, and possibly ready to be used. In fact, this is what <a href="http://www.gnu.org/software/autoconf/">GNU Autoconf</a>'s <tt>AC_CHECK_LIB</tt> macro does. However, this is not necessarily true, as the detected library may be older than you expected, or may need some extra flags that you didn't think of.</p>  <p>To overcome this difficulty, the <tt>*-config</tt> scripts were born. These scripts, specific to a library, print the required compiler and linker flags to the standard output, so that the configuration script can get them. For example, consider the <a href="http://www.gtk.org/">glib</a> 1.x library.  It includes the <tt>glib-config</tt> script, which produces the following output:</p>  <pre>[dawn jmmv] $ glib-config --cflags<br />-I/usr/pkg/include/glib/glib-1.2 -I/usr/pkg/lib/glib/include<br />[dawn jmmv] $ glib-config --libs<br />-L/usr/pkg/lib -Wl,-R/usr/pkg/lib -lglib</pre><p></p>  <p>This is certainly nicer than manual detection of libraries, but has a problem: each library has to provide its own script, which may be syntactically incompatible with all other ones (e.g., accepting an <tt>-ldflags</tt> flag rather than <tt>--libs</tt>).</p>  <p>And here is where <a href="http://www.freedesktop.org/Software/pkgconfig">pkg-config</a> comes into play: it generalizes the <tt>*-config</tt> scripts concept and provides a consistent framework to access library information.</p>  <p>In the pkg-config world, each library installs a special metadata file in a centralized directory (typically, <tt>lib/pkgconfig</tt> relative to the installation prefix). These files specify the version of the installed library, the compiler and linker flags needed to link to it as well as some other extra information. Then, the pkg-config utility can be used to consistently query this information.</p>  <p>The above glib example becomes the following:</p>  <pre>[dawn jmmv] $ pkg-config --cflags glib<br />-I/usr/pkg/include/glib/glib-1.2 -I/usr/pkg/lib/glib/include<br />[dawn jmmv] $ pkg-config --libs glib<br />-Wl,-R/usr/pkg/lib -L/usr/pkg/lib -lglib</pre><p></p>  <p>We can also ensure that a given version is present:</p>  <pre>[dawn jmmv] $ pkg-config --print-errors glib-2.0 ">=" 2.6.0<br />[dawn jmmv] $ pkg-config --print-errors glib-2.0 ">=" 2.10.0<br />Requested 'glib-2.0 >= 2.10.0' but version of GLib is 2.6.2</pre><p></p>  <p>Furthermore, this integrates nicely with configuration scripts generated by GNU Autoconf, as pkg-config provides a macro (<tt>PKG_CHECK_MODULES</tt>) to trivially query package information.</p>  <p>Unfortunately, not all libraries provide pkg-config metadata files (yet?), so you still need to fallback to the previous mechanisms if available. Furthermore, some people don't like pkg-config, but I can't see why. To me, it's a very neat concept (I'm not talking about its internal implementation, which may be messy) that greatly simplifies things.</p><p class="mobile-post"></p>

      </article>

      <div class="post-links">
        <p>
          

          

          <a href="/feed.xml">Subscribe via RSS</a>
          &middot;
          <a href="/blog">Go to posts index</a>
        </p>

        <form class="form-inline"
            action="https://feedburner.google.com/fb/a/mailverify"
            method="post"
            target="popupwindow"
            onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=jmmv', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
          <div class="form-group form-group-sm">
            <input type="text" style="width: 400px" name="email"
                    placeholder="Enter your email to subscribe to new posts"
                    class="form-control input-sm"/>
          </div>
          <button type="submit" value="Subscribe"
                  class="btn btn-default btn-sm">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
          </button>
          &nbsp;&nbsp;&nbsp;Delivered by
          <input type="hidden" value="jmmv" name="uri"/>
          <input type="hidden" name="loc" value="en_US"/>
          <a href="https://feedburner.google.com" target="_blank">FeedBurner</a>
        </form>
      </div>

      <div id="disqus_thread">
        <script>
          var disqus_config = function () {
            this.page.url = "http:\/\/julio.meroh.net\/2005\/03\/pkg-config-quick-introduction.html";
            this.page.identifier = "2005-03-13-pkg-config-quick-introduction";
          };
          (function() { 
            var d = document, s = d.createElement('script');

            s.src = '//jmmv.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments
          powered by Disqus.</a>
        </noscript>
      </div>
      
      <p>Comments from the original Blogger-hosted post:</p>
      <script src="https://apis.google.com/js/plusone.js"></script>
      <div class="g-comments"
           data-href="http://julipedia.meroh.net/2005/03/pkg-config-quick-introduction.html"
           data-first_party_property="BLOGGER"
           data-view_type="FILTERED_POSTMOD">
      </div>
      
    </div>

    <div class="container">
  <footer>
    <p class="pull-right"><a href="#">Back to top</a></p>
    <p>Copyright 2018 Julio Merino</p>
  </footer>
</div>

<script src="/js/jquery-1.11.2.min.js"></script>
<script src="/css/bootstrap.min.js"></script>

<script>
$("p:contains('NOTE: ')").addClass("callout callout-info");
$("p:contains('IMPORTANT: ')").addClass("callout callout-info");
$("p:contains('WARNING: ')").addClass("callout callout-warning");
$("p:contains('DANGER: ')").addClass("callout callout-danger");
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
  m.parentNode.insertBefore(a,m)})(window,document,'script',
  '//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63557333-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
