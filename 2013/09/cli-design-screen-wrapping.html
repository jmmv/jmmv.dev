<!doctype html><html lang=en xmlns=http://www.w3.org/1999/xhtml xmlns:fb=http://ogp.me/ns/fb#><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:site_name" content="Julio Merino (jmmv.dev)"><meta property="twitter:site" content="@jmmv"><title>CLI design: Screen wrapping - Julio Merino (jmmv.dev)</title><meta property="og:title" content="CLI design: Screen wrapping - Julio Merino (jmmv.dev)"><meta property="twitter:title" content="CLI design: Screen wrapping - Julio Merino (jmmv.dev)"><meta name=description content="In a world of terminal emulators within graphical environments, there is no longer a &amp;ldquo;standard&amp;rdquo; window size. 80x24 is still the default, sure, but it&amp;rsquo;s trivial for users to resize the terminal. Why does this matter?
Consider the most obvious case: the help message of your program. It is incredibly common to see carefully-formatted embedded strings into the program&amp;rsquo;s code designed to fit within a 80x24 window (which is especially true for the width of the text)."><meta property="og:description" content="In a world of terminal emulators within graphical environments, there is no longer a &amp;ldquo;standard&amp;rdquo; window size. 80x24 is still the default, sure, but it&amp;rsquo;s trivial for users to resize the terminal. Why does this matter?
Consider the most obvious case: the help message of your program. It is incredibly common to see carefully-formatted embedded strings into the program&amp;rsquo;s code designed to fit within a 80x24 window (which is especially true for the width of the text)."><meta property="twitter:description" content="In a world of terminal emulators within graphical environments, there is no longer a &amp;ldquo;standard&amp;rdquo; window size. 80x24 is still the default, sure, but it&amp;rsquo;s trivial for users to resize …"><meta name=author content="Julio Merino"><meta property="twitter:creator" content="@jmmv"><meta name=generator content="Hugo 0.111.3"><meta property="og:url" content="https://jmmv.dev/2013/09/cli-design-screen-wrapping.html"><meta property="og:type" content="blog"><meta property="twitter:card" content="summary"><link rel=canonical href=https://jmmv.dev/2013/09/cli-design-screen-wrapping.html><link rel=alternate type=application/rss+xml title="Julio Merino (jmmv.dev)" href=/feed.xml><link rel=stylesheet href=/sass/main.min.52b548e9c069c09e7522318b2cf209296e28a38aa2739ce528e6f9a488ce0797.css><link rel=stylesheet href=/css/chroma.css><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicons/favicon-96x96.png sizes=96x96><meta property="og:image" content="/images/favicons/favicon-1200x1200.png"><meta property="twitter:image" content="https://jmmv.dev/images/favicons/favicon-1200x1200.png"><script>const SITE_ID="e8da9f62-b7ac-4fe9-bf20-7c527199a376",BASE_URL="https://jmmv.dev/"</script></head><body><header class=site-header><nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary"><a class=navbar-brand href=/><img src=/images/favicons/favicon-30x30.png width=30 height=30 class="d-inline-block align-top" alt>
&nbsp;Julio Merino</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=/about.html>About</a></li><li class=nav-item><a class=nav-link href=/essays.html>Essays</a></li><li class=nav-item><a class=nav-link href=/resume.html>Resume</a></li><li class=nav-item><a class=nav-link href=/software.html>Software</a></li></ul><ul class="navbar-nav mr-4"><li class=nav-item><a class=nav-link href=/archive.html>Archive</a></li><li class=nav-item><a class=nav-link href=/series.html>Series</a></li><li class=nav-item><a class=nav-link href=/tags.html>Tags</a></li></ul><form class=form-inline method=get role=search action=https://www.google.com/search><div class=input-group><input type=search name=query class=form-control placeholder=Search aria-label=Search><div class=input-group-append><button type=submit value=Search class="btn btn-light">
<img src=/octicons/search.svg></button></div></div><input type=hidden name=sitesearch value=https://jmmv.dev/></form></div></nav></header><div class=page-header><div class=container><h1>CLI design: Screen wrapping</h1><p>September 12, 2013 &#183;
About 4 minutes
&#183;
Tags:
<a href=/tags/cli-design>cli-design</a></p><p class=post-meta-p>This article is part number
10 of 12 of the
<a href=/series.html#CLI%20design><b>CLI design</b></a> series.</p></div></div><div class="container post-body"><div class=row><div class=col-md-9><div class=row><div class=col><article><p>In a world of terminal emulators within graphical environments, there is no longer a &ldquo;standard&rdquo; window size. 80x24 is still the default, sure, but it&rsquo;s trivial for users to resize the terminal. Why does this matter?</p><p>Consider the most obvious case: the help message of your program. It is incredibly common to see <a href="http://git.savannah.gnu.org/gitweb/?p=coreutils.git;a=blob;f=src/cp.c;h=e235b326d4d45b82aadaccef6a2f95da7137c1aa;hb=46f7e05291a22a1f15f839827ed257782138fae0#l149">carefully-formatted embedded strings into the program&rsquo;s code</a> designed to fit within a 80x24 window (which is especially true for the width of the text). Other than being a nightmare to maintain such a piece of code, what happens when the user resizes the terminal? If he increases the number of columns, the output of the application won&rsquo;t make use of such extra space and will continue to use the same number of lines — a situation that may be undesirable in a widescreen setting. If he decreases the number of columns, the output of the application will get wrapped at weird boundaries.</p><p>So the question is: should you make your program detect the width of the screen and <em>explicitly</em> wrap its output on word boundaries so that proper alignment can be maintained? Or should it not? As usual, &ldquo;it depends.&rdquo; Let&rsquo;s see the various cases.</p><h1 id=help-messages-tables-etc>Help messages, tables, etc.</h1><p>For any kind of output that requires &ldquo;pretty-printing&rdquo; (e.g. anything that involves alignment of text into paragraphs or tabular environments), explicit screen wrapping is OK and, in my opinion, a good idea. If you do this, then the text will remain readable no matter what terminal size the user has chosen, as words will not be broken at unexpected points and any alignment will be respected.</p><p>Of course, this is easier said than done. Implementing proper line wrapping is tricky, especially if what you are trying to print has any kind of tabular data. The help message of the application is an obvious example of a piece of text explicitly for user consumption; it is also a piece of text composed of two columns: the column that lists the available options and the meaning of the arguments, and the column that provides their descriptions. Aligning these columns properly and automatically, regardless of the screen width, <a href=https://github.com/jmmv/kyua/blob/master/utils/text/table.cpp>requires a fair amount of code</a> but results in an interface that is nicer to use and easier to maintain.</p><h1 id=errors-warnings-informational-messages-etc>Errors, warnings, informational messages, etc.</h1><p>Don&rsquo;t. Most informational <a href=/2013/09/cli-design-handling-output-messages.html>messages printed by the application</a>, be them errors, warnings or just status messages, are usually prefixed with the name of your binary. I&rsquo;ve made the mistake in the past of trying to wrap these messages on screen boundaries in a smart way by splitting the long lines on word boundaries and repeating the line prefix on every line. The results were not great because this is broken for two reasons.</p><p>The first reason you should not do this is because the user is not accustomed to this behavior. When the user sees a long error message on the console, the user expects it to run over the right margin and continue on the next line. If you manually cut the message, it very quickly becomes non-intuitive because the output <em>seems to contain</em> more than one individual message due to the repetition of the prefix.</p><p>The second reason is that explicit line refilling breaks copy/paste functionality. Some terminal emulators are smart enough to understand when a line wraps and memorize that fact in their history so that, if you triple-click a long wrapped line, the terminal can select the full error message (even if wrapped) for later copying into the clipboard. If your program breaks lines explicitly, the same error message will appear as different lines to the terminal emulator and thus it will be impossible to just copy the whole message by selecting a single line.</p><p>As you can see <a href=https://github.com/jmmv/kyua/commit/d5d976ddab2cd92e0b29d027d3d785c495254a9b#diff-86a440f6d67d518d720e82589dfdd8e6>in this commit to Kyua</a>, I had to revert the automatic line breaking soon after submission due to the frustration that this inspired.</p></article><p class=post-meta-p>This article is part number
10 of 12 of the
<a href=/series.html#CLI%20design><b>CLI design</b></a> series.</p></div></div><div class="container post-links"><div class=row><div class="col mr-auto text-left"><span><a href=https://jmmv.dev/2013/09/adding-julipedia-to-technorati.html>&#171; Previous</a></span></div><div class="col text-center"><span><a href=/archive.html>All posts</a></span></div><div class="col ml-auto text-right"><span><a href=https://jmmv.dev/2013/09/cli-design-consider-interactive-prompts.html>Next &#187;</a></span></div></div></div><div class="container post-votes"><div class=row><div class="col-lg-4 my-2"><div class=row><div class=col><a onclick=voteThumbsUp() class="btn btn-block btn-outline-success" id=thumbs-up-btn>👍
(<span id=thumbs-up-count>0</span>)</a></div><div class=col><a onclick=voteThumbsDown() class="btn btn-block btn-outline-danger" id=thumbs-down-btn>👎
(<span id=thumbs-down-count>0</span>)</a></div></div></div><div class="col-lg-8 my-2 d-none d-sm-block"><div class=row><div class="col-md-4 text-center"><a href="https://www.reddit.com/submit?title=CLI+design%3A+Screen+wrapping&amp;url=https%3A%2F%2Fjmmv.dev%2F2013%2F09%2Fcli-design-screen-wrapping.html" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/reddit.png alt=Reddit width=24 height=24></a></div><div class="col-md-4 text-center"><a href="https://news.ycombinator.com/submitlink?t=CLI+design%3A+Screen+wrapping&amp;u=https%3A%2F%2Fjmmv.dev%2F2013%2F09%2Fcli-design-screen-wrapping.html" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/ycombinator.png alt="Hacker News" width=24 height=24></a></div><div class="col-md-4 text-center"><a href="https://twitter.com/intent/tweet?status=CLI+design%3A+Screen+wrapping+%E2%80%94+https%3A%2F%2Fjmmv.dev%2F2013%2F09%2Fcli-design-screen-wrapping.html+%E2%80%94+cc+%40jmmv" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/Twitter_Social_Icon_Circle_Color.png alt=Twitter width=24 height=24></a></div></div></div></div><div class="row my-4" id=postCommentRow><div class=col><div class=media><img class=mr-3 src=/octicons/pencil.svg width=32px height=32px><div class="media-body container"><form method=post id=newPost><div class=row><div class="col my-1"><textarea class=form-control rows=1 id=postCommentContent onclick=showPostComment() placeholder="Leave a comment"></textarea></div></div><div class="row newPostControls" style=display:none><div class="col my-1 form-group"><label for=postCommentAuthor>Your name (optional):</label>
<input type=text class=form-control id=postCommentAuthor></div></div><div class="row newPostControls" style=display:none><div class="col my-1 form-group"><label for=postCommentEmail>Your email (optional):</label>
<input type=text class=form-control type=email id=postCommentEmail>
<small class="form-text text-muted">Invisible to all readers; if provided, you will receive notifications when replied to (not implemented yet)</small></div></div><div class=row id=postCommentError style=display:none><div class="col mt-1 alert-danger"><p></p></div></div><div class="row newPostControls" style=display:none><button class="col-md-3 my-1 btn btn-primary" type=submit id=submitCommentButton>Post</button>
<small class="col-md-9 my-1 text-muted">Comments are subject to moderation. This feature is experimental and is powered by <a href=/software/endtracker.html>EndTRACKER</a>. If you experience any issues, please <a href=/about.html#contact>contact me off-band</a>.</small></div></form></div></div></div></div><script>function hidePostComment(){var t,e=document.getElementById("postCommentContent");e.rows=1,e.value="",t=document.getElementsByClassName("newPostControls"),Array.prototype.forEach.call(t,function(e){e.style.display="none"})}function showPostComment(){var e,t=document.getElementById("postCommentContent");t.rows=5,e=document.getElementsByClassName("newPostControls"),Array.prototype.forEach.call(e,function(e){e.style.display=""})}const form=document.querySelector("#newPost");form.onsubmit=function(e){e.preventDefault();let t=document.getElementById("postCommentAuthor").value,n=document.getElementById("postCommentEmail").value,s=document.getElementById("postCommentContent").value;postComment(t,n,s,hidePostComment)}</script></div><div class="container post-subscribe d-block d-md-none"><div class="row text-center"><p>A blog on operating systems, programming languages, testing, build systems, my own software
projects and even personal productivity. Specifics include FreeBSD, Linux, Rust, Bazel and
EndBASIC.</p></div><div class=row><div class="col-sm-3 py-2"><div class=row><div class="col px-2 text-center"><a rel=me href=https://mastodon.online/@jmmv><img src=/images/badges/mastodon-logo.svg width=32px height=32px alt="Follow @jmmv on Mastodon"></a></div><div class="col px-2 text-center"><a href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fjmmv.dev%2F&amp;screen_name=jmmv"><img src=/images/badges/Twitter_logo_blue.svg width=32px height=32px alt="Follow @jmmv on Twitter"></a></div><div class="col px-2 text-center"><a href=/feed.xml><img src=/images/badges/feed-icon-28x28.png alt="RSS feed"></a></div></div></div><div class="col-sm-9 py-2 text-center"><form action=https://endtracker.azurewebsites.net/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/subscribers/add method=post><div class=form-group><div class=row><input type=text name=email placeholder="Enter your email" class="form-control input-sm col-8 text-center">
<button type=submit class="btn btn-primary col-4">Subscribe</button></div></div><small><span class=subscriber-count>0</span> subscribers</small></form></div></div></div></div><div class="col-md-3 sidebar d-none d-md-block"><div class=row><div class="col text-center p-2"><p><a href=/about.html class=clear-link><img src=/images/avatars/20181124-snow.jpg class="rounded-circle shadow my-2" style=width:100px><br><b>Julio Merino</b><br>A blog on operating systems, programming languages, testing, build systems, my own software
projects and even personal productivity. Specifics include FreeBSD, Linux, Rust, Bazel and
EndBASIC.</a></p><div class=row><div class="col-sm-4 text-center"><p><a rel=me href=https://mastodon.online/@jmmv><img src=/images/badges/mastodon-logo.svg width=32px height=32px alt="Follow @jmmv on Mastodon"></a></p></div><div class="col-sm-4 text-center"><p><a href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fjmmv.dev%2F&amp;screen_name=jmmv"><img src=/images/badges/Twitter_logo_blue.svg width=32px height=32px alt="Follow @jmmv on Twitter"></a></p></div><div class="col-sm-4 text-center"><p><a href=/feed.xml><img src=/images/badges/feed-icon-28x28.png alt="RSS feed"></a></p></div></div><form action=https://endtracker.azurewebsites.net/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/subscribers/add method=post><div class=form-group><input type=text name=email placeholder="Enter your email" class="form-control input-sm text-center">
<button type=submit class="btn btn-primary btn-block">Subscribe</button></div><small><span class=subscriber-count>0</span> subscribers</small></form></div></div><div class=row><div class=col><h2>Featured software</h2><ul><li class=overflow-ellipsis><a href=https://www.endbasic.dev/ target=_blank>EndBASIC: Online BASIC+DOS env</a></li><li class=overflow-ellipsis><a href=https://endtracker.azurewebsites.net/ target=_blank>EndTRACKER: Services for static sites</a></li></ul></div></div><div class=row><div class=col><h2>Featured posts</h2><ul><li class=overflow-ellipsis><a href=/2023/06/fast-machines-slow-machines.html>Fast machines, slow machines</a></li><li class=overflow-ellipsis><a href=/2022/12/endbasic-0.10.html>EndBASIC 0.10: Core language, evolved</a></li><li class=overflow-ellipsis><a href=/2022/10/bye-microsoft-hi-snowflake.html>Farewell, Microsoft; hello, Snowflake!</a></li><li class=overflow-ellipsis><a href=/2022/05/rust-is-hard-but-does-it-matter.html>Rust is hard, yes, but does it matter?</a></li><li class=overflow-ellipsis><a href=/2022/04/rust-traits-and-dependency-injection.html>Rust traits and dependency injection</a></li><li class=overflow-ellipsis><a href=/2022/03/a-year-on-windows-intro.html>A year on Windows: Introduction</a></li><li class=overflow-ellipsis><a href=/2021/04/always-be-quitting.html>Always be quitting</a></li><li class=overflow-ellipsis><a href=/2021/02/google-monorepos-and-caching.html>How does Google keep build times low?</a></li><li class=overflow-ellipsis><a href=/2020/12/google-no-clean-builds.html>How does Google avoid clean builds?</a></li><li class=overflow-ellipsis><a href=/2020/12/unit-testing-a-console-app.html>Unit-testing a console app (a text editor)</a></li><li class=overflow-ellipsis><a href=/essays.html#featured>More...</a></li></ul></div></div></div></div></div><footer class=container><div class=row><div class="col-4 order-2 texr-right"><p class=float-right><a href=#>Back to top</a></p></div><div class="col-8 order-1 mr-auto"><p>Copyright 2004&ndash;2023 Julio Merino</p></div></div></footer><script type=module>
  import { addAnchorsToHeaders, addElementClasses, BatchClient } from "\/js\/main.d30f168b11d80082408f4a983af9a626c6e57d58f7846b2174bac40d43be33e3.js";

  var batchClient = new BatchClient(SITE_ID);
  batchClient.doAll({
    put_request: true, get_comments: true, get_subscriber_count: true, get_votes: true });

  window.voteThumbsUp = function() { batchClient.voteThumbsUp(); }
  window.voteThumbsDown = function() { batchClient.voteThumbsDown(); }

  window.postComment = function(...args) {
    batchClient.postComment(...args);
  };

  addAnchorsToHeaders();
  addElementClasses();
</script><noscript><img src="https://hugo-dynamic.jmmv.dev/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/pages/aHR0cHM6Ly9qbW12LmRldi8yMDEzLzA5L2NsaS1kZXNpZ24tc2NyZWVuLXdyYXBwaW5nLmh0bWw=/stamp.gif" style=display:none></noscript></body></html>