<!DOCTYPE html>
<html>
  <head>
    

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head
      content must come *after* these tags -->

<meta name="description"
      content="Apologies for the long pause in the header files series and in blogging in general.  With the holidays in between and, especially, with my refreshed energy t...">
<meta name="author" content="Julio Merino">

<meta content="http://julio.meroh.net/2013/12/header-files-qualify-your-identifiers.html" property="og:url">

<link rel="canonical" href="http://julio.meroh.net/2013/12/header-files-qualify-your-identifiers.html">
<link rel="alternate" type="application/rss+xml" title="Julio Merino" href="http://julio.meroh.net/feed.xml" />

<link rel="stylesheet" href="/css/main.css">

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="/js/html5shiv-3.7.2.min.js"></script>
  <script src="/js/respond-1.4.2.min.js"></script>
<![endif]-->

    <title>Header files: Qualify your identifiers - Julio Merino</title>
    <meta content="Header files: Qualify your identifiers - Julio Merino" property="og:title">
  </head>

  <body>
    <header class="site-header">

<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed"
              data-toggle="collapse" data-target="#navbar"
              aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Julio Merino</a>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
          
            
              
                <li><a class="page-link"
                href="/about/"
                >About</a></li>
              
            
          
        
          
            
              
                <li><a class="page-link"
                href="/essays/"
                >Essays</a></li>
              
            
          
        
          
            
              
                <li><a class="page-link"
                href="/software/"
                >Software</a></li>
              
            
          
        
          
            
              
                <li><a class="page-link"
                href="/work/"
                >Work</a></li>
              
            
          
        
      </ul>

      <form class="navbar-form navbar-right" method="get" role="search"
            action="http://www.google.com/search">
          <div class="form-group">
            <input type="text" name="query" class="form-control"
                   placeholder="Search">
            <input type="hidden" name="sitesearch" value="http://julio.meroh.net">
          </div>
          <button type="submit" value="Search" class="btn btn-default">
            <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
          </button>
      </form>
    </div>
  </div>
</nav>

</header>


    <div class="page-header">
      <div class="container">
        <h1>Header files: Qualify your identifiers</h1>

        <p>Fri, 27 Dec 2013 18:00:00 +0000</p>

        
      </div>
    </div>

    <div class="container">
      <article>
        <p>Apologies for the long pause in the <a href="http://julipedia.meroh.net/search/label/header-files">header files series</a> and in blogging in general.  With the holidays in between and, especially, with my refreshed energy to do stuff in the FreeBSD and Kyua camps, I haven't had any reasonable amount of time to write.  And, sincerely, with my very limited free time I really cannot cover it all.  So... these days, coding it is thus expect a reduced blogging pace!</p> <hr /> <p>As we saw in the previous post, <a href="/2013/12/header-files-poor-mans-replacement-for.html">header files are a poor system to implement real modules</a>.  In particular, any identifier defined in a header file becomes "public" to any translation unit including such file.  This, of course, comes with implied dangers in name collisions and symbol redefinitions.</p> <p>There is no way to prevent this, so let's see some simple workarounds.</p> <p><b>C</b></p> <p>The only workaround you have in C is to fully qualify your identifiers with a prefix that hopefully is unique within any code that may require your headers.  In the general case, it is often good enough to just use your project name as the prefix: for example, for a project <tt>libfoo</tt>, you would use a <tt>foo_</tt> prefix in all of your identifiers.</p> <p>Avoid the temptation to shorten your project name to a single letter.  There are only so many letters in the alphabet so you &mdash;or, worse, the users of your code&mdash; are guaranteed to experience collisions with some other library at some point in the future.</p> <p>On the other hand, there is no real benefit to go to great extents like in Java where namespaces include a domain name that you control so as to enforce globally-unique names.  In fact, doing this in a language like C would result in a completely unusable API due to extremely-long identifier names.</p> <p><b>C++</b></p> <p>Things are slightly better in the C++ camp due to the existence of namespaces.  Installable header files should define <i>everything</i> they provide within a project-specific namespace.</p> <p>There is one caveat that many people seem to forget: <b>macros</b> (and other preprocessor symbols)!  Defining a macro within a namespace <i>does not make it specific to the namespace</i>.  Macros are "global" by default due to the fact that... well... they belong to a separate language and are processed separately (n.b. not the case in clang, but that's a separate story).  So, for macros, you will have to do the same as in C and prefix them explicitly with your project name.  It's ugly, so bonus points if you can avoid providing macros altogether.</p>

      </article>

      <div class="post-links">
        <p>
          

          

          <a href="/feed.xml">Subscribe
          via RSS</a>
          &middot;
          <a href="/blog/">Go to posts index</a>
        </p>

        <form class="form-inline"
            action="https://feedburner.google.com/fb/a/mailverify"
            method="post"
            target="popupwindow"
            onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=jmmv', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
          <div class="form-group form-group-sm">
            <input type="text" style="width: 400px" name="email"
                    placeholder="Enter your email to subscribe to new posts"
                    class="form-control input-sm"/>
          </div>
          <button type="submit" value="Subscribe"
                  class="btn btn-default btn-sm">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
          </button>
          &nbsp;&nbsp;&nbsp;Delivered by
          <input type="hidden" value="jmmv" name="uri"/>
          <input type="hidden" name="loc" value="en_US"/>
          <a href="https://feedburner.google.com" target="_blank">FeedBurner</a>
        </form>
      </div>

      
      <div id="disqus_thread">
        <script>
          var disqus_config = function () {
            this.page.url = "http://julio.meroh.net/2013/12/header-files-qualify-your-identifiers.html";
            this.page.identifier = "/2013/12/header-files-qualify-your-identifiers";
          };
          (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');

            s.src = '//jmmv.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments
          powered by Disqus.</a>
        </noscript>
      </div>
      
      <p>Comments from the original Blogger-hosted post:</p>
      <script src="https://apis.google.com/js/plusone.js"></script>
      <div class="g-comments"
           data-href="http://julipedia.meroh.net/2013/12/header-files-qualify-your-identifiers.html"
           data-first_party_property="BLOGGER"
           data-view_type="FILTERED_POSTMOD">
      </div>
      
      
    </div>

    <div class="container">
  <footer>
    <p class="pull-right"><a href="#">Back to top</a></p>
    <p>Copyright 2016 Julio Merino</p>
  </footer>
</div>

<script src="/js/jquery-1.11.2.min.js">
</script>
<script
  src="/css/bootstrap.min.js">
</script>

<script src="/js/auto-toc-1.0.0.dist.js">
</script>

<script>
$("p:contains('NOTE: ')").addClass("callout callout-info");
$("p:contains('IMPORTANT: ')").addClass("callout callout-info");
$("p:contains('WARNING: ')").addClass("callout callout-warning");
$("p:contains('DANGER: ')").addClass("callout callout-danger");
</script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
  m.parentNode.insertBefore(a,m)})(window,document,'script',
  '//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63557333-1', 'auto');
  ga('send', 'pageview');
</script>


  </body>
</html>
