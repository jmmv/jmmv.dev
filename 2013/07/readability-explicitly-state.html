<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  

  <title>Readability: Explicitly state complementary conditions - Julio Merino</title>
  <meta content="Readability: Explicitly state complementary conditions - Julio Merino" property="og:title">

  
  <meta name="description" content="In the most basic form, a conditional has two branches and the conditional expression inspects a single variable on entry. For example:
if balance &amp;gt;= 0:
color = BLACK
else:
color = RED In this little code snippet, the condition balance &amp;gt;= 0 only depends on one variable, and the two branches of the conditional cover all possible values of the input variable. I.e. the first branch covers all cases where the balance is positive or zero, and the second branch covers all cases where the balance is negative.">
  <meta name="author" content="Julio Merino">
  <meta name="generator" content="Hugo 0.36.1" />

  <meta content="http://julio.meroh.net/2013/07/readability-explicitly-state.html" property="og:url">

  <link rel="canonical" href="http://julio.meroh.net/2013/07/readability-explicitly-state.html">
  <link rel="alternate" type="application/rss+xml"
        title="Julio Merino" href="/feed.xml" />

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/chroma.css">

  
  <!--[if lt IE 9]>
    <script src="/js/html5shiv-3.7.2.min.js"></script>
    <script src="/js/respond-1.4.2.min.js"></script>
  <![endif]-->
</head>


  <body>
    <header class="site-header">

<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed"
              data-toggle="collapse" data-target="#navbar"
              aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Julio Merino</a>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
          
            <li><a class="page-link" href="/about.html" >About</a></li>
          
        
          
            <li><a class="page-link" href="/essays.html" >Essays</a></li>
          
        
          
            <li><a class="page-link" href="/software.html" >Software</a></li>
          
        
          
            <li><a class="page-link" href="/work.html" >Work</a></li>
          
        
      </ul>

      <form class="navbar-form navbar-right" method="get" role="search"
            action="http://www.google.com/search">
          <div class="form-group">
            <input type="text" name="query" class="form-control"
                   placeholder="Search">
            <input type="hidden" name="sitesearch" value="http://julio.meroh.net/">
          </div>
          <button type="submit" value="Search" class="btn btn-default">
            <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
          </button>
      </form>
    </div>
  </div>
</nav>

</header>


    <div class="page-header">
      <div class="container">
        <h1>Readability: Explicitly state complementary conditions</h1>

        <p>July 18, 2013</p>

        
      </div>
    </div>

    <div class="container">
      <article>
        <p>In the most basic form, a conditional has two branches and the conditional expression inspects a single variable on entry.  For example:</p> <pre>if balance &gt;= 0:<br />    color = BLACK<br />else:<br />    color = RED</pre> <p>In this little code snippet, the condition <tt>balance &gt;= 0</tt> only depends on one variable, and the two branches of the conditional cover all possible values of the input variable.  I.e. the first branch covers all cases where the balance is positive or zero, and the second branch covers all cases where the balance is negative.  The balance variable cannot have a value not covered by these cases.  Easy.</p> <p>Now let's consider trickier conditionals: those that have compound expressions mixing multiple variables.  Take a look at this:</p> <pre>if checking_balance &lt; 0 and savings_balance &lt; 0:<br />    color = RED<br />else:<br />    color = BLACK</pre> <p>This simple conditional statement appears to have two code paths based on the way the code is written.  However, there are actually four different possibilities:</p> <ul>    <li><tt>checking_balance &lt; 0 and savings_balance &lt; 0</tt></li>    <li><tt>checking_balance &gt;= 0 and savings_balance &lt; 0</tt></li>    <li><tt>checking_balance &lt; 0 and savings_balance &gt;= 0</tt></li>    <li><tt>checking_balance &gt;= 0 and savings_balance &gt;= 0</tt></li></ul> <p>In the previous code snippet, only one of these conditions was explicitly stated and the handling for the other three was folded into the else clause.  This is OK in the sense that the program may be doing exactly what we want it to do.  The <i>reader</i> of the code, on the other hand, lacks information: did the programmer consider the four cases?  Did he really intend to bundle them together, or instead something was missed?</p> <p>My guideline to make the above "obvious" is to unfold the conditional to explicitly describe all possible cases.  This forces me to have to think about these cases, and if nothing special has to be done, to document the fact:</p> <pre>if checking_balance &lt; 0 and savings_balance &lt; 0:<br />    color = RED<br /><b>elif checking_balance &gt;= 0 and savings_balance &lt; 0:</b><br />    <b>color = BLACK</b><br /><b>elif checking_balance &lt; 0 and savings_balance &gt;= 0:</b><br />    <b>color = BLACK</b><br />else:<br />    <b>assert checking_balance &gt;= 0 and savings_balance &gt;= 0</b><br />    color = BLACK</pre> <p>This idiom does not affect the semantics of your code and a smart compiler should be able to optimize the various cases out.  However, this style shows to the reader that you have thought about all the corner cases, and it expresses what the intent is in these cases.  Furthermore, when you are later writing tests, you can more easily determine what the corner cases of your code are by simple visual inspection of all code paths.</p> <p>Another important thing to note in the code above is the addition of an assertion to the <tt>else</tt> clause.  Because the expression is compound, and because there are more than two code paths, it is not immediately obvious what case is being handled in the last branch.  By adding an assertion that indicates what the condition is, this becomes obvious.  We'll cover more on this topic on the next post.</p> <p>Lastly, be aware that the guideline proposed in this post does not necessarily make sense in all cases.  For example, conditionals that handle a special behavior controlled by a boolean flag only have one branch, and explicitly writing an alternate branch with a simple <tt>pass</tt> statement would be pointless.</p> <p>I suspect that mastering this idiom and determining when it is good to use it or not is trickier than the other suggestions I've been presenting.  The only way to get good at these things is by lots of practice and, especially, by reading tons of other people's code to realize the ways in code can be confusing!</p>

      </article>

      <div class="post-links">
        <p>
          

          

          <a href="/feed.xml">Subscribe via RSS</a>
          &middot;
          <a href="/blog">Go to posts index</a>
        </p>

        <form class="form-inline"
            action="https://feedburner.google.com/fb/a/mailverify"
            method="post"
            target="popupwindow"
            onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=jmmv', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
          <div class="form-group form-group-sm">
            <input type="text" style="width: 400px" name="email"
                    placeholder="Enter your email to subscribe to new posts"
                    class="form-control input-sm"/>
          </div>
          <button type="submit" value="Subscribe"
                  class="btn btn-default btn-sm">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
          </button>
          &nbsp;&nbsp;&nbsp;Delivered by
          <input type="hidden" value="jmmv" name="uri"/>
          <input type="hidden" name="loc" value="en_US"/>
          <a href="https://feedburner.google.com" target="_blank">FeedBurner</a>
        </form>
      </div>

      <div id="disqus_thread">
        <script>
          var disqus_config = function () {
            this.page.url = "http:\/\/julio.meroh.net\/2013\/07\/readability-explicitly-state.html";
            this.page.identifier = "2013-07-18-readability-explicitly-state";
          };
          (function() { 
            var d = document, s = d.createElement('script');

            s.src = '//jmmv.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments
          powered by Disqus.</a>
        </noscript>
      </div>
      
      <p>Comments from the original Blogger-hosted post:</p>
      <script src="https://apis.google.com/js/plusone.js"></script>
      <div class="g-comments"
           data-href="http://julipedia.meroh.net/2013/07/readability-explicitly-state.html"
           data-first_party_property="BLOGGER"
           data-view_type="FILTERED_POSTMOD">
      </div>
      
    </div>

    <div class="container">
  <footer>
    <p class="pull-right"><a href="#">Back to top</a></p>
    <p>Copyright 2018 Julio Merino</p>
  </footer>
</div>

<script src="/js/jquery-1.11.2.min.js"></script>
<script src="/css/bootstrap.min.js"></script>

<script>
$("p:contains('NOTE: ')").addClass("callout callout-info");
$("p:contains('IMPORTANT: ')").addClass("callout callout-info");
$("p:contains('WARNING: ')").addClass("callout callout-warning");
$("p:contains('DANGER: ')").addClass("callout callout-danger");
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
  m.parentNode.insertBefore(a,m)})(window,document,'script',
  '//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63557333-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
