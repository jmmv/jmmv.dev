<!doctype html><html lang=en xmlns=http://www.w3.org/1999/xhtml xmlns:fb=http://ogp.me/ns/fb#><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:site_name" content="Julio Merino (jmmv.dev)"><meta property="twitter:site" content="@jmmv"><title>EndBASIC 0.4 release announcement - Julio Merino (jmmv.dev)</title><meta property="og:title" content="EndBASIC 0.4 release announcement - Julio Merino (jmmv.dev)"><meta property="twitter:title" content="EndBASIC 0.4 release announcement - Julio Merino (jmmv.dev)"><meta name=description content="About a month ago and after a long hiatus, I published EndBASIC 0.3 and the adrenaline rush that came with it got my wheels spinning again full-steam ahead. So here I am today, ready to announce the 0.4 release. But&amp;hellip; &amp;ldquo;what could have possibly changed in just a month of someone&amp;rsquo;s free time&amp;rdquo;, you wonder? Enough, actually!
EndBASIC 0.4 is the release that fulfills my original goal of being able to run a &amp;ldquo;guess the number&amp;rdquo; game."><meta property="og:description" content="About a month ago and after a long hiatus, I published EndBASIC 0.3 and the adrenaline rush that came with it got my wheels spinning again full-steam ahead. So here I am today, ready to announce the 0.4 release. But&amp;hellip; &amp;ldquo;what could have possibly changed in just a month of someone&amp;rsquo;s free time&amp;rdquo;, you wonder? Enough, actually!
EndBASIC 0.4 is the release that fulfills my original goal of being able to run a &amp;ldquo;guess the number&amp;rdquo; game."><meta property="twitter:description" content="About a month ago and after a long hiatus, I published EndBASIC 0.3 and the adrenaline rush that came with it got my wheels spinning again full-steam ahead. So here I am today, ready to announce the …"><meta name=author content="Julio Merino"><meta property="twitter:creator" content="@jmmv"><meta name=generator content="Hugo 0.111.3"><meta property="og:url" content="https://jmmv.dev/2020/12/endbasic-0.4.html"><meta property="og:type" content="blog"><meta property="twitter:card" content="summary"><link rel=canonical href=https://jmmv.dev/2020/12/endbasic-0.4.html><link rel=alternate type=application/rss+xml title="Julio Merino (jmmv.dev)" href=/feed.xml><link rel=stylesheet href=/sass/main.min.52b548e9c069c09e7522318b2cf209296e28a38aa2739ce528e6f9a488ce0797.css><link rel=stylesheet href=/css/chroma.css><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicons/favicon-96x96.png sizes=96x96><meta property="og:image" content="/images/favicons/favicon-1200x1200.png"><meta property="twitter:image" content="https://jmmv.dev/images/favicons/favicon-1200x1200.png"><script>const SITE_ID="e8da9f62-b7ac-4fe9-bf20-7c527199a376",BASE_URL="https://jmmv.dev/"</script></head><body><header class=site-header><nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary"><a class=navbar-brand href=/><img src=/images/favicons/favicon-30x30.png width=30 height=30 class="d-inline-block align-top" alt>
&nbsp;Julio Merino</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=/about.html>About</a></li><li class=nav-item><a class=nav-link href=/essays.html>Essays</a></li><li class=nav-item><a class=nav-link href=/resume.html>Resume</a></li><li class=nav-item><a class=nav-link href=/software.html>Software</a></li></ul><ul class="navbar-nav mr-4"><li class=nav-item><a class=nav-link href=/archive.html>Archive</a></li><li class=nav-item><a class=nav-link href=/series.html>Series</a></li><li class=nav-item><a class=nav-link href=/tags.html>Tags</a></li></ul><form class=form-inline method=get role=search action=https://www.google.com/search><div class=input-group><input type=search name=query class=form-control placeholder=Search aria-label=Search><div class=input-group-append><button type=submit value=Search class="btn btn-light">
<img src=/octicons/search.svg></button></div></div><input type=hidden name=sitesearch value=https://jmmv.dev/></form></div></nav></header><div class=page-header><div class=container><h1>EndBASIC 0.4 release announcement</h1><p>December 25, 2020 &#183;
About 13 minutes
&#183;
Tags:
<a href=/tags/endbasic>endbasic</a>, <a href=/tags/programming>programming</a>, <a href=/tags/release>release</a>, <a href=/tags/rust>rust</a></p></div></div><div class="container post-body"><div class=row><div class=col-md-9><div class=row><div class=col><article><p>About a month ago and after a long hiatus, I <a href=/2020/11/endbasic-0.3.html>published EndBASIC 0.3</a> and the adrenaline rush that came with it got my wheels spinning again full-steam ahead. So here I am today, ready to announce the 0.4 release. But&mldr; &ldquo;what could have possibly changed in just a month of someone&rsquo;s free time&rdquo;, you wonder? Enough, actually!</p><p>EndBASIC 0.4 is the release that fulfills my original goal of being able to run a &ldquo;guess the number&rdquo; game. The &ldquo;only&rdquo; change needed after 0.3 to make this possible was the addition of random numbers, but these in turn required adding function calls to back <code>RND()</code> and also supporting floating point numbers because that&rsquo;s what this function is supposed to return.</p><p>All in all, there are four major features in this new release:</p><ul><li>Built-in functions, including random number generation and string manipulation.</li><li><code>FOR</code> loops.</li><li>Rudimentary double-precision floating point numbers.</li><li>Three built-in demo programs to get you started with something tangible out of the box.</li></ul><p>You can dive right in by <strong>visiting <a href=https://repl.endbasic.dev/>https://repl.endbasic.dev/</a> for an interactive session</strong> (doesn&rsquo;t really work on Android, sorry), <strong>following the project at <a href=https://www.endbasic.dev/>https://www.endbasic.dev/</a></strong>, or watching the demo below.</p><p><strong>WARNING: 🚨 But don&rsquo;t leave yet! Keep reading for the backstory behind the new features.</strong></p><figure><img src=/images/2020-12-25-endbasic-0.4-demo.gif max-height=472><figcaption>EndBASIC 0.4 interactive demo showcasing the first page of the built-in tour and a sample run of the built-in "guess the number" game.</figcaption></figure><h1 id=for-loops>FOR loops</h1><p><code>FOR</code> loops are an interesting creature in any programming language: they are not strictly necessary for turing-complete computations because they can be trivially rewritten as <code>WHILE</code> loops. However, <code>FOR</code> loops are very convenient, and in the eyes of beginners, I bet that BASIC&rsquo;s <code>FOR</code> loops are much easier to understand than <code>WHILE</code> loops. No matter what, there is no question that I had to add them to the language.</p><p>Adding <code>FOR</code> loops to the language was easy. I might have spent an hour total on this work, which involved modifying the parser to recognize the new syntax, extending the AST to represent the new loops, and updating the execution engine to process the new construct in the AST. But along the way, several design questions popped up and they surfaced interesting trade-offs.</p><p>Let&rsquo;s take a look at how a trivial <code>FOR</code> loop looks like and what its mechanic conversion to a <code>WHILE</code> loop is:</p><div class=row><div class=col-lg-6><div class=highlight><pre class=chroma><code class=language-basic data-lang=basic><span></span>
<span class=kr>FOR</span><span class=w> </span><span class=vg>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=il>1</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=il>10</span>
<span class=w>    </span><span class=kr>PRINT</span><span class=w> </span><span class=vg>i</span>
<span class=kr>NEXT</span>
<span></span>
</code></pre></div></div><div class=col-lg-6><div class=highlight><pre class=chroma><code class=language-basic data-lang=basic><span class=vg>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=il>1</span>
<span class=kr>WHILE</span><span class=w> </span><span class=vg>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=il>10</span>
<span class=w>    </span><span class=kr>PRINT</span><span class=w> </span><span class=vg>i</span>
<span class=w>    </span><span class=vg>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=vg>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=il>1</span>
<span class=kr>END</span><span class=w> </span><span class=kr>WHILE</span>
</code></pre></div></div></div><p>In the code snippets above, we have a <code>FOR</code> loop that repeats a <code>PRINT</code> statement 10 times, and in each iteration, increments <code>i</code> by 1 so <code>i</code> ends up having all integer values in the range <code>[1..10]</code>. (Note that the end value is inclusive.) The transformation to a <code>WHILE</code> loop is trivial: we set the iterator to the initial value, test if the value is less than the end value, and increment it at the end of each iteration.</p><p>So far so good. But BASIC also allows a <code>STEP</code> clause in the <code>FOR</code> loop, which indicates the amount with which to increment the iterator. The default is 1 but we can set it to any other number we like:</p><div class=row><div class=col-lg-6><div class=highlight><pre class=chroma><code class=language-basic data-lang=basic><span></span>
<span class=kr>FOR</span><span class=w> </span><span class=vg>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=il>1</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=il>10</span><span class=w> </span><span class=k>STEP</span><span class=w> </span><span class=il>2</span>
<span class=w>    </span><span class=kr>PRINT</span><span class=w> </span><span class=vg>i</span>
<span class=kr>NEXT</span>
<span></span>
</code></pre></div></div><div class=col-lg-6><div class=highlight><pre class=chroma><code class=language-basic data-lang=basic><span class=vg>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=il>1</span>
<span class=kr>WHILE</span><span class=w> </span><span class=vg>i</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=il>10</span>
<span class=w>    </span><span class=kr>PRINT</span><span class=w> </span><span class=vg>i</span>
<span class=w>    </span><span class=vg>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=vg>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=il>2</span>
<span class=kr>END</span><span class=w> </span><span class=kr>WHILE</span>
</code></pre></div></div></div><p>In this example we set the step to 2, and because of that, the loop&rsquo;s iterator will cover the values <code>[1,3,5,7,9]</code> before terminating.</p><p>Based on these examples, we now know that to represent a <code>FOR</code> loop in the AST, we have to capture the name of the iterator, the start value, the end value, and the step value. But how do we store these three numerical values in the AST? &ldquo;Oh, that&rsquo;s obvious&rdquo;, I thought. &ldquo;They are integer expressions so we record them as such!&rdquo; Not so fast, my friend. Accepting these values as expressions causes some trouble.</p><p>You see: I only showed you <code>FOR</code> loops counting upwards. But can these loops count downwards too? They can, of course, and they look like this:</p><div class=row><div class=col-lg-6><div class=highlight><pre class=chroma><code class=language-basic data-lang=basic><span></span>
<span class=kr>FOR</span><span class=w> </span><span class=vg>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=il>10</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=il>1</span><span class=w> </span><span class=k>STEP</span><span class=w> </span><span class=il>-2</span>
<span class=w>    </span><span class=kr>PRINT</span><span class=w> </span><span class=vg>i</span>
<span class=kr>NEXT</span>
<span></span>
</code></pre></div></div><div class=col-lg-6><div class=highlight><pre class=chroma><code class=language-basic data-lang=basic><span class=vg>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=il>10</span>
<span class=kr>WHILE</span><span class=w> </span><span class=vg>i</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=il>1</span>
<span class=w>    </span><span class=kr>PRINT</span><span class=w> </span><span class=vg>i</span>
<span class=w>    </span><span class=vg>i</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=vg>i</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=il>2</span>
<span class=kr>END</span><span class=w> </span><span class=kr>WHILE</span>
</code></pre></div></div></div><p>Note the negative step value, which is set to -2. This loop will count from 10 to 1 so the values the iterator will see are <code>[10,8,6,4,2]</code>.</p><p>There are two interesting facts here. The first is that the step&rsquo;s sign tells us whether the loop counts upwards or downwards. The second is that the terminating condition for &ldquo;downwards&rdquo; loops is the opposite of the one we saw before: we need to loop while the iterator is <em>larger</em> than or equal to the end value, not <em>smaller</em> or equal.</p><p>Which leads us to trouble in the AST. If we track the start, end, and step values as <em>expressions</em>, as I originally attempted, we have no upfront idea about what condition to test for when we are executing the code. At each iteration, we have to evaluate the step expression to see if it is positive or negative, then build a conditional expression to test the iterator value, and then evaluate it. And because we do this at each iteration, we could have a loop that moves up <em>and</em> down if its body happened to touch the variables involved in the step expression.</p><p>Yikes. And also strange. This sounded too complicated and fragile. And indeed, my suspicion was correct. I checked the old documentation and found that the <code>STEP</code> clause in QuickBASIC 4.5 takes an integer <em>literal</em>, not an expression. Given this limitation, the interpreter can tell, at parse time, whether the loop will count upwards or downwards, which is very useful in representing the loop in the AST.</p><p>I made this same simplification and ended up with an AST representation that stores the terminating condition in it, not just the end value. This allows for faster execution at runtime as we only need to evaluate expressions and not think about which expressions those are.</p><p>I could have also gone all the way and <em>not</em> tracked <code>FOR</code> loops in the AST at all. As shown above, these can be trivially converted to <code>WHILE</code> loops so an alternate representation in the AST could have been just that. I felt that this approach lost fidelity because you can&rsquo;t tell anymore how the source code looked like by just inspecting the AST, so I preferred to go for an explicit <code>FOR</code> representation. But both would be acceptable options.</p><h1 id=rudimentary-floating-point-support>Rudimentary floating point support</h1><p>Floating point numbers aren&rsquo;t something I was planning on adding to the language, but as I said in the opening, they were a requirement to implement <code>RND()</code>. Sure, I could have changed the signature of this function to return integers instead, but I suppose floating point numbers will come in handy in the future too. (I recall <code>SIN()</code> and <code>COS()</code> being very useful for graphics and stuff back in the day&mldr; so&mldr; we&rsquo;ll see.)</p><p>Adding the new double type (<code>#</code> annotation) to the language was trivial. It took me maybe 5 minutes of actual typing to get them to work after <a href=https://twitter.com/jmmv/status/1340677472946294786>getting rid of a spurious <code>#[derive(Eq)]</code></a> that I had sprinkled throughout the AST types. However, extending the unit and integration tests to cope with the addition of the new type was&mldr; painful, and lengthened this task from those 5 minutes to over an hour. But don&rsquo;t get me wrong: this was <em>not</em> a waste of time.</p><p>One of the things that writing these tests quickly revealed is that integers and doubles aren&rsquo;t magically compatible. Duh. If I wanted to support mixing them in expressions, I&rsquo;d have to add type promotion rules&mldr; and I really don&rsquo;t like automatic type promotion. Yes, yes, I know BASIC does it so I should implement it too, but let&rsquo;s see how far I can get with the clutch I added: two functions (<code>DTOI</code> and <code>ITOD</code>) to explicitly cast between these two types.</p><p>Another interesting detail that Rust and the tests revealed is what happens on overflow. The code to handle integer expressions has to worry about overflow conditions and uses Rust&rsquo;s primitives to do so. Copy/pasting that code to handle doubles failed to compile because those overflow-safe primitives don&rsquo;t exist for doubles. And the reason is simple: doubles don&rsquo;t overflow and divisions by zero don&rsquo;t fail. Obvious too, you can tell me, but my experience with floating point numbers is almost zero. So how do they behave? The tests I copy/pasted from the integer code provided the answers: magic &ldquo;numbers&rdquo;. Overflows turn into infinities and divisions by zero turn into NaNs.</p><p>Which is fine for now, but highlights that what I have implemented to support doubles in EndBASIC is extremely rudimentary. Yes, you can perform computations on these numbers but that&rsquo;s about it: forget about checking for corner cases as the right constants are not exposed to the language. As I&rsquo;m not an expert, I&rsquo;m certain to get this wrong, but if you are interested in lending a hand please let me know!</p><h1 id=function-calls>Function calls</h1><p>Supporting function calls is something I dreaded adding for a while because this meant touching the expression parser to support them. But it had to be done.</p><p>The expression parser in EndBASIC is an implementation of the <a href=https://en.wikipedia.org/wiki/Shunting-yard_algorithm>Shunting-yard algorithm by Edsger Dijkstra</a>. You can find plenty of pseudo-code variants of this algorithm online, but most deal with printing stuff out to the screen instead of building an AST, and most also fail to cover complex cases. Function calls, and especially function calls with variadic arguments, are one of those complex cases that aren&rsquo;t fully detailed.</p><p>It took me a little while to figure out how to add these to the parser, and along the way I uncovered a couple of existing embarrassing bugs. But with this done, it was then a matter of representing functions in the code. Note that these functions are builtin for now: they are written in Rust and cannot be defined from EndBASIC code. Yet.</p><p>The interesting thing in this area is that, before this work, EndBASIC already had a concept of &ldquo;builtin commands&rdquo;, which are a generic way to express callable statements like <code>PRINT</code> or <code>INPUT</code> without tying them to the parser. This is by design: I want the core of the interpreter to be free from side-effects so that it can be safely embedded in other binaries, and the statements to write to the console definitely have side-effects.</p><p>Adding functions meant replicating the existing logic for built-in commands. And because copy/pastes are ugly, this quickly turned into a yak-shaving problem: functions return a value while commands do not, and functions can be used in different contexts than commands. They are almost the same, but not really. Yet&mldr; could we handle them in the same way?</p><p>I spent a long time prototyping different ways to unify functions and commands under a single <code>Callable</code> trait&mldr; but in the end abandoned them all. No matter what I tried, the benefits in the design were eclipsed by the hacks that had to be put in place to accept one class of callable or another under different contexts (statements vs. expressions). I still feel &ldquo;dirty&rdquo; by this duality so I might come back to clean it up later.</p><p>But now that functions are supported in the core engine, adding new functions is trivial. And to prove that they work, I added common string manipulation functions such as <code>LEN()</code> and <code>MID()</code> on top of the single function I originally wanted to add: <code>RND()</code>. To witness:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Ready
</span></span><span class=line><span class=cl>PRINT RND()
</span></span><span class=line><span class=cl>0.13684954101612082
</span></span><span class=line><span class=cl>Ready
</span></span><span class=line><span class=cl>PRINT DTOI(RND() * 1000.0)
</span></span><span class=line><span class=cl>385
</span></span><span class=line><span class=cl>Ready
</span></span><span class=line><span class=cl>PRINT LEN(&#34;Hello&#34;)
</span></span><span class=line><span class=cl>5
</span></span></code></pre></div><h1 id=demo-programs>Demo programs</h1><p>The latest goodie in this release is something I didn&rsquo;t originally think of for 0.4. In fact, my original plans were to add arrays instead, but that&rsquo;s a can of worms that I&rsquo;ll save for later.</p><p>As stated in the opening of this post, my goal at the beginning of EndBASIC was to support writing a &ldquo;guess the number&rdquo; game. And write it I did. But&mldr; how could I give it to you to showcase the features of the language? Sure, I could add the source program to the Git repository&mldr; but anyone installing EndBASIC via <code>cargo install</code> would not have access to the file. And anyone <a href=https://repl.endbasic.dev/>accessing EndBASIC through the web interface</a> (the most common case, I presume) would have no way of putting that code into the interpreter.</p><p>The easiest solution that came to mind was to bundle the code in the interpreter itself via Rust&rsquo;s <code>include_bytes!</code> macro. It&rsquo;s not the greatest solution because I&rsquo;m bloating the binary and the WASM pack with unnecessary code, but it doesn&rsquo;t matter much really. We are talking about a few KBs only and this is for fun right now, so who cares. But it&rsquo;s indeed ugly that these files are currently in the language core and not in the CLI crate.</p><p>With that in mind, I extended the <code>DIR</code> and <code>LOAD</code> commands with support for magic files that correspond to demos. These file names are all prefixed with <code>DEMO:</code> (note the colon character), which is a name that cannot be represented in most regular file systems. And with that done, I added three demos to the interpreter: the game I&rsquo;ve been talking about, a useless &ldquo;Hello World&rdquo; type of program, and an interactive tour:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Ready
</span></span><span class=line><span class=cl>DIR
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    Modified              Size    Name
</span></span><span class=line><span class=cl>    2020-12-23 03:12      2107    DEMO:GUESS.BAS
</span></span><span class=line><span class=cl>    2020-12-22 14:20       651    DEMO:HELLO.BAS
</span></span><span class=line><span class=cl>    2020-12-24 01:52      6590    DEMO:TOUR.BAS
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    3 file(s), 9348 bytes
</span></span></code></pre></div><h1 id=whats-next>What&rsquo;s next?</h1><p>A lot of things <em>could</em> come next. Arrays is one of them. Better screen handling is another. User-defined functions and procedures are yet another. A <code>PLAY</code> statement for music would be the pipe dream one.</p><p>But I think it&rsquo;s time to pause for a bit and polish what I have so far. EndBASIC is now about 12k LoC. Roughly half of that is test code, so that leaves the interpreter at 6k lines. After removing comments and docstrings, we are left with only about 5k lines for the interpreter. That&rsquo;s&mldr; much smaller than I expected to see, honestly. But the code has grown quite a few warts that make it hard to iterate on.</p><p>One of these warts are the tests, yes. I blogged about <a href=/2020/12/builder-pattern-for-tests.html>using the builder pattern for tests</a> a few weeks ago, and the results of that experiment with the console manipulation tests have been pretty good. I think it&rsquo;s time to go back to the other modules and adopt these ideas too to remove the annoying and abundant <code>do_ok_test</code> helpers.</p><p>The other wart is something that has been bothering me for a while too: I truly want to keep the language core separate from any constructs that might have side-effects. I want to ensure that the language parser and execution engine are completely decoupled from the console and any external resources. For the most part, they are already, but the <code>endbasic-core</code> crate has too many dependencies that don&rsquo;t make this fact clear. For one, the latest release has added a new dependency to generate random numbers, and that&rsquo;s something that the language itself doesn&rsquo;t need. So, I want to break apart the two components and have a tiny language parser with a separate &ldquo;standard library&rdquo; crate.</p><p>So, stay tuned. In the meantime, and to reiterate the opening of the post:</p><blockquote><p>Dive right in by <strong>visiting <a href=https://repl.endbasic.dev/>https://repl.endbasic.dev/</a> for an interactive session</strong> or <strong>follow the project at <a href=https://www.endbasic.dev/>https://www.endbasic.dev/</a></strong>.</p></blockquote><p>And with that, Merry Xmas if that&rsquo;s your thing. Consider this your Santa 🎅 gift!</p></article></div></div><div class="container post-links"><div class=row><div class="col mr-auto text-left"><span><a href=https://jmmv.dev/2020/12/unit-testing-a-console-app.html>&#171; Previous</a></span></div><div class="col text-center"><span><a href=/archive.html>All posts</a></span></div><div class="col ml-auto text-right"><span><a href=https://jmmv.dev/2020/12/google-no-clean-builds.html>Next &#187;</a></span></div></div></div><div class="container post-votes"><div class=row><div class="col-lg-4 my-2"><div class=row><div class=col><a onclick=voteThumbsUp() class="btn btn-block btn-outline-success" id=thumbs-up-btn>👍
(<span id=thumbs-up-count>0</span>)</a></div><div class=col><a onclick=voteThumbsDown() class="btn btn-block btn-outline-danger" id=thumbs-down-btn>👎
(<span id=thumbs-down-count>0</span>)</a></div></div></div><div class="col-lg-8 my-2 d-none d-sm-block"><div class=row><div class="col-md-4 text-center"><a href="https://www.reddit.com/submit?title=EndBASIC+0.4+release+announcement&amp;url=https%3A%2F%2Fjmmv.dev%2F2020%2F12%2Fendbasic-0.4.html" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/reddit.png alt=Reddit width=24 height=24></a></div><div class="col-md-4 text-center"><a href="https://news.ycombinator.com/submitlink?t=EndBASIC+0.4+release+announcement&amp;u=https%3A%2F%2Fjmmv.dev%2F2020%2F12%2Fendbasic-0.4.html" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/ycombinator.png alt="Hacker News" width=24 height=24></a></div><div class="col-md-4 text-center"><a href="https://twitter.com/intent/tweet?status=EndBASIC+0.4+release+announcement+%E2%80%94+https%3A%2F%2Fjmmv.dev%2F2020%2F12%2Fendbasic-0.4.html+%E2%80%94+cc+%40jmmv" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/Twitter_Social_Icon_Circle_Color.png alt=Twitter width=24 height=24></a></div></div></div></div><div class="row my-4" id=postCommentRow><div class=col><div class=media><img class=mr-3 src=/octicons/pencil.svg width=32px height=32px><div class="media-body container"><form method=post id=newPost><div class=row><div class="col my-1"><textarea class=form-control rows=1 id=postCommentContent onclick=showPostComment() placeholder="Leave a comment"></textarea></div></div><div class="row newPostControls" style=display:none><div class="col my-1 form-group"><label for=postCommentAuthor>Your name (optional):</label>
<input type=text class=form-control id=postCommentAuthor></div></div><div class="row newPostControls" style=display:none><div class="col my-1 form-group"><label for=postCommentEmail>Your email (optional):</label>
<input type=text class=form-control type=email id=postCommentEmail>
<small class="form-text text-muted">Invisible to all readers; if provided, you will receive notifications when replied to (not implemented yet)</small></div></div><div class=row id=postCommentError style=display:none><div class="col mt-1 alert-danger"><p></p></div></div><div class="row newPostControls" style=display:none><button class="col-md-3 my-1 btn btn-primary" type=submit id=submitCommentButton>Post</button>
<small class="col-md-9 my-1 text-muted">Comments are subject to moderation. This feature is experimental and is powered by <a href=/software/endtracker.html>EndTRACKER</a>. If you experience any issues, please <a href=/about.html#contact>contact me off-band</a>.</small></div></form></div></div></div></div><script>function hidePostComment(){var t,e=document.getElementById("postCommentContent");e.rows=1,e.value="",t=document.getElementsByClassName("newPostControls"),Array.prototype.forEach.call(t,function(e){e.style.display="none"})}function showPostComment(){var e,t=document.getElementById("postCommentContent");t.rows=5,e=document.getElementsByClassName("newPostControls"),Array.prototype.forEach.call(e,function(e){e.style.display=""})}const form=document.querySelector("#newPost");form.onsubmit=function(e){e.preventDefault();let t=document.getElementById("postCommentAuthor").value,n=document.getElementById("postCommentEmail").value,s=document.getElementById("postCommentContent").value;postComment(t,n,s,hidePostComment)}</script></div><div class="container post-subscribe d-block d-md-none"><div class="row text-center"><p>A blog on operating systems, programming languages, testing, build systems, my own software
projects and even personal productivity. Specifics include FreeBSD, Linux, Rust, Bazel and
EndBASIC.</p></div><div class=row><div class="col-sm-3 py-2"><div class=row><div class="col px-2 text-center"><a rel=me href=https://mastodon.online/@jmmv><img src=/images/badges/mastodon-logo.svg width=32px height=32px alt="Follow @jmmv on Mastodon"></a></div><div class="col px-2 text-center"><a href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fjmmv.dev%2F&amp;screen_name=jmmv"><img src=/images/badges/Twitter_logo_blue.svg width=32px height=32px alt="Follow @jmmv on Twitter"></a></div><div class="col px-2 text-center"><a href=/feed.xml><img src=/images/badges/feed-icon-28x28.png alt="RSS feed"></a></div></div></div><div class="col-sm-9 py-2 text-center"><form action=https://endtracker.azurewebsites.net/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/subscribers/add method=post><div class=form-group><div class=row><input type=text name=email placeholder="Enter your email" class="form-control input-sm col-8 text-center">
<button type=submit class="btn btn-primary col-4">Subscribe</button></div></div><small><span class=subscriber-count>0</span> subscribers</small></form></div></div></div></div><div class="col-md-3 sidebar d-none d-md-block"><div class=row><div class="col text-center p-2"><p><a href=/about.html class=clear-link><img src=/images/avatars/20181124-snow.jpg class="rounded-circle shadow my-2" style=width:100px><br><b>Julio Merino</b><br>A blog on operating systems, programming languages, testing, build systems, my own software
projects and even personal productivity. Specifics include FreeBSD, Linux, Rust, Bazel and
EndBASIC.</a></p><div class=row><div class="col-sm-4 text-center"><p><a rel=me href=https://mastodon.online/@jmmv><img src=/images/badges/mastodon-logo.svg width=32px height=32px alt="Follow @jmmv on Mastodon"></a></p></div><div class="col-sm-4 text-center"><p><a href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fjmmv.dev%2F&amp;screen_name=jmmv"><img src=/images/badges/Twitter_logo_blue.svg width=32px height=32px alt="Follow @jmmv on Twitter"></a></p></div><div class="col-sm-4 text-center"><p><a href=/feed.xml><img src=/images/badges/feed-icon-28x28.png alt="RSS feed"></a></p></div></div><form action=https://endtracker.azurewebsites.net/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/subscribers/add method=post><div class=form-group><input type=text name=email placeholder="Enter your email" class="form-control input-sm text-center">
<button type=submit class="btn btn-primary btn-block">Subscribe</button></div><small><span class=subscriber-count>0</span> subscribers</small></form></div></div><div class=row><div class=col><h2>Featured software</h2><ul><li class=overflow-ellipsis><a href=https://www.endbasic.dev/ target=_blank>EndBASIC: Online BASIC+DOS env</a></li><li class=overflow-ellipsis><a href=https://endtracker.azurewebsites.net/ target=_blank>EndTRACKER: Services for static sites</a></li></ul></div></div><div class=row><div class=col><h2>Featured posts</h2><ul><li class=overflow-ellipsis><a href=/2023/06/fast-machines-slow-machines.html>Fast machines, slow machines</a></li><li class=overflow-ellipsis><a href=/2022/12/endbasic-0.10.html>EndBASIC 0.10: Core language, evolved</a></li><li class=overflow-ellipsis><a href=/2022/10/bye-microsoft-hi-snowflake.html>Farewell, Microsoft; hello, Snowflake!</a></li><li class=overflow-ellipsis><a href=/2022/05/rust-is-hard-but-does-it-matter.html>Rust is hard, yes, but does it matter?</a></li><li class=overflow-ellipsis><a href=/2022/04/rust-traits-and-dependency-injection.html>Rust traits and dependency injection</a></li><li class=overflow-ellipsis><a href=/2022/03/a-year-on-windows-intro.html>A year on Windows: Introduction</a></li><li class=overflow-ellipsis><a href=/2021/04/always-be-quitting.html>Always be quitting</a></li><li class=overflow-ellipsis><a href=/2021/02/google-monorepos-and-caching.html>How does Google keep build times low?</a></li><li class=overflow-ellipsis><a href=/2020/12/google-no-clean-builds.html>How does Google avoid clean builds?</a></li><li class=overflow-ellipsis><a href=/2020/12/unit-testing-a-console-app.html>Unit-testing a console app (a text editor)</a></li><li class=overflow-ellipsis><a href=/essays.html#featured>More...</a></li></ul></div></div></div></div></div><footer class=container><div class=row><div class="col-4 order-2 texr-right"><p class=float-right><a href=#>Back to top</a></p></div><div class="col-8 order-1 mr-auto"><p>Copyright 2004&ndash;2023 Julio Merino</p></div></div></footer><script type=module>
  import { addAnchorsToHeaders, addElementClasses, BatchClient } from "\/js\/main.d30f168b11d80082408f4a983af9a626c6e57d58f7846b2174bac40d43be33e3.js";

  var batchClient = new BatchClient(SITE_ID);
  batchClient.doAll({
    put_request: true, get_comments: true, get_subscriber_count: true, get_votes: true });

  window.voteThumbsUp = function() { batchClient.voteThumbsUp(); }
  window.voteThumbsDown = function() { batchClient.voteThumbsDown(); }

  window.postComment = function(...args) {
    batchClient.postComment(...args);
  };

  addAnchorsToHeaders();
  addElementClasses();
</script><noscript><img src=https://hugo-dynamic.jmmv.dev/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/pages/aHR0cHM6Ly9qbW12LmRldi8yMDIwLzEyL2VuZGJhc2ljLTAuNC5odG1s/stamp.gif style=display:none></noscript></body></html>