<!doctype html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#">
  <head>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-63557333-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-63557333-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport"
        content="width=device-width, initial-scale=1, shrink-to-fit=no">
  

  <meta property="og:site_name" content="Julio Merino (jmmv.dev)">

  <title>A tour of directories as system-wide databases - Julio Merino (jmmv.dev)</title>
  <meta property="og:title" content="A tour of directories as system-wide databases - Julio Merino (jmmv.dev)">

  

  <meta name="description" content="In the previous post, we saw how .d directories permit programmatic edits to system-wide configuration with ease. But this same concept can be applied to other kinds of tracking. Let&amp;rsquo;s dive into a few examples ranging from desktop menu entries to the package manager&amp;rsquo;s database itself.">
  <meta property="og:description" content="In the previous post, we saw how .d directories permit programmatic edits to system-wide configuration with ease. But this same concept can be applied to other kinds of tracking. Let&amp;rsquo;s dive into a few examples ranging from desktop menu entries to the package manager&amp;rsquo;s database itself.">
  <meta name="author" content="Julio Merino">
  <meta name="generator" content="Hugo 0.68.3" />

  <meta property="og:url" content="https://jmmv.dev/2020/08/database-directories.html">

  <meta property="og:type" content="blog">

  <link rel="canonical" href="https://jmmv.dev/2020/08/database-directories.html">
  <link rel="alternate" type="application/rss+xml"
        title="Julio Merino (jmmv.dev)" href="/feed.xml" />

  <link rel="stylesheet" href="/sass/main.min.10c9d5a1219415137d407d2593046a9c6a42115458f02204a9cf7811b112950c.css">
  <link rel="stylesheet" href="/css/chroma.css">

  <meta property="og:image" content="/images/favicons/favicon-1200x1200.png" />
  <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.png" sizes="96x96">

  
  <!--[if lt IE 9]>
    <script src="/js/html5shiv-3.7.2.min.js"></script>
    <script src="/js/respond-1.4.2.min.js"></script>
  <![endif]-->
</head>


  <body>
    <header class="site-header">

<nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary">
  <a class="navbar-brand" href="/">
    <img src="/images/favicons/favicon-30x30.png" width="30" height="30" class="d-inline-block align-top" alt="">
    &nbsp;Julio Merino
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse"
          data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false"
          aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      
        
          <li class="nav-item">
            <a class="nav-link" href="/about.html" >About</a>
          </li>
        
      
        
          <li class="nav-item">
            <a class="nav-link" href="/essays.html" >Essays</a>
          </li>
        
      
        
          <li class="nav-item">
            <a class="nav-link" href="/resume.html" >Resume</a>
          </li>
        
      
        
          <li class="nav-item">
            <a class="nav-link" href="/software.html" >Software</a>
          </li>
        
      
    </ul>

    <ul class="navbar-nav mr-4">
      
        
          <li class="nav-item">
            <a class="nav-link" href="/archive.html" >Archive</a>
          </li>
        
      
        
          <li class="nav-item">
            <a class="nav-link" href="/series.html" >Series</a>
          </li>
        
      
        
          <li class="nav-item">
            <a class="nav-link" href="/tags.html" >Tags</a>
          </li>
        
      
    </ul>

    <form class="form-inline" method="get" role="search"
          action="https://www.google.com/search">
      <div class="input-group">
        <input type="search" name="query" class="form-control"
                placeholder="Search" aria-label="Search">
        <div class="input-group-append">
          <button type="submit" value="Search" class="btn btn-light">
            <img src="/octicons/search.svg">
          </button>
        </div>
      </div>
      <input type="hidden" name="sitesearch" value="https://jmmv.dev/">
    </form>
  </div>
</nav>

</header>


    <div class="page-header">
      <div class="container">
        <h1>A tour of directories as system-wide databases</h1>

        <p>August 21, 2020 &middot;
        About 12 minutes
        &middot;
        Tags:
        <a class="text-reset" href="/tags/debian">debian</a>, <a class="text-reset" href="/tags/menu2wm">menu2wm</a>, <a class="text-reset" href="/tags/netbsd">netbsd</a>, <a class="text-reset" href="/tags/unix">unix</a></p>

        
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-9">
          <div class="row">
            <div class="col">
              
              <article><p>In &ldquo;<a href="/2020/08/config-files-vs-directories.html">Configuration files and .d directories</a>&quot;, we learned how <code>.d</code> directories permit programmatic edits to system-wide configuration with ease. But this same concept&mdash;using directories with many individual files within instead of a single gigantic file&mdash;can be applied to other kinds of system-wide tracking.</p>
<p>I know it&rsquo;s a stretch, but if it helps you in these modern times, you can think of a directory as a NoSQL database or a key/value store where each file represents a row/key and its contents represent the value of that entity. Adding and removing elements from the &ldquo;database&rdquo; is a matter of creating and deleting files, respectively, and retrieving elements can be done either by key lookup or by sequential scanning of the directory&rsquo;s contents (though be aware that file systems don&rsquo;t necessarily store entries in lexicographical order!).</p>
<p>We can take advantage of this core idea to represent system-wide databases while allowing them to be programmatically <em>and</em> concurrently mutated with ease. If we do this, just like we did for configuration files before, the packaging system can create and delete files on a package basis without having to do any file edits.</p>
<p>Easy, right? Yes, there is nothing more to it than this! But to keep you entertained, let me cover a bunch of different examples to see how this plays out in practice.</p>
<h1 id="application-menus-via-menu-in-debian">Application menus (via &ldquo;menu&rdquo; in Debian)</h1>
<p>Quick: how is Debian able to automatically register new programs in the application menus displayed by pretty much any window manager? See, for example, this screenshot using the default Fluxbox configuration:</p>
<figure>
  <img src="/images/2020-08-19-debian-menus-fluxbox.png" width="100%">
  <figcaption>Debian application menus in fluxbox.</figcaption>
</figure>
<p>Generating menu entries might seem like a no-brainer today, but automatically updating these was a major difficulty years ago&mdash;and still is for some environments like Fluxbox. And I bet that&rsquo;s why you might have never stopped to think about how this actually works, have you? ðŸ˜‰</p>
<p>To explain how this works, we have to travel back in time. Around the late 90s, we had a bunch of independent window managers and Gnome and KDE were still in their infancy. Each of these windowing systems had its own file format to represent application menus&mdash;yet Debian, somehow, was able to display up-to-date information about all available applications.</p>
<p>If you were designing Debian&rsquo;s packaging system back in the day, how would you have achieved this? Stop and think for a minute before continuing.</p>
<p>As in anything computer-related, the answer is by adding an abstraction layer. In Debian, we have a tool called <code>update-menus(1)</code> that consumes a bunch of high-level definitions about installed programs and spits out generated menus in the formats that all supported window managers consume. For example, the <code>bash</code> package installs these entries:</p>
<pre><code>debian:~&gt; cat /usr/share/menu/bash
?package(bash):needs=&quot;text&quot; section=&quot;Applications/Shells&quot; title=&quot;Bash&quot; command=&quot;/bin/bash --login&quot;
?package(bash):needs=&quot;text&quot; section=&quot;Applications/Shells&quot; title=&quot;Sh&quot; command=&quot;/bin/sh --login&quot;
debian:~&gt;
</code></pre><p>Based on a collection of files like this, all under the <code>/usr/share/menu/</code> database, the package manager runs a post-installation trigger that executes <code>update-menus(1)</code> for all of the installed window managers and updates their menus in a consistent manner. In Fluxbox&rsquo;s case, this action regenerates <code>/etc/X11/fluxbox/menudefs.hook</code> with fresh information.</p>
<h1 id="application-menus-via-freedesktops-spec">Application menus (via FreeDesktop&rsquo;s spec)</h1>
<p>Debian&rsquo;s <code>menu</code> package is all good and dandy, but it is system-specific and, to my surprise, it doesn&rsquo;t seem to be widely used any longer within Debian any more.</p>
<p>Note that the reason I&rsquo;m picking on Debian is, simply put, because I understand how it works. I&rsquo;m sure other major systems like Fedora have their own mechanism to achieve these same results&hellip; but I did not research how they work for this article. Which reminds me that, in the early 2000s, I came up with my own solution to this problem for NetBSD with <a href="http://menu2wm.sourceforge.net/">menu2wm</a>. Luckily, I concluded that this was a dead end due to what we are about to see, but I&rsquo;m not sure why I decided to shut down the code repositories!</p>
<p>Anyhow. Let&rsquo;s switch gears to modern menu generation as used in KDE:</p>
<figure>
  <img src="/images/2020-08-19-debian-menus-kde.png" width="100%">
  <figcaption>Debian application menus in KDE showing the Dolphin file manager under the System category.</figcaption>
</figure>
<p>The way this works is by using <code>/usr/share/applications/</code> as a database of menu entries. Each package that wants to register an entry in the system menus installs a <code>.desktop</code> file under this directory. These are very popular as my rather limited Debian installation shows:</p>
<pre><code>debian:/usr/share/applications&gt; ls -1 | wc -l
240
debian:/usr/share/applications&gt;
</code></pre><p>These <code>.desktop</code> files essentially indicate the name of an app, the command to run it, the location where it should appear within the menus, and any file types that the app can handle. These files follow Freedesktop&rsquo;s <a href="https://specifications.freedesktop.org/desktop-entry-spec/latest/">Desktop Entry Specification</a> and a trivial example might look like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="c1"># Subset of /usr/share/applications/org.kde.dolphin.desktop without internationalization.</span>
<span class="k">[Desktop Entry]</span>
<span class="na">Name</span><span class="o">=</span><span class="s">Dolphin</span>
<span class="na">GenericName</span><span class="o">=</span><span class="s">File Manager</span>
<span class="na">Exec</span><span class="o">=</span><span class="s">dolphin %u</span>
<span class="na">Terminal</span><span class="o">=</span><span class="s">false</span>
<span class="na">Type</span><span class="o">=</span><span class="s">Application</span>
<span class="na">Icon</span><span class="o">=</span><span class="s">system-file-manager</span>
<span class="na">Categories</span><span class="o">=</span><span class="s">Qt;KDE;System;FileTools;FileManager;</span>
<span class="na">MimeType</span><span class="o">=</span><span class="s">inode/directtory;</span>
</code></pre></div><p>This file registers an entry for the <strong>Dolphin</strong> file manager and I&rsquo;ll reference it in the rest of this section.</p>
<p>As we might expect, this file is owned by a unique package so it will be cleaned up if we ever uninstall it and thus removed from the system menus:</p>
<pre><code>debian:~&gt; dpkg-query -S /usr/share/applications/org.kde.dolphin.desktop
dolphin: /usr/share/applications/org.kde.dolphin.desktop
debian:~&gt;
</code></pre><p>Desktop environments monitor this directory for changes (via <a href="https://en.wikipedia.org/wiki/Inotify">inotify</a> or <a href="https://en.wikipedia.org/wiki/Kqueue">kqueue</a>, for example) and are able to reflect software additions and removals almost instantaneously.</p>
<p>But back then, Freedesktop was primarily about interoperability between KDE and Gnome, not arbitrary window managers as far as I understand it. So the question is: are <code>.desktop</code> files usable outside of these two major desktops? And the answer is: indeed they are! In fact, let&rsquo;s look at a few examples to see how they all look relatively similar:</p>
<figure>
  <img src="/images/2020-08-19-debian-menus-wmaker.png" width="100%">
  <figcaption>Debian application menus in WindowMaker showing the Dolphin file manager under the System category.</figcaption>
</figure>
<p>In WindowMaker&rsquo;s case, we can find that it recognizes <code>.desktop</code> entries by means of an auxiliary tool called <code>wmmenugen</code> that parses them and outputs entries for WindowMaker&rsquo;s root menu:</p>
<pre><code>debian:~&gt; grep -B 2 wmmenugen /usr/share/WindowMaker/menu.hook
    Applications,
    OPEN_PLMENU,
    &quot;|| wmmenugen -parser:xdg /usr/share/applications/&quot;
debian:~&gt;
</code></pre><p>Note also how the menu entry for our sample <strong>Dolphin</strong> program shows up exactly under the <strong>System</strong> submenu, just like KDE placed it. But is this categorization always the same? Not really:</p>
<figure>
  <img src="/images/2020-08-19-debian-menus-icewm.png" width="100%">
  <figcaption>Debian application menus in IceWM showing the Dolphin file manager under the System category but further nested under a File subcategory.</figcaption>
</figure>
<p>In IceWM&rsquo;s case, <strong>Dolphin</strong> also shows up under the <strong>System</strong> submenu, but it is further nested under a <strong>File</strong> subsubmenu. Why? I&rsquo;m not sure given that the <code>File</code> literal doesn&rsquo;t even appear in the <code>org.kde.dolphin.desktop</code> file manager, but we can continue looking around.</p>
<p>If we poke through the default configuration for IceWM, we see that this window manager also comes with a helper tool to generate menu entries: <code>icewm-menu-fdo</code>. We can trivially invoke it from the command line to see what it outputs:</p>
<pre><code>debian:~&gt; icewm-menu-fdo | grep -A 1 -B 1 Dolphin
menu &quot;File&quot; system-file-manager {
prog &quot;Dolphin&quot; system-file-manager dolphin
}
debian:~&gt;
</code></pre><p>But we still don&rsquo;t have our answer about that <strong>File</strong> subsubmenu. We could probably search for the <code>icewm-menu-fdo</code> code to see what it does, but instead let&rsquo;s look at one more window manager. Awesome shows the same <strong>Dolphin</strong> entry under a submenu titled <strong>System Tools</strong>, not <strong>System</strong> as we had seen until now:</p>
<figure>
  <img src="/images/2020-08-19-debian-menus-awesome.png" width="100%">
  <figcaption>Debian application menus in awesome showing the Dolphin file manager under the System Tools category.</figcaption>
</figure>
<p>The plot thickens. I suppose the difference in menu names is because the tools generating the menus have a builtin mapping to match the <code>Categories</code> specified in the <code>.desktop</code> file to the specific layout they want to expose.</p>
<p>Awesome makes this easy to check because it seems to implement all <code>.desktop</code> file parsing in its Lua configuration, so we can comb through the logic without having to hunt for the source code. In particular, we can look at the <code>/usr/share/awesome/lib/menubar/menu_gen.lua</code> and <code>/usr/share/awesome/lib/freedesktop/menu.lua</code> files to chase how this works. And if we run a quick search:</p>
<pre><code>debian:/usr/share/awesome/lib&gt; grep -A 1 -r 'System Tools'
menubar/menu_gen.lua:    tools = { app_type = &quot;System&quot;, name = &quot;System Tools&quot;,
menubar/menu_gen.lua-              icon_name = &quot;applications-system&quot;, use = true },
debian:/usr/share/awesome/lib&gt;
</code></pre><p>We see that, indeed, the menu generation code has a mapping in it that matches apps with the <code>System</code> category (which was a literal in the <code>.desktop</code> file) to a menu titled <strong>System Tools</strong>.</p>
<p>Enough about menus and GUIs. Let&rsquo;s dive into lower-level system constructs.</p>
<h1 id="compile-time-lib-details-via-pkgconfig">Compile-time lib details (via pkgconfig)</h1>
<p>In the same vein as application discovery, we have the problem of library discovery. When you are building a piece of software, how can that software detect and determine how to link against pre-installed system-supplied libraries?</p>
<p>In the past, <code>Makefile</code>s would hardcode various <code>-I</code>, <code>-L</code>, and <code>-l</code> flags to cope with common system settings&hellip; but this didn&rsquo;t scale across Unix flavors. <code>autoconf</code> came along with macros to auto-discover where libraries live but that was still insufficient because, to link against a library, determining the value of those flags can be difficult. Just think that the basename of an installed library may differ across systems, because why not, or it might require different threading flags.</p>
<p>So: what if we tried to have a central database that tracks how to link against each system-provided library? Then our <code>autoconf</code> scripts would simply query this database, get the flags from it, and go their merry way.</p>
<p>And that&rsquo;s precisely what <code>pkgconfig</code> files do. These little <code>.pc</code> files, stored under <code>/usr/share/pkgconfig/</code> and other confusing locations like <code>/usr/lib/x86_64-linux-gnu/pkgconfig</code>, do exactly the same as <code>.desktop</code> files but for libraries. If you want to link against a specific library, all you need to know is what name was used for its <code>pkgconfig</code> file and then look for that key.</p>
<p>For example, if we are interested in linking against <code>glib2</code>, we can do something like this to get the needed flags to compile <em>and</em> link against <code>glib2</code>:</p>
<pre><code>debian:~&gt; pkg-config --cflags glib-2.0
-I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include
debian:~&gt; pkg-config --libs glib-2.0
-lglib-2.0
debian:~&gt;
</code></pre><p>And once we have a database of installed libraries and tools, why not abuse it to supply arbitrary compile-time information to other packages? We can look at the <code>udev.pc</code> file, which contains zero traces of compiler or linker flags:</p>
<pre><code>Name: udev
Description: udev
Version: 246

udev_dir=/lib/udev
udevdir=${udev_dir}
</code></pre><p>In this case, <code>autoconf</code> scripts might still want to know where <code>udev</code> stores system-wide information. And we can indeed extract that detail from this file:</p>
<pre><code>debian:~&gt; pkg-config --variable=udevdir udev
/lib/udev
debian:~&gt;
</code></pre><p>The elephant in the room is &ldquo;<em>why <code>pkgconfig</code></em>&quot;. After all, your system almost-certainly has its own package management tool. dpkg in Debian and rpm in Fedora (RedHat back then, actually) could have also been used to query details about installed system components. I&rsquo;m guessing it was easier to introduce a separate system years ago that worked across systems than trying to thread this information through all possible package managers in all Linux distributions in a way that was easy to query.</p>
<h1 id="package-metadata">Package metadata</h1>
<p>Speaking about package managers, these also tend to be a notable adopter of the &ldquo;directories as databases&rdquo; concept. To find a prime example, we can look at pkgsrc&rsquo;s database of installed packages. In my macOS system this lives under <code>/opt/pkg/libdata/pkgdb/</code>. What&rsquo;s inside?</p>
<pre><code>macos:/opt/pkg/libdata/pkgdb&gt; ls -dF *lib*
gettext-lib-0.20.2/    libffi-3.3nb2/         libtool-base-2.4.6nb2/
glib2-2.64.2nb1/       libogg-1.3.4nb1/       libuv-1.38.0/
libarchive-3.4.3/      libsamplerate-0.1.9/   libvorbis-1.3.6nb1/
libcares-1.16.1/       libsass-3.6.4/         libxml2-2.9.10nb2/
libevent-2.1.11nb1/    libsndfile-1.0.28nb3/
macos:/opt/pkg/libdata/pkgdb&gt;
</code></pre><p>I restricted the listing above to just libraries to make it more manageable, but we can easily see that we have one directory per installed package, and that the directory name encodes the package name and its version.</p>
<p>If we look into any one of these directories, we see a collection of plain text files that supply additional information for that package:</p>
<pre><code>macos:/opt/pkg/libdata/pkgdb&gt; ls -F libevent-2.1.11nb1
+BUILD_INFO      +CONTENTS        +REQUIRED_BY
+BUILD_VERSION   +DESC            +SIZE_ALL
+COMMENT         +INSTALLED_INFO  +SIZE_PKG
macos:/opt/pkg/libdata/pkgdb&gt;
</code></pre><p>Conceptually, and further extending our databases analogy, you can think of these files as being <strong>columns</strong> in our table of installed package. In this model, each row in the table corresponds to a package and matches a directory name. For each row, we then have separate columns for the package&rsquo;s build details (<code>+BUILD_INFO</code> and <code>+BUILD_VERSION</code>), the package&rsquo;s user-friendly description (<code>+COMMENT</code> and <code>+DESC</code>), etc.</p>
<p>The good thing about a database like this is that it&rsquo;s very <em>transparent</em>. There is nothing unfathomable about it: you can manually look at the files and understand what&rsquo;s going on, and if anything ever gets corrupted (which sometimes happens, unfortunately), you can perform manual surgery to try to recover the system.</p>
<p>Which brings us to my last example&hellip;</p>
<h1 id="going-on-a-tangent-svn-and-git">Going on a tangent: svn and git</h1>
<p>Version control systems (VCSs) are no exception here, though they are a bit off-topic because they aren&rsquo;t system-wide databases.</p>
<p>VCSs have also used plain files and directories as their backing store for ages, going back to CVS and possibly more. But let&rsquo;s focus on a couple more modern systems by starting with Subversion.</p>
<p>If memory serves well, the first versions of Subversion used an actual database, BDB, to store the repository. This was a huge departure from CVS&rsquo; plain files model and caused discomfort to system administrators: &ldquo;What if the database gets corrupted?&rdquo; &ldquo;Can we trust Subversion enough, still in beta, to do the right thing?&rdquo; With CVS, we could do manual file recovery and repository-level hand-edits (common to scrub sensitive data).</p>
<p>As a result of this, the Subversion developers wrote <a href="https://svn.apache.org/repos/asf/subversion/trunk/notes/fsfs">FSFS</a>, an alternate backend for their database that uses plain files in a directory. There we have it once again: a directory used as a database! We can easily create one and check its contents for entertainment, but I won&rsquo;t get into the details here:</p>
<pre><code>debian:~&gt; svnadmin create /tmp/repo &amp;&amp; cd /tmp/repo
debian:/tmp/repo&gt; ls -F
README.txt  conf/  db/  format  hooks/  locks/
debian:/tmp/repo&gt; ls -F db
current  fsfs.conf         revs/          txn-current-lock  write-lock
format   min-unpacked-rev  transactions/  txn-protorevs/
fs-type  revprops/         txn-current    uuid
debian:/tmp/repo&gt; ls -F db/revs
0/
debian:/tmp/repo&gt;
</code></pre><p>And to conclude, let&rsquo;s just say that Git follows this same idea:</p>
<pre><code>debian:~&gt; mkdir /tmp/repo &amp;&amp; cd /tmp/repo &amp;&amp; git init --bare
Initialized empty Git repository in /tmp/repo/
debian:/tmp/repo&gt; ls -F
HEAD  branches/  config  description  hooks/  info/  objects/  refs/
debian:/tmp/repo&gt;
</code></pre><h1 id="parting-words">Parting words</h1>
<p>As we have seen, when you start looking around, you will find examples of databases represented as a collection of files and directories <em>everywhere</em>. Whether that&rsquo;s a good idea or not&hellip; depends.</p>
<p>Using the file system as a database is a very powerful construct. From a package management perspective, where you want different packages updating a central repository of information (like those menu entries, pkgconfig files, or configuration), this model is probably the best choice. Also, for tools where you want full transparency on how the backing store works (version control systems), this is possibly also a good choice.</p>
<p>But the file system is limited and can be a very poor database! Locking is hard. Indexes require extra logic and might get out of sync. Transactions require additional brittle logic too. So if you need anything fancier and don&rsquo;t need to support multiple writers with different <em>implementations</em>, you should really use a proper database. <a href="https://www.sqlite.org/">SQLite</a> is small and can do wonders.</p>
</article>
            </div>
          </div>

          
          <div class="container post-links action-highlight">
            <div class="row">
              <div class="col-md-12 text-center">
                <p><b>Want more posts like this one? Take a moment to subscribe.</b></p>
              </div>
            </div>
            <div class="row">
              <div class="col-md-10">
                <form action="https://api.follow.it/subscription-form/WWZwVlFmTks4enBrYytaNHorbE4zSnpRTTBoTy9PcXNsZjdQbVpmWDJDemwyVW9rc2llZHNxQW9iUGdXNG83dm11SWZDM0NKSlQ5Qm1LTUpJZnF2b0Z5WDE3UUtvaEgzTWRWUFBQWEo4RUxyNUt5UW4xN3VZaW9paEd1UUFCL1J8YStTYmVCc3VoVGhCeENNSVZHSmEyUk1hejZWaEZkT1M1WTVkSXdBY1Q5cz0=/8" method="post">
                  <div class="form-group row px-md-4">
                    <input type="text" name="email"
                          placeholder="Enter your email"
                          class="form-control input-sm col-md-9 text-center"/>
                    <button type="submit" class="btn btn-primary col-md-3">Subscribe</button>
                  </div>
                </form>
              </div>
              <div class="col-md-1 text-center">
                <p>
                  <a href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fjmmv.dev%2F&amp;screen_name=jmmv">
                    <img src="/images/badges/Twitter_logo_blue_32.png" alt="Follow @jmmv on Twitter">
                  </a>
                </p>
              </div>
              <div class="col-md-1 text-center">
                <p><a href="/feed.xml"><img
                  src="/images/badges/feed-icon-28x28.png" alt="RSS feed"></a></p>
              </div>
            </div>
          </div>

          <div class="container post-links">
            <div class="row">
              <div class="col-md-12 text-center">
                <p><b>Enjoyed this article? Spread the word or join the ongoing discussion.</b></p>
              </div>
            </div>
            <div class="row">
              <div class="col-md-4 text-center"><a href="https://www.reddit.com/submit?title=A&#43;tour&#43;of&#43;directories&#43;as&#43;system-wide&#43;databases&amp;url=https%3A%2F%2Fjmmv.dev%2F2020%2F08%2Fdatabase-directories.html">
                  <img src="/images/badges/reddit.png"
                       alt="Reddit logo"
                       width="64" height="64">
                  <br>
                  <strong>Share on Reddit</strong>
                </a>
              </div>
              <div class="col-md-4 text-center"><a href="https://news.ycombinator.com/submitlink?t=A&#43;tour&#43;of&#43;directories&#43;as&#43;system-wide&#43;databases&amp;u=https%3A%2F%2Fjmmv.dev%2F2020%2F08%2Fdatabase-directories.html">
                  <img src="/images/badges/ycombinator.png"
                       alt="Hacker News logo"
                       width="64" height="64">
                  <br>
                  <strong>Share on Hacker News</strong>
                </a>
              </div>
              <div class="col-md-4 text-center"><a href="https://twitter.com/intent/tweet?status=A&#43;tour&#43;of&#43;directories&#43;as&#43;system-wide&#43;databases&#43;%E2%80%94&#43;https%3A%2F%2Fjmmv.dev%2F2020%2F08%2Fdatabase-directories.html&#43;%E2%80%94&#43;cc&#43;%40jmmv">
                  <img src="/images/badges/Twitter_Social_Icon_Circle_Color.png"
                       alt="Twitter logo"
                       width="64" height="64">
                  <br>
                  <strong>Share on Twitter</strong>
                </a>
              </div>
            </div>
          </div>

          <div class="container post-links">
            <div class="row">
              <div class="col-md mr-auto text-left">
                
                <span><a href="https://jmmv.dev/2020/08/config-files-vs-directories.html">&laquo; Previous post</a></span>
                
              </div>

              <div class="col-md text-center">
                <span><a href="/archive.html">All posts</a></span>
              </div>

              <div class="col-md ml-auto text-right">
                
                <span><a href="https://jmmv.dev/2020/08/rcd-libexec-etc.html">Next post &raquo;</a></span>
                
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-3 sidebar">
          <div class="row action-highlight">
  <div class="col">
    <h2>Follow me!</h2>

    <div class="row">
      <div class="col-sm-6 text-center">
        <p>
          <a href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fjmmv.dev%2F&amp;screen_name=jmmv">
            <img src="/images/badges/Twitter_logo_blue_32.png" alt="Follow @jmmv on Twitter">
          </a>
        </p>
      </div>
      <div class="col-sm-6 text-center">
        <p><a href="/feed.xml"><img
          src="/images/badges/feed-icon-28x28.png" alt="RSS feed"></a></p>
      </div>
    </div>

    <form action="https://api.follow.it/subscription-form/WWZwVlFmTks4enBrYytaNHorbE4zSnpRTTBoTy9PcXNsZjdQbVpmWDJDemwyVW9rc2llZHNxQW9iUGdXNG83dm11SWZDM0NKSlQ5Qm1LTUpJZnF2b0Z5WDE3UUtvaEgzTWRWUFBQWEo4RUxyNUt5UW4xN3VZaW9paEd1UUFCL1J8YStTYmVCc3VoVGhCeENNSVZHSmEyUk1hejZWaEZkT1M1WTVkSXdBY1Q5cz0=/8" method="post">
      <div class="form-group">
        <input type="text" name="email"
          placeholder="Enter your email"
          class="form-control input-sm text-center"/>
        <button type="submit" class="btn btn-primary btn-block">Subscribe</button>
      </div>
    </form>
  </div>
</div>

<div class="row">
  <div class="col">
    <h2>Featured posts</h2>

    <ul>
      
        <li><a href="/2021/02/google-monorepos-and-caching.html">How does Google keep build times low?</a></li>
      
        <li><a href="/2020/12/google-no-clean-builds.html">How does Google avoid clean builds?</a></li>
      
        <li><a href="/2020/12/unit-testing-a-console-app.html">Unit-testing a console app (a text editor)</a></li>
      
        <li><a href="/2020/11/wsl-lost-potential.html">Windows Subsystem for Linux: The lost potential</a></li>
      
        <li><a href="/2020/10/bye-google-hi-microsoft.html">Farewell, Google; hello, Microsoft!</a></li>
      
      <li><a href="/essays.html#featured">More...</a></li>
    </ul>
  </div>
</div>

<div class="row">
  <div class="col">
    <h2>Archive</h2>

    <ul>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2021">2021</a> (14)
        <ul id="archive-year-2021" class="collapse">
        
          
          <li><a href="/archive.html#2021-07">July 2021</a> (1)</li>
        
          
          <li><a href="/archive.html#2021-06">June 2021</a> (1)</li>
        
          
          <li><a href="/archive.html#2021-04">April 2021</a> (2)</li>
        
          
          <li><a href="/archive.html#2021-03">March 2021</a> (2)</li>
        
          
          <li><a href="/archive.html#2021-02">February 2021</a> (3)</li>
        
          
          <li><a href="/archive.html#2021-01">January 2021</a> (5)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2020">2020</a> (36)
        <ul id="archive-year-2020" class="collapse">
        
          
          <li><a href="/archive.html#2020-12">December 2020</a> (4)</li>
        
          
          <li><a href="/archive.html#2020-11">November 2020</a> (5)</li>
        
          
          <li><a href="/archive.html#2020-10">October 2020</a> (5)</li>
        
          
          <li><a href="/archive.html#2020-09">September 2020</a> (2)</li>
        
          
          <li><a href="/archive.html#2020-08">August 2020</a> (6)</li>
        
          
          <li><a href="/archive.html#2020-07">July 2020</a> (2)</li>
        
          
          <li><a href="/archive.html#2020-06">June 2020</a> (2)</li>
        
          
          <li><a href="/archive.html#2020-05">May 2020</a> (3)</li>
        
          
          <li><a href="/archive.html#2020-04">April 2020</a> (2)</li>
        
          
          <li><a href="/archive.html#2020-03">March 2020</a> (2)</li>
        
          
          <li><a href="/archive.html#2020-02">February 2020</a> (1)</li>
        
          
          <li><a href="/archive.html#2020-01">January 2020</a> (2)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2019">2019</a> (24)
        <ul id="archive-year-2019" class="collapse">
        
          
          <li><a href="/archive.html#2019-12">December 2019</a> (8)</li>
        
          
          <li><a href="/archive.html#2019-11">November 2019</a> (6)</li>
        
          
          <li><a href="/archive.html#2019-10">October 2019</a> (1)</li>
        
          
          <li><a href="/archive.html#2019-09">September 2019</a> (2)</li>
        
          
          <li><a href="/archive.html#2019-03">March 2019</a> (2)</li>
        
          
          <li><a href="/archive.html#2019-02">February 2019</a> (3)</li>
        
          
          <li><a href="/archive.html#2019-01">January 2019</a> (2)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2018">2018</a> (25)
        <ul id="archive-year-2018" class="collapse">
        
          
          <li><a href="/archive.html#2018-07">July 2018</a> (3)</li>
        
          
          <li><a href="/archive.html#2018-06">June 2018</a> (7)</li>
        
          
          <li><a href="/archive.html#2018-05">May 2018</a> (2)</li>
        
          
          <li><a href="/archive.html#2018-04">April 2018</a> (2)</li>
        
          
          <li><a href="/archive.html#2018-03">March 2018</a> (8)</li>
        
          
          <li><a href="/archive.html#2018-02">February 2018</a> (3)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2017">2017</a> (6)
        <ul id="archive-year-2017" class="collapse">
        
          
          <li><a href="/archive.html#2017-10">October 2017</a> (1)</li>
        
          
          <li><a href="/archive.html#2017-08">August 2017</a> (1)</li>
        
          
          <li><a href="/archive.html#2017-07">July 2017</a> (1)</li>
        
          
          <li><a href="/archive.html#2017-02">February 2017</a> (3)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2016">2016</a> (8)
        <ul id="archive-year-2016" class="collapse">
        
          
          <li><a href="/archive.html#2016-09">September 2016</a> (1)</li>
        
          
          <li><a href="/archive.html#2016-05">May 2016</a> (1)</li>
        
          
          <li><a href="/archive.html#2016-04">April 2016</a> (1)</li>
        
          
          <li><a href="/archive.html#2016-03">March 2016</a> (2)</li>
        
          
          <li><a href="/archive.html#2016-02">February 2016</a> (1)</li>
        
          
          <li><a href="/archive.html#2016-01">January 2016</a> (2)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2015">2015</a> (17)
        <ul id="archive-year-2015" class="collapse">
        
          
          <li><a href="/archive.html#2015-12">December 2015</a> (2)</li>
        
          
          <li><a href="/archive.html#2015-10">October 2015</a> (2)</li>
        
          
          <li><a href="/archive.html#2015-09">September 2015</a> (3)</li>
        
          
          <li><a href="/archive.html#2015-06">June 2015</a> (2)</li>
        
          
          <li><a href="/archive.html#2015-05">May 2015</a> (3)</li>
        
          
          <li><a href="/archive.html#2015-04">April 2015</a> (1)</li>
        
          
          <li><a href="/archive.html#2015-03">March 2015</a> (1)</li>
        
          
          <li><a href="/archive.html#2015-02">February 2015</a> (3)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2014">2014</a> (12)
        <ul id="archive-year-2014" class="collapse">
        
          
          <li><a href="/archive.html#2014-11">November 2014</a> (2)</li>
        
          
          <li><a href="/archive.html#2014-05">May 2014</a> (3)</li>
        
          
          <li><a href="/archive.html#2014-03">March 2014</a> (1)</li>
        
          
          <li><a href="/archive.html#2014-02">February 2014</a> (3)</li>
        
          
          <li><a href="/archive.html#2014-01">January 2014</a> (3)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2013">2013</a> (62)
        <ul id="archive-year-2013" class="collapse">
        
          
          <li><a href="/archive.html#2013-12">December 2013</a> (7)</li>
        
          
          <li><a href="/archive.html#2013-11">November 2013</a> (7)</li>
        
          
          <li><a href="/archive.html#2013-10">October 2013</a> (7)</li>
        
          
          <li><a href="/archive.html#2013-09">September 2013</a> (13)</li>
        
          
          <li><a href="/archive.html#2013-08">August 2013</a> (9)</li>
        
          
          <li><a href="/archive.html#2013-07">July 2013</a> (10)</li>
        
          
          <li><a href="/archive.html#2013-06">June 2013</a> (9)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2012">2012</a> (29)
        <ul id="archive-year-2012" class="collapse">
        
          
          <li><a href="/archive.html#2012-10">October 2012</a> (1)</li>
        
          
          <li><a href="/archive.html#2012-09">September 2012</a> (1)</li>
        
          
          <li><a href="/archive.html#2012-08">August 2012</a> (3)</li>
        
          
          <li><a href="/archive.html#2012-07">July 2012</a> (2)</li>
        
          
          <li><a href="/archive.html#2012-06">June 2012</a> (2)</li>
        
          
          <li><a href="/archive.html#2012-05">May 2012</a> (3)</li>
        
          
          <li><a href="/archive.html#2012-04">April 2012</a> (1)</li>
        
          
          <li><a href="/archive.html#2012-03">March 2012</a> (1)</li>
        
          
          <li><a href="/archive.html#2012-02">February 2012</a> (10)</li>
        
          
          <li><a href="/archive.html#2012-01">January 2012</a> (5)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2011">2011</a> (60)
        <ul id="archive-year-2011" class="collapse">
        
          
          <li><a href="/archive.html#2011-12">December 2011</a> (4)</li>
        
          
          <li><a href="/archive.html#2011-11">November 2011</a> (4)</li>
        
          
          <li><a href="/archive.html#2011-10">October 2011</a> (5)</li>
        
          
          <li><a href="/archive.html#2011-09">September 2011</a> (11)</li>
        
          
          <li><a href="/archive.html#2011-08">August 2011</a> (6)</li>
        
          
          <li><a href="/archive.html#2011-07">July 2011</a> (4)</li>
        
          
          <li><a href="/archive.html#2011-06">June 2011</a> (6)</li>
        
          
          <li><a href="/archive.html#2011-05">May 2011</a> (6)</li>
        
          
          <li><a href="/archive.html#2011-04">April 2011</a> (5)</li>
        
          
          <li><a href="/archive.html#2011-03">March 2011</a> (2)</li>
        
          
          <li><a href="/archive.html#2011-01">January 2011</a> (7)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2010">2010</a> (26)
        <ul id="archive-year-2010" class="collapse">
        
          
          <li><a href="/archive.html#2010-12">December 2010</a> (7)</li>
        
          
          <li><a href="/archive.html#2010-09">September 2010</a> (1)</li>
        
          
          <li><a href="/archive.html#2010-07">July 2010</a> (1)</li>
        
          
          <li><a href="/archive.html#2010-06">June 2010</a> (2)</li>
        
          
          <li><a href="/archive.html#2010-05">May 2010</a> (5)</li>
        
          
          <li><a href="/archive.html#2010-04">April 2010</a> (5)</li>
        
          
          <li><a href="/archive.html#2010-03">March 2010</a> (3)</li>
        
          
          <li><a href="/archive.html#2010-01">January 2010</a> (2)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2009">2009</a> (31)
        <ul id="archive-year-2009" class="collapse">
        
          
          <li><a href="/archive.html#2009-10">October 2009</a> (1)</li>
        
          
          <li><a href="/archive.html#2009-09">September 2009</a> (1)</li>
        
          
          <li><a href="/archive.html#2009-08">August 2009</a> (3)</li>
        
          
          <li><a href="/archive.html#2009-07">July 2009</a> (2)</li>
        
          
          <li><a href="/archive.html#2009-06">June 2009</a> (4)</li>
        
          
          <li><a href="/archive.html#2009-05">May 2009</a> (6)</li>
        
          
          <li><a href="/archive.html#2009-04">April 2009</a> (2)</li>
        
          
          <li><a href="/archive.html#2009-03">March 2009</a> (4)</li>
        
          
          <li><a href="/archive.html#2009-01">January 2009</a> (8)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2008">2008</a> (61)
        <ul id="archive-year-2008" class="collapse">
        
          
          <li><a href="/archive.html#2008-12">December 2008</a> (1)</li>
        
          
          <li><a href="/archive.html#2008-11">November 2008</a> (4)</li>
        
          
          <li><a href="/archive.html#2008-10">October 2008</a> (6)</li>
        
          
          <li><a href="/archive.html#2008-09">September 2008</a> (1)</li>
        
          
          <li><a href="/archive.html#2008-08">August 2008</a> (6)</li>
        
          
          <li><a href="/archive.html#2008-07">July 2008</a> (14)</li>
        
          
          <li><a href="/archive.html#2008-06">June 2008</a> (3)</li>
        
          
          <li><a href="/archive.html#2008-05">May 2008</a> (1)</li>
        
          
          <li><a href="/archive.html#2008-04">April 2008</a> (3)</li>
        
          
          <li><a href="/archive.html#2008-03">March 2008</a> (3)</li>
        
          
          <li><a href="/archive.html#2008-02">February 2008</a> (9)</li>
        
          
          <li><a href="/archive.html#2008-01">January 2008</a> (10)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2007">2007</a> (86)
        <ul id="archive-year-2007" class="collapse">
        
          
          <li><a href="/archive.html#2007-12">December 2007</a> (4)</li>
        
          
          <li><a href="/archive.html#2007-11">November 2007</a> (7)</li>
        
          
          <li><a href="/archive.html#2007-10">October 2007</a> (2)</li>
        
          
          <li><a href="/archive.html#2007-09">September 2007</a> (8)</li>
        
          
          <li><a href="/archive.html#2007-08">August 2007</a> (6)</li>
        
          
          <li><a href="/archive.html#2007-07">July 2007</a> (15)</li>
        
          
          <li><a href="/archive.html#2007-06">June 2007</a> (15)</li>
        
          
          <li><a href="/archive.html#2007-05">May 2007</a> (4)</li>
        
          
          <li><a href="/archive.html#2007-04">April 2007</a> (10)</li>
        
          
          <li><a href="/archive.html#2007-03">March 2007</a> (8)</li>
        
          
          <li><a href="/archive.html#2007-02">February 2007</a> (1)</li>
        
          
          <li><a href="/archive.html#2007-01">January 2007</a> (6)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2006">2006</a> (103)
        <ul id="archive-year-2006" class="collapse">
        
          
          <li><a href="/archive.html#2006-12">December 2006</a> (4)</li>
        
          
          <li><a href="/archive.html#2006-11">November 2006</a> (3)</li>
        
          
          <li><a href="/archive.html#2006-10">October 2006</a> (7)</li>
        
          
          <li><a href="/archive.html#2006-09">September 2006</a> (6)</li>
        
          
          <li><a href="/archive.html#2006-08">August 2006</a> (13)</li>
        
          
          <li><a href="/archive.html#2006-07">July 2006</a> (4)</li>
        
          
          <li><a href="/archive.html#2006-06">June 2006</a> (13)</li>
        
          
          <li><a href="/archive.html#2006-05">May 2006</a> (7)</li>
        
          
          <li><a href="/archive.html#2006-04">April 2006</a> (9)</li>
        
          
          <li><a href="/archive.html#2006-03">March 2006</a> (6)</li>
        
          
          <li><a href="/archive.html#2006-02">February 2006</a> (13)</li>
        
          
          <li><a href="/archive.html#2006-01">January 2006</a> (18)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2005">2005</a> (129)
        <ul id="archive-year-2005" class="collapse">
        
          
          <li><a href="/archive.html#2005-12">December 2005</a> (9)</li>
        
          
          <li><a href="/archive.html#2005-11">November 2005</a> (7)</li>
        
          
          <li><a href="/archive.html#2005-10">October 2005</a> (23)</li>
        
          
          <li><a href="/archive.html#2005-09">September 2005</a> (10)</li>
        
          
          <li><a href="/archive.html#2005-08">August 2005</a> (14)</li>
        
          
          <li><a href="/archive.html#2005-07">July 2005</a> (5)</li>
        
          
          <li><a href="/archive.html#2005-06">June 2005</a> (12)</li>
        
          
          <li><a href="/archive.html#2005-05">May 2005</a> (6)</li>
        
          
          <li><a href="/archive.html#2005-04">April 2005</a> (6)</li>
        
          
          <li><a href="/archive.html#2005-03">March 2005</a> (13)</li>
        
          
          <li><a href="/archive.html#2005-02">February 2005</a> (11)</li>
        
          
          <li><a href="/archive.html#2005-01">January 2005</a> (13)</li>
        
        </ul>
      </li>
    
      <li>
        
        <a data-toggle="collapse" href="#archive-year-2004">2004</a> (84)
        <ul id="archive-year-2004" class="collapse">
        
          
          <li><a href="/archive.html#2004-12">December 2004</a> (9)</li>
        
          
          <li><a href="/archive.html#2004-11">November 2004</a> (6)</li>
        
          
          <li><a href="/archive.html#2004-10">October 2004</a> (11)</li>
        
          
          <li><a href="/archive.html#2004-09">September 2004</a> (19)</li>
        
          
          <li><a href="/archive.html#2004-07">July 2004</a> (29)</li>
        
          
          <li><a href="/archive.html#2004-06">June 2004</a> (10)</li>
        
        </ul>
      </li>
    
    </ul>
  </div>
</div>

        </div>
      </div>
    </div>

    <footer class="container">
  <div class="row">
    <div class="col order-2 texr-right">
      <p class="float-right"><a href="#">Back to top</a></p>
    </div>
    <div class="col order-1 mr-auto">
      <p>Copyright 2004&ndash;2021 Julio Merino</p>
    </div>
  </div>
</footer>

<script src="/js/jquery-1.11.2.min.js"></script>
<script src="/bootstrap-4.3.1/dist/js/bootstrap.min.js"></script>

<script>
$('article :header').each(function() {
  var attr = $(this).attr('id');
  if (typeof attr !== typeof undefined && attr !== false) {
    $(this).append('<a class="anchor" href="#' + $(this).context.id + '">' +
      '<img src="/octicons/link.svg" aria-hidden="true">' +
      '</a>')
  }
})
</script>

<script>
$("blockquote").addClass("blockquote");
$("pre.chroma").addClass("pre-scrollable");

$("p:contains('NOTE: ')").addClass("callout callout-info");
$("p:contains('IMPORTANT: ')").addClass("callout callout-info");
$("p:contains('WARNING: ')").addClass("callout callout-warning");
$("p:contains('UPDATE (')").addClass("callout callout-warning");
$("p:contains('DANGER: ')").addClass("callout callout-danger");
$("p:contains('DISCLAIMER: ')").addClass("callout callout-danger");
</script>

  </body>
</html>
