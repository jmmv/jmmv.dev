<!DOCTYPE html>
<html>
  <head>
    

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head
      content must come *after* these tags -->

<meta name="description"
      content="Some time ago, a friend of mine installed FreeBSD on his old laptop and told me that it was very slow.  Specially, a simple man ls took forever, while the sa...">
<meta name="author" content="Julio Merino">

<meta content="http://julio.meroh.net/2004/09/preformatted-manual-pages.html" property="og:url">

<link rel="canonical" href="http://julio.meroh.net/2004/09/preformatted-manual-pages.html">
<link rel="alternate" type="application/rss+xml" title="Julio Merino" href="http://julio.meroh.net/feed.xml" />

<link rel="stylesheet" href="/css/main.css">

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="/js/html5shiv-3.7.2.min.js"></script>
  <script src="/js/respond-1.4.2.min.js"></script>
<![endif]-->

    <title>Preformatted manual pages - Julio Merino</title>
    <meta content="Preformatted manual pages - Julio Merino" property="og:title">
  </head>

  <body>
    <header class="site-header">

<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed"
              data-toggle="collapse" data-target="#navbar"
              aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Julio Merino</a>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
          
            
              
                <li><a class="page-link"
                href="/about/"
                >About</a></li>
              
            
          
        
          
            
              
                <li><a class="page-link"
                href="/essays/"
                >Essays</a></li>
              
            
          
        
          
            
              
                <li><a class="page-link"
                href="/software/"
                >Software</a></li>
              
            
          
        
          
            
              
                <li><a class="page-link"
                href="/work/"
                >Work</a></li>
              
            
          
        
      </ul>

      <form class="navbar-form navbar-right" method="get" role="search"
            action="http://www.google.com/search">
          <div class="form-group">
            <input type="text" name="query" class="form-control"
                   placeholder="Search">
            <input type="hidden" name="sitesearch" value="http://julio.meroh.net">
          </div>
          <button type="submit" value="Search" class="btn btn-default">
            <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
          </button>
      </form>
    </div>
  </div>
</nav>

</header>


    <div class="page-header">
      <div class="container">
        <h1>Preformatted manual pages</h1>

        <p>Sat, 25 Sep 2004 13:29:00 +0000</p>

        
      </div>
    </div>

    <div class="container">
      <article>
        <p>Some time ago, a friend of mine installed <a href="http://www.freebsd.org/">FreeBSD</a> on his old laptop and told me that it was very slow.  Specially, a simple <tt>man ls</tt> took forever, while the same command on a Linux system went faster. Why was this specific command slower? Probably because he missed to install the <i>preformatted manual pages</i>, included in the <tt>catman</tt> series.</p>  <p>We'll see what these files are in a minute, but first of all you have to understand how <tt>man</tt> works.  Manual pages are stored under <tt>/usr/share/man/man[1-8]</tt> (among other customizable locations). The files in these directories are the manual pages in their source code form, that is, in <tt>groff</tt> format (or some other flavour of <tt>roff</tt>, depending on the system).</p>  <p>Whenever you ask for a manual page, <tt>man</tt> invokes <tt>groff</tt> to generate a pretty formatted page: it indents and fills paragraphs, changes some text into boldface, etc. (As an analogy, it is like the conversion from plain HTML code to the rendered page.) When the conversion has finished, <tt>more</tt> (or the program pointed by the <tt>PAGER</tt> variable) is invoked to show you the generated page.</p>  <p>This process can be very slow on old systems. So, if the source pages don't change often, why not store a copy of the generated files somewhere in the system? This way, they can be accessed at will, without having to call <tt>groff</tt>.  This is exactly what preformatted manual pages are for.</p>  <p>On a BSD system, if you look at the files stored in <tt>/usr/share/man/cat[1-8]</tt> (assuming you installed them), you'll see that they are the pretty formatted version of your manual pages. These where generated when the whole system was built, so that the conversion has to happen only once. If they are there, <tt>man</tt> will prefer them over the source pages to speed up its process.</p>  <p>On a Linux system, things work in a slightly different way.  The preformatted pages are stored under <tt>/var/cache/man/cat[1-8]</tt>, and are generated on the first read; therefore, further reads of the same manual page will be very fast. However, this only happens if the <tt>man</tt> program has the setuid bit set, or if you have enough permissions to write to that directory.  Check the <tt>man(1)</tt> manual page for more information about how this works. (I'm not completely sure that this is the exact process... correct me if I'm wrong, please.)</p><p class="mobile-post"></p>

      </article>

      <div class="post-links">
        <p>
          

          

          <a href="/feed.xml">Subscribe
          via RSS</a>
          &middot;
          <a href="/blog/">Go to posts index</a>
        </p>

        <form class="form-inline"
            action="https://feedburner.google.com/fb/a/mailverify"
            method="post"
            target="popupwindow"
            onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=jmmv', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
          <div class="form-group form-group-sm">
            <input type="text" style="width: 400px" name="email"
                    placeholder="Enter your email to subscribe to new posts"
                    class="form-control input-sm"/>
          </div>
          <button type="submit" value="Subscribe"
                  class="btn btn-default btn-sm">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
          </button>
          &nbsp;&nbsp;&nbsp;Delivered by
          <input type="hidden" value="jmmv" name="uri"/>
          <input type="hidden" name="loc" value="en_US"/>
          <a href="https://feedburner.google.com" target="_blank">FeedBurner</a>
        </form>
      </div>

      
      <div id="disqus_thread">
        <script>
          var disqus_config = function () {
            this.page.url = "http://julio.meroh.net/2004/09/preformatted-manual-pages.html";
            this.page.identifier = "/2004/09/preformatted-manual-pages";
          };
          (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');

            s.src = '//jmmv.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments
          powered by Disqus.</a>
        </noscript>
      </div>
      
      <p>Comments from the original Blogger-hosted post:</p>
      <script src="https://apis.google.com/js/plusone.js"></script>
      <div class="g-comments"
           data-href="http://julipedia.meroh.net/2004/09/preformatted-manual-pages.html"
           data-first_party_property="BLOGGER"
           data-view_type="FILTERED_POSTMOD">
      </div>
      
      
    </div>

    <div class="container">
  <footer>
    <p class="pull-right"><a href="#">Back to top</a></p>
    <p>Copyright 2018 Julio Merino</p>
  </footer>
</div>

<script src="/js/jquery-1.11.2.min.js">
</script>
<script
  src="/css/bootstrap.min.js">
</script>

<script src="/js/auto-toc-1.0.0.dist.js">
</script>

<script>
$("p:contains('NOTE: ')").addClass("callout callout-info");
$("p:contains('IMPORTANT: ')").addClass("callout callout-info");
$("p:contains('WARNING: ')").addClass("callout callout-warning");
$("p:contains('DANGER: ')").addClass("callout callout-danger");
</script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
  m.parentNode.insertBefore(a,m)})(window,document,'script',
  '//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63557333-1', 'auto');
  ga('send', 'pageview');
</script>


  </body>
</html>
