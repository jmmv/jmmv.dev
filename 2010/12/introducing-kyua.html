<!DOCTYPE html>
<html>
  <head>
    

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head
      content must come *after* these tags -->

<meta name="description"
      content="Wow.  I have just realized that I have not blogged at all about the project that has kept me busy for the past two months!  Not good, not good.  "What is thi...">
<meta name="author" content="Julio Merino">

<meta content="http://julio.meroh.net/2010/12/introducing-kyua.html" property="og:url">

<link rel="canonical" href="http://julio.meroh.net/2010/12/introducing-kyua.html">
<link rel="alternate" type="application/rss+xml" title="Julio Merino" href="http://julio.meroh.net/feed.xml" />

<link rel="stylesheet" href="/css/main.css">

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="/js/html5shiv-3.7.2.min.js"></script>
  <script src="/js/respond-1.4.2.min.js"></script>
<![endif]-->

    <title>Introducing Kyua - Julio Merino</title>
    <meta content="Introducing Kyua - Julio Merino" property="og:title">
  </head>

  <body>
    <header class="site-header">

<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed"
              data-toggle="collapse" data-target="#navbar"
              aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Julio Merino</a>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
          
            
              
                <li><a class="page-link"
                href="/about/"
                >About</a></li>
              
            
          
        
          
            
          
        
          
            
          
        
          
            
              
                <li><a class="page-link"
                href="/essays/"
                >Essays</a></li>
              
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
              
                <li><a class="page-link"
                href="/software/"
                >Software</a></li>
              
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
              
                <li><a class="page-link"
                href="/work/"
                >Work</a></li>
              
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
      </ul>

      <form class="navbar-form navbar-right" method="get" role="search"
            action="http://www.google.com/search">
          <div class="form-group">
            <input type="text" name="query" class="form-control"
                   placeholder="Search">
            <input type="hidden" name="sitesearch" value="http://julio.meroh.net">
          </div>
          <button type="submit" value="Search" class="btn btn-default">
            <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
          </button>
      </form>
    </div>
  </div>
</nav>

</header>


    <div class="page-header">
      <div class="container">
        <h1>Introducing Kyua</h1>

        <p><!-- From http://alanwsmith.com/jekyll-liquid-date-formatting-examples -->

December

16th,
  
2010
at
19:11 UTC
        
        </p>

        
      </div>
    </div>

    <div class="container">
      <article>
        Wow.  I have just realized that I have not blogged at all about the project that has kept me busy for the past two months!  Not good, not good.  "What is this project?", I hear.  Well, this project is <a href="http://code.google.com/p/kyua/">Kyua</a>.<br /><br />A bit of background first: the <a href="http://www.NetBSD.org/~jmmv/atf/">Automated Testing Framework</a>, or ATF for short, is a project that I <a href="http://blog.julipedia.org/2007/04/soc-selected-again.html">started during the Summer of Code of 2007</a>. The major goal of ATF was, and still is, to provide a testing framework for the <a href="http://www.NetBSD.org/">NetBSD</a> operating system. The ATF framework is composed of a set of libraries to aid in the implementation of test cases in C, C++ and shell, and a set of tools to ease the execution of such test cases (<tt>atf-run</tt>) and to generate <a href="http://www.gson.org/netbsd/bugs/build/build/2010.12.14.20.09.43/test.html">reports</a> of the execution (<tt>atf-report</tt>).<br /><br />At that point in time, I would say that the original design of ATF was nice.  It made test programs intelligent enough to execute their test cases in a sandboxed environment.  Such test programs could be executed on their own (without <tt>atf-run</tt>) and they exposed the same behavior as when they were run within the runtime monitor, <tt>atf-run</tt>.  On paper this was nice, but in practice it has become a hassle.  Additionally, some of these design decisions mean that particular features (in particular, parallel execution of tests) cannot be implemented at all.  At the end of 2009 and beginning of 2010, I did some <a href="http://blog.julipedia.org/2010/03/introducing-atf-nofork-branch.html">major refactorings</a> to the code to make the test programs dumber and to move much of the common logic into <tt>atf-run</tt>, which helped a lot in fixing the major shortcomings encountered by the users... but the result is that, today, we have a huge mess.<br /><br />Additionally, while ATF is composed of different modules conceptually separate from each other, there is some hard implementation couplings among them that impose severe restrictions during development.  Tangentially, during the past 2 years of working at Google (and coding mainly in Python), I have been learning new neat programming techniques to make code more testable... and these are not followed at all by ATF.  In fact, while the test suite of ATF seems very extensive, it definitely is not: there are many corner cases that are not tested and for which implementing tests would be <i>very</i> hard (which means that nasty bugs have easily sneaked in into releases).<br /><br />Lastly, a very important point that affects directly the success of the project.  Outsiders that want to contribute to ATF have a huge entry barrier: the source repository is managed by <a href="http://www.monotone.ca/">Monotone</a>, the bug tracker is provided by Gnats (a truly user-unfriendly system), and the mailing lists are offered by majordomo. None of these tools is "standard" by today's common practices, and some of them are tied to NetBSD's hosting which puts some outsiders off.<br /><br />For all the reasons above and as this year has been moving along, I have gotten fed up with the ATF code base.  (OK, things are not <i>that</i> bad... but in my mind they do ;-)  And here is where Kyua comes into the game.<br /><br /><a href="http://code.google.com/p/kyua/">Kyua</a> is a project to address all the shortcomings listed above.  First of all, the project uses off-the-shelf development tools that should make it much, much easier for external people to contribute.  Secondly, the project intends to be much more modular, providing a clear separation between the different components and providing code that is easily testable.  Lastly, Kyua intends to remain compatible with ATF so that there are no major disruptions for users.  You can (and should) think of Kyua as ATF 2.0, not as a vastly different framework.<br /><br />As of today, Kyua implements a runtime engine that is on par, feature-wise, to the one provided by <tt>atf-run</tt>.  It is able to run test cases implemented with the ATF libraries and it is able to test itself.  It currently contains 355 test cases that run in less than 20 seconds.  (Compare that to the 536 test cases of ATF, which take over a minute to run, and Kyua is still really far from catching up with all the functionality of ATF.)  Next actions involve implementing reports generation and configuration files.<br /><br />Anyway.  For more details on the project, I recommend you to read the <a href="http://mail-index.netbsd.org/atf-devel/2010/11/13/msg000206.html">original posting to atf-devel</a> or the project's <a href="http://code.google.com/p/kyua/">main page</a> and <a href="http://code.google.com/p/kyua/w/list">wiki</a>.  And of course, you can also download the preliminary source code to take a look!<br /><br />Enjoy :-)

      </article>

      <div class="post-links">
        <p>
          

          
          <a href="http://julipedia.meroh.net/2010/12/introducing-kyua.html">Posted on
          The Julipedia</a>
          &middot;
          

          

          <a href="/feed.xml">Subscribe
          via RSS</a>
          &middot;
          <a href="/blog/">Go to posts index</a>
        </p>

        <form class="form-inline"
            action="https://feedburner.google.com/fb/a/mailverify"
            method="post"
            target="popupwindow"
            onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=jmmv', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
          <div class="form-group form-group-sm">
            <input type="text" style="width: 400px" name="email"
                    placeholder="Enter your email to subscribe to new posts"
                    class="form-control input-sm"/>
          </div>
          <button type="submit" value="Subscribe"
                  class="btn btn-default btn-sm">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
          </button>
          &nbsp;&nbsp;&nbsp;Delivered by
          <input type="hidden" value="jmmv" name="uri"/>
          <input type="hidden" name="loc" value="en_US"/>
          <a href="https://feedburner.google.com" target="_blank">FeedBurner</a>
        </form>
      </div>

      
      <div id="disqus_thread">
        <script>
          var disqus_config = function () {
            this.page.url = "http://julio.meroh.net/2010/12/introducing-kyua.html";
            this.page.identifier = "/2010/12/introducing-kyua";
          };
          (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');

            s.src = '//jmmv.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments
          powered by Disqus.</a>
        </noscript>
      </div>
      
    </div>

    <div class="container">
  <footer>
    <p class="pull-right"><a href="#">Back to top</a></p>
    <p>Copyright 2016 Julio Merino</p>
  </footer>
</div>

<script src="/js/jquery-1.11.2.min.js">
</script>
<script
  src="/css/bootstrap.min.js">
</script>

<script src="/js/auto-toc-1.0.0.dist.js">
</script>

<script>
$("p:contains('NOTE: ')").addClass("callout callout-info");
$("p:contains('IMPORTANT: ')").addClass("callout callout-info");
$("p:contains('WARNING: ')").addClass("callout callout-warning");
$("p:contains('DANGER: ')").addClass("callout callout-danger");
</script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
  m.parentNode.insertBefore(a,m)})(window,document,'script',
  '//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63557333-1', 'auto');
  ga('send', 'pageview');
</script>


  </body>
</html>
