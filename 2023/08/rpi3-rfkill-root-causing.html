<!doctype html><html lang=en xmlns=http://www.w3.org/1999/xhtml xmlns:fb=http://ogp.me/ns/fb#><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:site_name" content="Julio Merino (jmmv.dev)"><meta property="twitter:site" content="@jmmv"><title>Raspberry Pi 3, rfkill, and real root causing - Julio Merino (jmmv.dev)</title>
<meta property="og:title" content="Raspberry Pi 3, rfkill, and real root causing - Julio Merino (jmmv.dev)"><meta property="twitter:title" content="Raspberry Pi 3, rfkill, and real root causing - Julio Merino ‚Ä¶"><meta name=description content="I&rsquo;ve had a Raspberry Pi 3 in the garage running Raspbian so it was attached to Ethernet for a long time. A few weeks ago, however, I wanted to bring the Pi into the house so that my kid, who was showing interest in robotics, and I could play with it. That required having the ability to place the device onto the dining table, next to a laptop, which meant connecting it to WiFi. Easy peasy, right?
Well&mldr; while that should have been trivial, it did not work right away and the solutions I found online back then were all nonsensical. I gave up in desperation because I did not have enough time to find the root cause, and all interest was lost. Until last weekend when I gave this ordeal another try. At this point, I found once again the same nonsensical solutions online, got equally frustrated about the fact that they even existed, and decided to find the real answer to my problem on my own.
Yes, this is mostly a rant about the Internet being littered with misleading answers of the kind &ldquo;I reinstalled glibc and my problem is gone!&rdquo;. But this is also the tale of a troubleshooting session&mdash;and you know I like to blog about those.
"><meta property="og:description" content="I&rsquo;ve had a Raspberry Pi 3 in the garage running Raspbian so it was attached to Ethernet for a long time. A few weeks ago, however, I wanted to bring the Pi into the house so that my kid, who was showing interest in robotics, and I could play with it. That required having the ability to place the device onto the dining table, next to a laptop, which meant connecting it to WiFi. Easy peasy, right?
Well&mldr; while that should have been trivial, it did not work right away and the solutions I found online back then were all nonsensical. I gave up in desperation because I did not have enough time to find the root cause, and all interest was lost. Until last weekend when I gave this ordeal another try. At this point, I found once again the same nonsensical solutions online, got equally frustrated about the fact that they even existed, and decided to find the real answer to my problem on my own.
Yes, this is mostly a rant about the Internet being littered with misleading answers of the kind &ldquo;I reinstalled glibc and my problem is gone!&rdquo;. But this is also the tale of a troubleshooting session&mdash;and you know I like to blog about those.
"><meta property="twitter:description" content="I&rsquo;ve had a Raspberry Pi 3 in the garage running Raspbian so it was attached to Ethernet for a long time. A few weeks ago, however, I wanted to bring the Pi into the house so that my kid, who was ‚Ä¶"><meta name=author content="Julio Merino"><meta property="twitter:creator" content="@jmmv"><meta name=generator content="Hugo 0.136.5"><meta property="og:url" content="https://jmmv.dev/2023/08/rpi3-rfkill-root-causing.html"><meta property="og:type" content="blog"><meta property="twitter:card" content="summary"><link rel=canonical href=https://jmmv.dev/2023/08/rpi3-rfkill-root-causing.html><link rel=alternate type=application/rss+xml title="Julio Merino (jmmv.dev)" href=/feed.xml><link rel=stylesheet href=/sass/main.min.cb91349cd93211a37e7d5dc131c35a170fc795721c03373cd05571327eea206b.css><link rel=stylesheet href=/css/chroma.css><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicons/favicon-96x96.png sizes=96x96><meta property="og:image" content="/images/2023-08-16-rpi3-go2-gpio.jpg"><meta property="twitter:image" content="https://jmmv.dev/images/2023-08-16-rpi3-go2-gpio.jpg"><meta property="og:image:alt" content="A Raspberry Pi 3 connected to a breadboard with a single LED on PIN 17 next to a Surface Go 2 logging into the Pi over WiFi and using EndBASIC 0.10 to turn the LED on."><meta property="twitter:image:alt" content="A Raspberry Pi 3 connected to a breadboard with a single LED on PIN 17 next to a Surface Go 2 logging into the Pi over WiFi and using EndBASIC 0.10 to turn the LED on."><script>const SITE_ID="e8da9f62-b7ac-4fe9-bf20-7c527199a376",BASE_URL="https://jmmv.dev/"</script></head><body><header class=site-header><nav class="navbar navbar-expand-md fixed-top navbar-dark bg-primary"><a class=navbar-brand href=/><img src=/images/favicons/favicon-30x30.png width=30 height=30 class="d-inline-block align-top" alt>
&nbsp;jmmv.dev
</a><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=/about.html>About</a></li><li class=nav-item><a class=nav-link href=/blog.html>Blog</a></li><li class=nav-item><a class=nav-link href=/resume.html>Resume</a></li><li class=nav-item><a class=nav-link href=/software.html>Software</a></li></ul><ul class="navbar-nav mr-4"><li class=nav-item><a class=nav-link href=/archive.html>Archive</a></li><li class=nav-item><a class=nav-link href=/series.html>Series</a></li><li class=nav-item><a class=nav-link href=/tags.html>Tags</a></li></ul><form class=form-inline method=get role=search action=https://www.google.com/search><div class=input-group><input type=search name=query class=form-control placeholder=Search aria-label=Search><div class=input-group-append><button type=submit value=Search class="btn btn-light">
<img src=/octicons/search.svg></button></div></div><input type=hidden name=sitesearch value=https://jmmv.dev/></form></div></nav></header><div class=page-header><div class=container><h1>Raspberry Pi 3, rfkill, and real root causing</h1><p>August 16, 2023 &#183;
About 11 minutes
&#183;
Tags:
<a href=/tags/linux>linux</a>, <a href=/tags/troubleshooting>troubleshooting</a></p><figure class=cover-image><img src=/images/2023-08-16-rpi3-go2-gpio.jpg style=max-width:100%><figcaption>A Raspberry Pi 3 connected to a breadboard with a single LED on PIN 17 next to a Surface Go 2 logging into the Pi over WiFi and using EndBASIC 0.10 to turn the LED on.</figcaption></figure></div></div><div class="container post-body"><div class=row><div class=col-md-9><div class=row><div class=col><article><p>I&rsquo;ve had a Raspberry Pi 3 in the garage running Raspbian so it was attached to Ethernet for a long time. A few weeks ago, however, I wanted to bring the Pi into the house so that my kid, who was showing interest in robotics, and I could play with it. That required having the ability to place the device onto the dining table, next to a laptop, which meant connecting it to WiFi. Easy peasy, right?</p><p>Well&mldr; while that should have been trivial, it did not work right away and the solutions I found online back then were all nonsensical. I gave up in desperation because I did not have enough time to find the root cause, and all interest was lost. Until last weekend when I gave this ordeal another try. At this point, I found once again the same nonsensical solutions online, got equally frustrated about the fact that they even existed, and decided to find the real answer to my problem on my own.</p><p>Yes, this is mostly a rant about the Internet being littered with misleading answers of the kind &ldquo;I reinstalled glibc and my problem is gone!&rdquo;. But this is also the tale of a troubleshooting session&mdash;and you know I like to blog about those.</p><div class="container action-highlight p-4 my-4 d-md-none"><div class="row text-center"><p>A blog on operating systems, programming languages, testing, build systems, my own software
projects and even personal productivity. Specifics include FreeBSD, Linux, Rust, Bazel and
EndBASIC.</p></div><div class=row><div class=col><div class=form-group><form action=https://endtracker.azurewebsites.net/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/subscribers/add method=post><input type=text name=email placeholder="Enter your email" class="form-control input-sm text-center my-1">
<button type=submit class="btn btn-primary btn-block my-1">Subscribe</button></form></div></div></div><div class="row px-2"><div class="col col-sm-5 text-left"><small><span class=subscriber-count>0</span> subscribers</small></div><div class="col col-sm-7 text-right"><p><a rel=me href=https://mastodon.online/@jmmv><img src=/images/badges/mastodon-logo.svg width=32px height=32px alt="Follow @jmmv on Mastodon">
</a><a href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fjmmv.dev%2F&amp;screen_name=jmmv"><img src=/images/badges/Twitter_logo_blue.svg width=32px height=32px alt="Follow @jmmv on Twitter">
</a><a href=/feed.xml><img src=/images/badges/feed-icon-28x28.png alt="RSS feed"></a></p></div></div></div><h1 id=first-steps>First steps</h1><p>Before even unplugging the Pi from its physical network link, I had to configure its WiFi connection so that I could use it on the dining table. To do so, I was going to need to run more than one command as root so, in preparation for that, I started a root shell. I was helpfully greeted by the following:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>jmmv@rpi3:~$ sudo su -
</span></span><span class=line><span class=cl>Wi-Fi is currently blocked by rfkill.
</span></span><span class=line><span class=cl>Use raspi-config to set the country before use.
</span></span><span class=line><span class=cl>jmmv@rpi3:~#
</span></span></code></pre></div><p>Nice. Somehow Raspbian expects that what one most likely wants to do after becoming root is to configure the WiFi and it points us in the right direction. That&rsquo;s&mldr; a bold assumption, but hey, it was pretty accurate.</p><p>In any case, this was the first time I heard of rfkill. From the name, I assumed that this controlled some kind of kill switch for all radio devices in the system&mdash;the kind of switch you would need to implement an &ldquo;airplane mode&rdquo; feature. I further assumed, based on this message, that rfkill was active because one needs to know the location of the device to decide which radio frequencies can be used.</p><p>I did as told: I ran <code>raspi-config</code>, went into the network configuration options to set up the WiFi, selected the right country, joined a WiFi network, and dropped back into the shell. As I did that, the WiFi connection was up and running and <code>rfkill</code> reported the right thing:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>root@rpi3:~# ifconfig | grep wlan0
</span></span><span class=line><span class=cl>wlan0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
</span></span><span class=line><span class=cl>root@rpi3:~# rfkill
</span></span><span class=line><span class=cl>ID TYPE      DEVICE      SOFT      HARD
</span></span><span class=line><span class=cl> 0 wlan      phy0   unblocked unblocked
</span></span><span class=line><span class=cl> 1 bluetooth hci0     blocked unblocked
</span></span></code></pre></div><p>Seeing this and knowing from past experience that the <code>raspi-config</code> setting changes are permanent, I tried to SSH into the Pi over the WiFi adapter, confirmed that it was working, shut the system down, unplugged the Raspberry Pi from the network, brought it into the house from the garage, turned it on and&mldr; it wasn&rsquo;t reachable over WiFi anymore. What the&mldr;!?</p><h1 id=thinking-about-the-problem>Thinking about the problem</h1><p>This did not make any sense. The instructions told me to configure a country and I had set one up, but somehow that was insufficient. Interestingly, though, logging back in as <code>root</code> showed me the same warning about having to configure a country&mldr; so I double-checked things.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>jmmv@rpi3:~$ sudo su -
</span></span><span class=line><span class=cl>Wi-Fi is currently blocked by rfkill.
</span></span><span class=line><span class=cl>Use raspi-config to set the country before use.
</span></span><span class=line><span class=cl>root@rpi3:~# rg country /etc/
</span></span><span class=line><span class=cl>/etc/wpa_supplicant/wpa_supplicant.conf
</span></span><span class=line><span class=cl>3:country=US
</span></span><span class=line><span class=cl>... and more matches ...
</span></span></code></pre></div><p>The country seemed to be configured properly in persistent storage in a place that made sense but:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>root@rpi3:~# rfkill
</span></span><span class=line><span class=cl>ID TYPE      DEVICE      SOFT      HARD
</span></span><span class=line><span class=cl> 0 wlan      phy0     blocked unblocked
</span></span><span class=line><span class=cl> 1 bluetooth hci0     blocked unblocked
</span></span></code></pre></div><p>The WiFi adapter was indeed back to the blocked state. Why? As you might imagine, running the Raspberry Pi in a headless state and with a WiFi connection <em>surely</em> has to be a well-anticipated scenario, which explains why logging in as root has, of all things, a check for the WiFi state and a pointer to configure it. The WiFi should work without extra effort.</p><h1 id=initial-research>Initial research</h1><p>I don&rsquo;t remember how exactly I came across this, but I ended up noticing the following files:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>jmmv@rpi3:~# fd rfkill /lib/systemd/
</span></span><span class=line><span class=cl>/lib/systemd/system/systemd-rfkill.service
</span></span><span class=line><span class=cl>/lib/systemd/system/systemd-rfkill.socket
</span></span><span class=line><span class=cl>/lib/systemd/systemd-rfkill
</span></span></code></pre></div><p>As it turns out, there is a systemd service to manage the rfkill state. Looking at its manual page (while shocked that one even existed):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>SYSTEMD-RFKILL.SERVICE(8)   systemd-rfkill.service   SYSTEMD-RFKILL.SERVICE(8)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME
</span></span><span class=line><span class=cl>       systemd-rfkill.service, systemd-rfkill.socket, systemd-rfkill ‚Äì Load
</span></span><span class=line><span class=cl>       and save the RF kill switch state at boot and change
</span></span></code></pre></div><p><code>systemd-rfkill</code> is a shutdown service that saves the blocked/unblocked state of rfkill and restores it at system startup time. It seems that this whole rfkill thing was well-thought after all. But this finding meant that rfkill should have remained unblocked after the reboot. And it didn&rsquo;t. So <em>this</em> is the question that had to be answered.</p><h1 id=trying-to-find-an-answer-online>Trying to find an answer online</h1><p>Searching online for a solution, using obvious queries like <code>raspberry pi enable wifi boot rfkill</code>, resulted in me finding the following &ldquo;solutions&rdquo;:</p><ul><li><p><strong>Disable rfkill via a kernel command line setting and ask systemd to not restore state.</strong> Sure, that&rsquo;ll work. But it&rsquo;s&mldr; drastic? Why would I have to do that when the system seems to be prepared to &ldquo;just work&rdquo; after a <code>raspi-config</code>? Why should I disable a core feature that&rsquo;s installed by default to make headless WiFi work? This will &ldquo;break&rdquo; whatever thing is using rfkill during the boot process to disable the network, and it will possibly break any &ldquo;airplane mode&rdquo;-like toggles that might exist in the UI. Not that I care about the UI, but still.</p></li><li><p><strong>Add a systemd startup script to force rfkill to the unblocked state.</strong> Another thing that will work. But why should I do that? This will just paper over whatever exists in the boot process that disables the network after <code>systemd-rfkill</code> has done its thing. It does not address the root cause.</p></li><li><p><strong>Create a WiFi configuration file in the boot partition.</strong> OK, maybe this one makes sense. Maybe if the system knows to configure the WiFi early enough during the boot process, it knows that the WiFi must remain enabled later on. A bit of research proved this solution wrong too though. I stumbled upon <code>/lib/systemd/system/raspberrypi-net-mods.service</code>, which is the boot code that handles this feature, and it reads like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[Unit]</span>
</span></span><span class=line><span class=cl><span class=na>Description</span><span class=o>=</span><span class=s>Copy user wpa_supplicant.conf</span>
</span></span><span class=line><span class=cl><span class=na>ConditionPathExists</span><span class=o>=</span><span class=s>/boot/wpa_supplicant.conf</span>
</span></span><span class=line><span class=cl><span class=na>Before</span><span class=o>=</span><span class=s>dhcpcd.service</span>
</span></span><span class=line><span class=cl><span class=na>After</span><span class=o>=</span><span class=s>systemd-rfkill.service</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Service]</span>
</span></span><span class=line><span class=cl><span class=na>Type</span><span class=o>=</span><span class=s>oneshot</span>
</span></span><span class=line><span class=cl><span class=na>RemainAfterExit</span><span class=o>=</span><span class=s>yes</span>
</span></span><span class=line><span class=cl><span class=na>ExecStart</span><span class=o>=</span><span class=s>/bin/mv /boot/wpa_supplicant.conf /etc/wpa_supplicant/wpa_supplicant.conf</span>
</span></span><span class=line><span class=cl><span class=na>ExecStartPost</span><span class=o>=</span><span class=s>/bin/chmod 600 /etc/wpa_supplicant/wpa_supplicant.conf</span>
</span></span><span class=line><span class=cl><span class=na>ExecStartPost</span><span class=o>=</span><span class=s>/usr/sbin/rfkill unblock wifi</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Install]</span>
</span></span><span class=line><span class=cl><span class=na>WantedBy</span><span class=o>=</span><span class=s>multi-user.target</span>
</span></span></code></pre></div><p>This snippet runs when <code>/boot/wpa_supplicant.conf</code> is present (<code>ConditionPathExists</code>), but all it does is move that file to the right place and unblocks the WiFi using the <code>rfkill unblock wifi</code> command&mdash;the same one that <code>raspi-config</code> invokes and the command I had already tried to run by hand. The key insight is that because this unit moves the file, <em>it only runs once</em>. That makes sense if you look at this unit as a first-time setup action for headless installations, but it had no chance of fixing my problem.</p></li></ul><p>So no. None of these &ldquo;solutions&rdquo; address the root cause. They are hacks and workarounds that may achieve the desired outcome, but they don&rsquo;t explain <em>why</em> the <code>systemd-rfkill</code> automation, which is built into the system and should restore the changes made by <code>raspbi-config</code>, isn&rsquo;t working as designed.</p><h1 id=proper-troubleshooting>Proper troubleshooting</h1><p>Given that these answers were all misguided, I had to do some extra work to reach the true solution.</p><p>The first question to answer was: did the <code>systemd-rfkill</code> service even work fine? It took me a bit of fiddling to discover how to enable debug logging in systemd, but once I did that, I could confirm that this service was indeed working fine. The service correctly persisted the disabled state to a file and restored it on the next boot.</p><p>This meant that there had to be <em>something else</em> in the boot process that disabled the WiFi after <code>systemd-rfkill</code> had run. The question was finding what that was, and having this knowledge meant I could better scope my next searches a bit more accurately.</p><p>My next thought took me to NetworkManager. I have had my previous fights with this service in the past, so I thought that maybe this was installed on the system to handle the state of network connections in the UI. I do have the standard Raspbian desktop installed but I had no easy way to log into it&mldr; so verifying this wasn&rsquo;t exactly trivial. (In retrospect, I think that if I had gone through the hassle of logging into the UI and clicked on whichever button exists to enable the WiFi, my problems would have been resolved immediately. But then I wouldn&rsquo;t have gained all of this knowledge.)</p><p>Fear not though. NetworkManager has a CLI to manipulate its state so I could use that. Except for the fact that NetworkManager was nowhere to be seen on the system. Dead end.</p><p>My next step was to look into the standard Debian configuration under <code>/etc/network/</code>, but I couldn&rsquo;t find anything obvious either. Actually, I couldn&rsquo;t find <em>anything</em> because the interfaces aren&rsquo;t apparently configured there at all anymore. Yay for modern Linux?</p><p>It is then that I reverted to searching online (I don&rsquo;t remember the right search terms though) and I ended in yet another forum that talked about connman. And bingo! I did have connman installed and it sounded like the same NetworkManager thing I had seen before. Running a <code>connman enable wifi</code> was all it took to mark the WiFi link enabled and get the right fix in place. And by &ldquo;right fix&rdquo; I mean a fix that works in conjuction with the way the whole system is expected to run, not in spite of it.</p><p>In other words: it was connman that was kicking in after the <code>systemd-rfkill</code> startup script, and it was connman the one that was re-disabling the WiFi because connman thought that it had to be disabled. Now, as to why I have connman installed and whether it should be there or not&mldr; I do not know. This Raspbian installation has been in place for years now and has been upgraded a few times, so my guess is that <code>connman</code> is there to support the lightweight Raspbian desktop, and at some point in the past I logged into it and clicked on the button to disable the WiFi.</p><h1 id=the-ai-future>The AI future</h1><p>The Internet being polluted by wrong answers obviously impacts everyone, from beginner engineers and sysadmins that will not know/care enough to find the true root causes behind problems, to our new AI overlords which will outright lie to us.</p><p>Or will they? Let&rsquo;s try to get an answer from Bing&rsquo;s AI-powered new search engine:</p><blockquote><p>Q: I enabled the WiFi on the Raspberry Pi with raspi-config but, after a reboot, rfkill reports that the WiFi is blocked. How do I fix it?</p><p>A: You can try running the command sudo rfkill unblock wifi to unblock the wifi. If that doesn‚Äôt work, you can try adding the command rfkill unblock all to /etc/rc.local file before the line that says exit 0. This will ensure that the command is run at boot time and should unblock the wifi.</p></blockquote><p>Yeah, no. While that might have the right effect as described earlier, it&rsquo;s not the correct answer. But I <em>know</em> the answer, so I can cheat and prompt the question towards what I think the problem really is:</p><blockquote><p>Q: But why doesn&rsquo;t the rfkill unblocked state persist after the reboot? The systemd unit says it should.</p><p>A: The reason why the rfkill unblocked state doesn&rsquo;t persist after reboot is because the Network Manager is blocking it back¬π. You can try creating a service to unblock the wifi devices at boot time. Here&rsquo;s how you can do it:
&mldr; snippet to modify systemd &mldr;</p></blockquote><p>Oh wow, I&rsquo;m actually surprised. This answer was pretty close!</p><blockquote><p>Q: But I do not have NetworkManager installed. What else could it be?</p><p>A: If you don&rsquo;t have NetworkManager installed, then it could be that the wifi is being blocked by the kernel. You can try adding the following line to <code>/etc/modprobe.d/raspi-blacklist.conf</code> file:
&mldr; more steps &mldr;</p></blockquote><p>Back to the wrong heavy-handed solution of fully disabling rfkill. Bing&mldr; you were soooo close, but yet so far. Finally:</p><blockquote><p>Q: Could it be connman?</p><p>A: Yes, it could be connman. You can try disabling connman by running the following command:
&mldr; steps to fully disable &mldr;</p></blockquote><p>Of course it could obviously be connman&rsquo;s fault, but the answer is wrong. I might want to have connman installed and the system ought to work with it (it was there by default after all). Uninstalling random system components isn&rsquo;t usually the answer.</p><hr><p>Is there any moral to this story? Sure there is, the usual one: in order to solve a problem, you must always understand what the root cause really is. This typically requires understanding how the system works top-to-bottom and reasoning about what the behavior should be end-to-end. Only then you can come up with the right fix. Asking &ldquo;why&rdquo; several times in a row tends to work well in discovering what you might be missing. Oh, and this all applies to software bugs as well: the next time you find yourself adding a nullness check to fix a crash&mldr; keep digging.</p><p>It would be pretty funny if <em>my</em> root-causing in this post was <em>also</em> wrong. If that&rsquo;s the case, don&rsquo;t hesitate to say so!</p></article></div></div><div class="container post-links"><div class=row><div class="col mr-auto text-left"><span><a href=https://jmmv.dev/2023/08/rust-static-dispatch-failed-experiment.html>&#171; Previous</a></span></div><div class="col text-center"><span><a href=/archive.html>All posts</a></span></div><div class="col ml-auto text-right"><span><a href=https://jmmv.dev/2023/08/costs-exposed-monorepo-multirepo.html>Next &#187;</a></span></div></div></div><div class="container post-votes"><div class=row><div class="col-lg-4 my-2"><div class=row><div class=col><a onclick=voteThumbsUp() class="btn btn-block btn-outline-success" id=thumbs-up-btn>üëç
(<span id=thumbs-up-count>0</span>)</a></div><div class=col><a onclick=voteThumbsDown() class="btn btn-block btn-outline-danger" id=thumbs-down-btn>üëé
(<span id=thumbs-down-count>0</span>)</a></div></div></div><div class="col-lg-8 my-2 d-none d-sm-block"><div class=row><div class="col-md-4 text-center"><a href="https://www.reddit.com/submit?title=Raspberry+Pi+3%2C+rfkill%2C+and+real+root+causing&amp;url=https%3A%2F%2Fjmmv.dev%2F2023%2F08%2Frpi3-rfkill-root-causing.html" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/reddit.png alt=Reddit width=24 height=24></a></div><div class="col-md-4 text-center"><a href="https://news.ycombinator.com/submitlink?t=Raspberry+Pi+3%2C+rfkill%2C+and+real+root+causing&amp;u=https%3A%2F%2Fjmmv.dev%2F2023%2F08%2Frpi3-rfkill-root-causing.html" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/ycombinator.png alt="Hacker News" width=24 height=24></a></div><div class="col-md-4 text-center"><a href="https://twitter.com/intent/tweet?status=Raspberry+Pi+3%2C+rfkill%2C+and+real+root+causing+%E2%80%94+https%3A%2F%2Fjmmv.dev%2F2023%2F08%2Frpi3-rfkill-root-causing.html+%E2%80%94+cc+%40jmmv" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/Twitter_Social_Icon_Circle_Color.png alt=Twitter width=24 height=24></a></div></div></div></div><div class="row my-4" id=postCommentRow><div class=col><div class=media><img class=mr-3 src=/octicons/pencil.svg width=32px height=32px><div class="media-body container"><form method=post id=newPost><div class=row><div class="col my-1"><textarea class=form-control rows=1 id=postCommentContent onclick=showPostComment() placeholder="Leave a comment"></textarea></div></div><div class="row newPostControls" style=display:none><div class="col my-1 form-group"><label for=postCommentAuthor>Your name (optional):</label>
<input type=text class=form-control id=postCommentAuthor></div></div><div class="row newPostControls" style=display:none><div class="col my-1 form-group"><label for=postCommentEmail>Your email (optional):</label>
<input type=text class=form-control type=email id=postCommentEmail>
<small class="form-text text-muted">Invisible to all readers; if provided, you will receive notifications when replied to (not implemented yet)</small></div></div><div class=row id=postCommentError style=display:none><div class="col mt-1 alert-danger"><p></p></div></div><div class="row newPostControls" style=display:none><button class="col-md-3 my-1 btn btn-primary" type=submit id=submitCommentButton>Post</button>
<small class="col-md-9 my-1 text-muted">Comments are subject to moderation. This feature is experimental and is powered by <a href=/software/endtracker.html>EndTRACKER</a>. If you experience any issues, please <a href=/about.html#contact>contact me off-band</a>.</small></div></form></div></div></div></div><script>function hidePostComment(){var t,e=document.getElementById("postCommentContent");e.rows=1,e.value="",t=document.getElementsByClassName("newPostControls"),Array.prototype.forEach.call(t,function(e){e.style.display="none"})}function showPostComment(){var e,t=document.getElementById("postCommentContent");t.rows=5,e=document.getElementsByClassName("newPostControls"),Array.prototype.forEach.call(e,function(e){e.style.display=""})}const form=document.querySelector("#newPost");form.onsubmit=function(e){e.preventDefault();let t=document.getElementById("postCommentAuthor").value,n=document.getElementById("postCommentEmail").value,s=document.getElementById("postCommentContent").value;postComment(t,n,s,hidePostComment)}</script></div></div><div class="col-md-3 sidebar d-none d-md-block"><div class=row><div class="col text-center p-2"><p><a href=/about.html class=clear-link><img src=/images/avatars/20181124-snow.jpg class="rounded-circle shadow my-2" style=width:100px><br><b>Julio Merino</b><br>A blog on operating systems, programming languages, testing, build systems, my own software
projects and even personal productivity. Specifics include FreeBSD, Linux, Rust, Bazel and
EndBASIC.</a></p><div class=row><div class=col><div class=form-group><form action=https://endtracker.azurewebsites.net/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/subscribers/add method=post><input type=text name=email placeholder="Enter your email" class="form-control input-sm text-center my-1">
<button type=submit class="btn btn-primary btn-block my-1">Subscribe</button></form></div></div></div><div class="row px-2"><div class="col-sm-5 text-left"><small><span class=subscriber-count>0</span> subscribers</small></div><div class="col-sm-7 text-right"><p><a rel=me href=https://mastodon.online/@jmmv><img src=/images/badges/mastodon-logo.svg width=32px height=32px alt="Follow @jmmv on Mastodon">
</a><a href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fjmmv.dev%2F&amp;screen_name=jmmv"><img src=/images/badges/Twitter_logo_blue.svg width=32px height=32px alt="Follow @jmmv on Twitter">
</a><a href=/feed.xml><img src=/images/badges/feed-icon-28x28.png alt="RSS feed"></a></p></div></div></div></div><div class=row><div class=col><h2>Featured software</h2><ul><li class=overflow-ellipsis><a href=https://www.endbasic.dev/ target=_blank>EndBASIC: Online BASIC+DOS env</a></li><li class=overflow-ellipsis><a href=https://endtracker.azurewebsites.net/ target=_blank>EndTRACKER: Services for static sites</a></li></ul></div></div><div class=row><div class=col><h2>Featured posts</h2><ul><li class=overflow-ellipsis><a href=/2023/06/fast-machines-slow-machines.html>Fast machines, slow machines</a></li><li class=overflow-ellipsis><a href=/2022/12/endbasic-0.10.html>EndBASIC 0.10: Core language, evolved</a></li><li class=overflow-ellipsis><a href=/2022/10/bye-microsoft-hi-snowflake.html>Farewell, Microsoft; hello, Snowflake!</a></li><li class=overflow-ellipsis><a href=/2022/05/rust-is-hard-but-does-it-matter.html>Rust is hard, yes, but does it matter?</a></li><li class=overflow-ellipsis><a href=/2022/04/rust-traits-and-dependency-injection.html>Rust traits and dependency injection</a></li><li class=overflow-ellipsis><a href=/2022/03/a-year-on-windows-intro.html>A year on Windows: Introduction</a></li><li class=overflow-ellipsis><a href=/2021/04/always-be-quitting.html>Always be quitting</a></li><li class=overflow-ellipsis><a href=/2021/02/google-monorepos-and-caching.html>How does Google keep build times low?</a></li><li class=overflow-ellipsis><a href=/2020/12/google-no-clean-builds.html>How does Google avoid clean builds?</a></li><li class=overflow-ellipsis><a href=/2020/12/unit-testing-a-console-app.html>Unit-testing a console app (a text editor)</a></li><li class=overflow-ellipsis><a href=/essays.html#featured>More...</a></li></ul></div></div></div></div></div><footer class=container-fluid><div class=row><div class="col-4 order-2 text-right"><p class=float-right><a href=#>Back to top</a></p></div><div class="col-8 order-1 mr-auto"><p>Copyright 2004&ndash;2024
Julio Merino</p></div></div></footer><script type=module>
  import { addAnchorsToHeaders, addElementClasses, BatchClient } from "\/js\/main.0de73782e9e0fbcb4184fb5793949b3b0d0ada16455df89320415b4dcc052f88.js";

  var batchClient = new BatchClient(SITE_ID);
  batchClient.doAll({
    put_request: true, get_comments: true, get_subscriber_count: true, get_votes: true });

  window.voteThumbsUp = function() { batchClient.voteThumbsUp(); }
  window.voteThumbsDown = function() { batchClient.voteThumbsDown(); }

  window.postComment = function(...args) {
    batchClient.postComment(...args);
  };

  addAnchorsToHeaders();
  addElementClasses();
</script><noscript><img src=https://hugo-dynamic.jmmv.dev/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/pages/aHR0cHM6Ly9qbW12LmRldi8yMDIzLzA4L3JwaTMtcmZraWxsLXJvb3QtY2F1c2luZy5odG1s/stamp.gif style=display:none></noscript></body></html>