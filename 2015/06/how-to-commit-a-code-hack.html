<!DOCTYPE html>
<html>
  <head>
    

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head
      content must come *after* these tags -->

<meta name="description"
      content="You are the developer in charge to resolve a problem and have prepared a changelist to fix the bug. You need the changelist to be reviewed by someone else be...">
<meta name="author" content="Julio Merino">

<meta content="http://julio.meroh.net/2015/06/how-to-commit-a-code-hack.html" property="og:url">

<link rel="canonical" href="http://julio.meroh.net/2015/06/how-to-commit-a-code-hack.html">
<link rel="alternate" type="application/rss+xml" title="Julio Merino" href="http://julio.meroh.net/feed.xml" />

<link rel="stylesheet" href="/css/main.css">

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="/js/html5shiv-3.7.2.min.js"></script>
  <script src="/js/respond-1.4.2.min.js"></script>
<![endif]-->

    <title>How to commit a code hack and not perish along the way - Julio Merino</title>
    <meta content="How to commit a code hack and not perish along the way - Julio Merino" property="og:title">
  </head>

  <body>
    <header class="site-header">

<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed"
              data-toggle="collapse" data-target="#navbar"
              aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Julio Merino</a>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
          
            
              
                <li><a class="page-link"
                href="/about/"
                >About</a></li>
              
            
          
        
          
            
          
        
          
            
          
        
          
            
              
                <li><a class="page-link"
                href="/essays/"
                >Essays</a></li>
              
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
              
                <li><a class="page-link"
                href="/software/"
                >Software</a></li>
              
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
              
                <li><a class="page-link"
                href="/work/"
                >Work</a></li>
              
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
          
            
          
        
      </ul>

      <form class="navbar-form navbar-right" method="get" role="search"
            action="http://www.google.com/search">
          <div class="form-group">
            <input type="text" name="query" class="form-control"
                   placeholder="Search">
            <input type="hidden" name="sitesearch" value="http://julio.meroh.net">
          </div>
          <button type="submit" value="Search" class="btn btn-default">
            <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
          </button>
      </form>
    </div>
  </div>
</nav>

</header>


    <div class="page-header">
      <div class="container">
        <h1>How to commit a code hack and not perish along the way</h1>

        <p><!-- From http://alanwsmith.com/jekyll-liquid-date-formatting-examples -->

June

19th,
  
2015
at
16:00 UTC
        
        </p>

        
        <img src="/images/2015-06-19-header.jpg"
            class="cover-image" />
        
      </div>
    </div>

    <div class="container">
      <article>
        <p><strong>You are the developer in charge to resolve a problem and have prepared a <em><a href="http://svnbook.red-bean.com/en/1.7/svn.advanced.changelists.html">changelist</a></em> to fix the bug. You need the changelist to be reviewed by someone else before checkin. Your changelist <em>is</em> an ugly hack.</strong></p>

<p><strong>What kind of response are you gonna get from your reviewer?  Well as with everything: <em>it depends!</em></strong></p>

<p>(Cover image courtesy of <a href="http://www.startupstockphotos.com/">http://www.startupstockphotos.com/</a>.)</p>

<hr />

<p>If you have:</p>

<ol>
  <li>clearly stated upfront that the changelist <em>is</em> a hack,</li>
  <li>explained <em>how</em> it is a hack,</li>
  <li><em>justified</em> that the hack is the right thing to do at this moment, and</li>
  <li>outlined what the <em>real solution</em> to get rid of the hack would be</li>
</ol>

<p><em>then</em> your reviewer will most likely just accept the change without fuss (!) and will proceed to review its contents per se. But if you miss <em>any</em> of those steps, then your reviewer is going to be super-critical about your changelist <em>and</em> any further related changes you may want to commit.</p>

<hr />

<p>The purpose of this essay is to elaborate on the guidelines shown above. To do so, I will attempt to justify why these guidelines are important and why following them from the ground-up is a recipe for a more pleasant review process.</p>

<p>As we shall see, the ideas discussed in here apply equally to any changelist that might cause the reviewer to question fundamentals about your change or your knowledge of the system. Such changelists include:</p>

<ul>
  <li>bug fixes that do not address the real root cause of the bug;</li>
  <li>the implementation of new features without respecting the fundamental architecture of the project;</li>
  <li>or the disregard of well-established development practices in your organization such as not providing unit tests or dumping huge amounts of code developed “in the dark” into the main tree.</li>
</ul>

<p>To keep the rest of the text simple, <strong>I will focus exclusively on changelists that attempt to “fix” a bug without addressing the root cause of the problem</strong>.</p>

<h1 id="lets-dive-in">Let’s dive in</h1>

<h2 id="i-understand-the-problem">i) Understand the problem</h2>

<p>Question: Are <em>you</em> aware that your proposed fix is a gross hack?</p>

<p>If you do, great: you are already on the right track! If you do not, then you are <a href="https://en.wikipedia.org/wiki/DunningKruger_effect">missing details</a> on the problem at hand—and missing details when fixing a bug is dangerous because: you probably won’t fix the root cause; your “fix” may obscure the problem in most cases, but not all; or your “fix” may be introducing other bugs or changing the semantics of the code logic.</p>

<p><strong>To the reviewer:</strong> everything stated here applies <em>equally</em> to you. If you lack fundamental knowledge on the codebase in which the change is being made, <em>you are not qualified to review the change</em> because you cannot predict its ramifications throughout the system. Find someone else to act as (secondary) reviewer—assuming “that someone else” exists and is still available which is not always the case.</p>

<p>Checking in code developed under these circumstances is harmful in the medium to long term. Do not check in code if you or your reviewer do not have deep knowledge of the system to predict the effects of the fix. And always try to pick reviewers that will be strict on this topic!</p>

<h2 id="ii-state-upfront-that-the-change-is-wrong">ii) State upfront that the change is wrong</h2>

<p>If you know your changelist is a hack, mention this fact upfront in the changelist description.</p>

<p>If you do not, then your reviewer can assume any of the following: that you do not know your change is a hack (back to step <em>i</em>); that you do not think submitting the hack is a bad idea (when common sense would say otherwise); or that you just want to sneak in a bad change due to laziness (maybe?).</p>

<p>None of the thoughts above sound good, do they? Correct! And that’s why if they cross your reviewer’s mind you will receive much additional questioning.  Don’t let that happen: clarify things upfront to avoid getting into this situation.</p>

<h2 id="iii-explain-upfront-why-the-change-is-wrong">iii) Explain upfront why the change is wrong</h2>

<p>Just as important as it is to acknowledge that a change is a hack is the fact of explaining <em>why</em> it is a hack. Explaining why, preferably in the changelist description, clearly demonstrates that you understand that you changelist is not the greatest solution and that you can predict the implications of your ugly change.</p>

<h2 id="iv-justify-checking-in-the-suboptimal-changelist">iv) Justify checking in the suboptimal changelist</h2>

<p>Explaining why the changelist is wrong is not sufficient, unfortunately. You still need to convince your reviewer that your suboptimal changelist is the right thing to do at this point in time—and if you are submitting a changelist for review that you <em>know</em> is “incorrect”, you will surely have reasons for doing so. Say them!</p>

<p>Reasons for checking in a suboptimal changelist may include: mitigating the effects of an outage when the root cause has not yet been identified or when fixing the root cause is a major effort; being able to deliver a feature sooner; setting up a transitional state for some other upcoming code; or applying a temporary change that will soon be removed by a refactoring.</p>

<p>Remember: we are engineering solutions to problems and, as is often said: “engineering is the science of tradeoffs”. Many times, all things considered, a hack is the best approach to resolving the problem at hand. All it takes to commit such hack is to detail your train of thought and to convince your reviewer that it is indeed the right thing to go.</p>

<h2 id="v-detail-what-the-real-solution-would-be">v) Detail what the real solution would be</h2>

<p>Having justified why you want to submit a hack, you should go the extra mile by <em>filing a bug</em> and <em>adding a TODO to your code</em> detailing what it would take to fix the problem properly.</p>

<p>Explaining your preferred real solution, in broad terms, demonstrates that you fully understand the effect of your hack and that you have a mental plan on how it would be removed in the future.</p>

<p>Mind you: having this mental plan is essential because knowing how the future will look like guides you in implementing the hack in a less obtuse way. A hackish changelist can have many forms and, usually, if you know what will follow later to get rid of it, your hack will be easier to digest. For example: your hack may be localized in a single file for easy removal in a follow-up changelist or, the opposite, it may be abstracted in such a way to not get in the way of regular development.</p>

<h1 id="simply-put">Simply put</h1>

<ul>
  <li>Be honest and transparent about why you are writing a changelist in a specific way.</li>
  <li>Acknowledge upfront that the change you want to submit is not the best for reasons X, Y, and Z.</li>
  <li>Demonstrate your full understanding of the issue by justifying the tradeoffs of committing your hack and explaining how you’d get rid of the hack in the future.</li>
</ul>

<p>These are the secrets to a smoother check-in process—even for those changes you will eventually regret. Do them and hope for an:</p>

<blockquote>
  <p><em>LGTM. You’ll burn in hell for this.</em></p>
</blockquote>

      </article>

      <div class="post-links">
        <p>
          

          
          <a href="https://medium.com/@jmmv/how-to-commit-a-code-hack-and-not-perish-along-the-way-7059dac49df6">Posted on
          Medium</a>
          &middot;
          

          <a href="/feed.xml">Subscribe
          via RSS</a>
          &middot;
          <a href="/blog/">Go to posts index</a>
        </p>

        <form class="form-inline"
            action="https://feedburner.google.com/fb/a/mailverify"
            method="post"
            target="popupwindow"
            onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=jmmv', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
          <div class="form-group form-group-sm">
            <input type="text" style="width: 400px" name="email"
                    placeholder="Enter your email to subscribe to new posts"
                    class="form-control input-sm"/>
          </div>
          <button type="submit" value="Subscribe"
                  class="btn btn-default btn-sm">
            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
          </button>
          &nbsp;&nbsp;&nbsp;Delivered by
          <input type="hidden" value="jmmv" name="uri"/>
          <input type="hidden" name="loc" value="en_US"/>
          <a href="https://feedburner.google.com" target="_blank">FeedBurner</a>
        </form>
      </div>

      
      <div id="disqus_thread">
        <script>
          var disqus_config = function () {
            this.page.url = "http://julio.meroh.net/2015/06/how-to-commit-a-code-hack.html";
            this.page.identifier = "/2015/06/how-to-commit-a-code-hack";
          };
          (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');

            s.src = '//jmmv.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments
          powered by Disqus.</a>
        </noscript>
      </div>
      
      
    </div>

    <div class="container">
  <footer>
    <p class="pull-right"><a href="#">Back to top</a></p>
    <p>Copyright 2016 Julio Merino</p>
  </footer>
</div>

<script src="/js/jquery-1.11.2.min.js">
</script>
<script
  src="/css/bootstrap.min.js">
</script>

<script src="/js/auto-toc-1.0.0.dist.js">
</script>

<script>
$("p:contains('NOTE: ')").addClass("callout callout-info");
$("p:contains('IMPORTANT: ')").addClass("callout callout-info");
$("p:contains('WARNING: ')").addClass("callout callout-warning");
$("p:contains('DANGER: ')").addClass("callout callout-danger");
</script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
  m.parentNode.insertBefore(a,m)})(window,document,'script',
  '//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63557333-1', 'auto');
  ga('send', 'pageview');
</script>


  </body>
</html>
