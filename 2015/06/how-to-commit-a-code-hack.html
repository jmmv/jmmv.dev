<!doctype html><html lang=en xmlns=http://www.w3.org/1999/xhtml xmlns:fb=http://ogp.me/ns/fb#><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:site_name" content="Julio Merino (jmmv.dev)"><meta property="twitter:site" content="@jmmv"><title>How to commit a code hack and not perish along the way - Julio Merino (jmmv.dev)</title>
<meta property="og:title" content="How to commit a code hack and not perish along the way - Julio Merino (jmmv.dev)"><meta property="twitter:title" content="How to commit a code hack and not perish along the way - Julio Merino ‚Ä¶"><meta name=description content="You are the developer in charge to resolve a problem and have prepared a changelist to fix the bug. You need the changelist to be reviewed by someone else before checkin. Your changelist is an ugly hack.
What kind of response are you gonna get from your reviewer? Well as with everything: it depends!
(Cover image courtesy of http://www.startupstockphotos.com/.)
If you have:
clearly stated upfront that the changelist is a hack, explained how it is a hack, justified that the hack is the right thing to do at this moment, and outlined what the real solution to get rid of the hack would be then your reviewer will most likely just accept the change without fuss (!) and will proceed to review its contents per se. But if you miss any of those steps, then your reviewer is going to be super-critical about your changelist and any further related changes you may want to commit.
"><meta property="og:description" content="You are the developer in charge to resolve a problem and have prepared a changelist to fix the bug. You need the changelist to be reviewed by someone else before checkin. Your changelist is an ugly hack.
What kind of response are you gonna get from your reviewer? Well as with everything: it depends!
(Cover image courtesy of http://www.startupstockphotos.com/.)
If you have:
clearly stated upfront that the changelist is a hack, explained how it is a hack, justified that the hack is the right thing to do at this moment, and outlined what the real solution to get rid of the hack would be then your reviewer will most likely just accept the change without fuss (!) and will proceed to review its contents per se. But if you miss any of those steps, then your reviewer is going to be super-critical about your changelist and any further related changes you may want to commit.
"><meta property="twitter:description" content="You are the developer in charge to resolve a problem and have prepared a changelist to fix the bug. You need the changelist to be reviewed by someone else before checkin. Your changelist is an ugly ‚Ä¶"><meta name=author content="Julio Merino"><meta property="twitter:creator" content="@jmmv"><meta name=generator content="Hugo 0.145.0"><meta property="og:url" content="https://jmmv.dev/2015/06/how-to-commit-a-code-hack.html"><meta property="og:type" content="blog"><meta property="twitter:card" content="summary"><link rel=canonical href=https://jmmv.dev/2015/06/how-to-commit-a-code-hack.html><link rel=alternate type=application/rss+xml title="Julio Merino (jmmv.dev)" href=/feed.xml><link rel=stylesheet href=/sass/main.min.cb91349cd93211a37e7d5dc131c35a170fc795721c03373cd05571327eea206b.css><link rel=stylesheet href=/css/chroma.css><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicons/favicon-96x96.png sizes=96x96><meta property="og:image" content="/images/2015-06-19-header.jpg"><meta property="twitter:image" content="https://jmmv.dev/images/2015-06-19-header.jpg"><script>const SITE_ID="e8da9f62-b7ac-4fe9-bf20-7c527199a376",BASE_URL="https://jmmv.dev/"</script></head><body><img src="https://hugo-dynamic.jmmv.dev/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/pages/aHR0cHM6Ly9qbW12LmRldi8yMDE1LzA2L2hvdy10by1jb21taXQtYS1jb2RlLWhhY2suaHRtbA==/stamp.gif" style=display:none>
<script>window.location.replace("https://medium.com/@jmmv/how-to-commit-a-code-hack-and-not-perish-along-the-way-7059dac49df6")</script><header class=site-header><nav class="navbar navbar-expand-md fixed-top navbar-dark bg-primary"><a class=navbar-brand href=/><img src=/images/favicons/favicon-30x30.png width=30 height=30 class="d-inline-block align-top" alt>
&nbsp;jmmv.dev
</a><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=/about.html>About</a></li><li class=nav-item><a class=nav-link href=/blog.html>Blog</a></li><li class=nav-item><a class=nav-link href=/resume.html>Resume</a></li><li class=nav-item><a class=nav-link href=/software.html>Software</a></li></ul><ul class="navbar-nav mr-4"><li class=nav-item><a class=nav-link href=/archive.html>Archive</a></li><li class=nav-item><a class=nav-link href=/series.html>Series</a></li><li class=nav-item><a class=nav-link href=/tags.html>Tags</a></li></ul><form class=form-inline method=get role=search action=https://www.google.com/search><div class=input-group><input type=search name=query class=form-control placeholder=Search aria-label=Search><div class=input-group-append><button type=submit value=Search class="btn btn-light">
<img src=/octicons/search.svg></button></div></div><input type=hidden name=sitesearch value=https://jmmv.dev/></form></div></nav></header><div class=page-header><div class=container><h1>How to commit a code hack and not perish along the way</h1><p>June 19, 2015 &#183;
About 6 minutes
&#183;
Tags:
<a href=/tags/best-practices>best-practices</a>, <a href=/tags/development>development</a>, <a href=/tags/essay>essay</a>, <a href=/tags/featured>featured</a>, <a href=/tags/software>software</a></p><p class=post-meta-p>This article was
<a href=https://medium.com/@jmmv/how-to-commit-a-code-hack-and-not-perish-along-the-way-7059dac49df6>originally published
on Medium</a>
and is replicated here <a href=/2016/01/medium-experiment-wrapup.html>for
archival purposes</a>.</p><figure class=cover-image><img src=/images/2015-06-19-header.jpg style=max-width:100%></figure></div></div><div class="container post-body"><div class=row><div class=col-md-9><div class=row><div class=col><article><p><strong>You are the developer in charge to resolve a problem and have prepared a <em><a href=http://svnbook.red-bean.com/en/1.7/svn.advanced.changelists.html>changelist</a></em> to fix the bug. You need the changelist to be reviewed by someone else before checkin. Your changelist <em>is</em> an ugly hack.</strong></p><p><strong>What kind of response are you gonna get from your reviewer? Well as with everything: <em>it depends!</em></strong></p><p>(Cover image courtesy of <a href=http://www.startupstockphotos.com/>http://www.startupstockphotos.com/</a>.)</p><hr><p>If you have:</p><ol><li>clearly stated upfront that the changelist <em>is</em> a hack,</li><li>explained <em>how</em> it is a hack,</li><li><em>justified</em> that the hack is the right thing to do at this moment, and</li><li>outlined what the <em>real solution</em> to get rid of the hack would be</li></ol><p><em>then</em> your reviewer will most likely just accept the change without fuss (!) and will proceed to review its contents per se. But if you miss <em>any</em> of those steps, then your reviewer is going to be super-critical about your changelist <em>and</em> any further related changes you may want to commit.</p><hr><p>The purpose of this essay is to elaborate on the guidelines shown above. To do so, I will attempt to justify why these guidelines are important and why following them from the ground-up is a recipe for a more pleasant review process.</p><p>As we shall see, the ideas discussed in here apply equally to any changelist that might cause the reviewer to question fundamentals about your change or your knowledge of the system. Such changelists include:</p><ul><li>bug fixes that do not address the real root cause of the bug;</li><li>the implementation of new features without respecting the fundamental architecture of the project;</li><li>or the disregard of well-established development practices in your organization such as not providing unit tests or dumping huge amounts of code developed &ldquo;in the dark&rdquo; into the main tree.</li></ul><p>To keep the rest of the text simple, <strong>I will focus exclusively on changelists that attempt to &ldquo;fix&rdquo; a bug without addressing the root cause of the problem</strong>.</p><h1 id=lets-dive-in>Let&rsquo;s dive in</h1><h2 id=i-understand-the-problem>i) Understand the problem</h2><p>Question: Are <em>you</em> aware that your proposed fix is a gross hack?</p><p>If you do, great: you are already on the right track! If you do not, then you are <a href=https://en.wikipedia.org/wiki/DunningKruger_effect>missing details</a> on the problem at hand&mdash;and missing details when fixing a bug is dangerous because: you probably won&rsquo;t fix the root cause; your &ldquo;fix&rdquo; may obscure the problem in most cases, but not all; or your &ldquo;fix&rdquo; may be introducing other bugs or changing the semantics of the code logic.</p><p><strong>To the reviewer:</strong> everything stated here applies <em>equally</em> to you. If you lack fundamental knowledge on the codebase in which the change is being made, <em>you are not qualified to review the change</em> because you cannot predict its ramifications throughout the system. Find someone else to act as (secondary) reviewer&mdash;assuming &ldquo;that someone else&rdquo; exists and is still available which is not always the case.</p><p>Checking in code developed under these circumstances is harmful in the medium to long term. Do not check in code if you or your reviewer do not have deep knowledge of the system to predict the effects of the fix. And always try to pick reviewers that will be strict on this topic!</p><h2 id=ii-state-upfront-that-the-change-is-wrong>ii) State upfront that the change is wrong</h2><p>If you know your changelist is a hack, mention this fact upfront in the changelist description.</p><p>If you do not, then your reviewer can assume any of the following: that you do not know your change is a hack (back to step <em>i</em>); that you do not think submitting the hack is a bad idea (when common sense would say otherwise); or that you just want to sneak in a bad change due to laziness (maybe?).</p><p>None of the thoughts above sound good, do they? Correct! And that&rsquo;s why if they cross your reviewer&rsquo;s mind you will receive much additional questioning. Don&rsquo;t let that happen: clarify things upfront to avoid getting into this situation.</p><h2 id=iii-explain-upfront-why-the-change-is-wrong>iii) Explain upfront why the change is wrong</h2><p>Just as important as it is to acknowledge that a change is a hack is the fact of explaining <em>why</em> it is a hack. Explaining why, preferably in the changelist description, clearly demonstrates that you understand that you changelist is not the greatest solution and that you can predict the implications of your ugly change.</p><h2 id=iv-justify-checking-in-the-suboptimal-changelist>iv) Justify checking in the suboptimal changelist</h2><p>Explaining why the changelist is wrong is not sufficient, unfortunately. You still need to convince your reviewer that your suboptimal changelist is the right thing to do at this point in time&mdash;and if you are submitting a changelist for review that you <em>know</em> is &ldquo;incorrect&rdquo;, you will surely have reasons for doing so. Say them!</p><p>Reasons for checking in a suboptimal changelist may include: mitigating the effects of an outage when the root cause has not yet been identified or when fixing the root cause is a major effort; being able to deliver a feature sooner; setting up a transitional state for some other upcoming code; or applying a temporary change that will soon be removed by a refactoring.</p><p>Remember: we are engineering solutions to problems and, as is often said: &ldquo;engineering is the science of tradeoffs&rdquo;. Many times, all things considered, a hack is the best approach to resolving the problem at hand. All it takes to commit such hack is to detail your train of thought and to convince your reviewer that it is indeed the right thing to go.</p><h2 id=v-detail-what-the-real-solution-would-be>v) Detail what the real solution would be</h2><p>Having justified why you want to submit a hack, you should go the extra mile by <em>filing a bug</em> and <em>adding a TODO to your code</em> detailing what it would take to fix the problem properly.</p><p>Explaining your preferred real solution, in broad terms, demonstrates that you fully understand the effect of your hack and that you have a mental plan on how it would be removed in the future.</p><p>Mind you: having this mental plan is essential because knowing how the future will look like guides you in implementing the hack in a less obtuse way. A hackish changelist can have many forms and, usually, if you know what will follow later to get rid of it, your hack will be easier to digest. For example: your hack may be localized in a single file for easy removal in a follow-up changelist or, the opposite, it may be abstracted in such a way to not get in the way of regular development.</p><h1 id=simply-put>Simply put</h1><ul><li>Be honest and transparent about why you are writing a changelist in a specific way.</li><li>Acknowledge upfront that the change you want to submit is not the best for reasons X, Y, and Z.</li><li>Demonstrate your full understanding of the issue by justifying the tradeoffs of committing your hack and explaining how you&rsquo;d get rid of the hack in the future.</li></ul><p>These are the secrets to a smoother check-in process&mdash;even for those changes you will eventually regret. Do them and hope for an:</p><blockquote><p><em>LGTM. You&rsquo;ll burn in hell for this.</em></p></blockquote></article></div></div><div class="container post-links"><div class=row><div class="col mr-auto text-left"><span><a href=https://jmmv.dev/2015/06/get-a-handle-on-email-subscriptions.html>&#171; Previous</a></span></div><div class="col text-center"><span><a href=/archive.html>All posts</a></span></div><div class="col ml-auto text-right"><span><a href=https://jmmv.dev/2015/09/my-coding-workflow.html>Next &#187;</a></span></div></div></div><div class="container post-votes"><div class=row><div class="col-lg-4 my-2"><div class=row><div class=col><a onclick=voteThumbsUp() class="btn btn-block btn-outline-success" id=thumbs-up-btn>üëç
(<span id=thumbs-up-count>0</span>)</a></div><div class=col><a onclick=voteThumbsDown() class="btn btn-block btn-outline-danger" id=thumbs-down-btn>üëé
(<span id=thumbs-down-count>0</span>)</a></div></div></div><div class="col-lg-8 my-2 d-none d-sm-block"><div class=row><div class="col-md-4 text-center"><a href="https://www.reddit.com/submit?title=How+to+commit+a+code+hack+and+not+perish+along+the+way&amp;url=https%3A%2F%2Fjmmv.dev%2F2015%2F06%2Fhow-to-commit-a-code-hack.html" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/reddit.png alt=Reddit width=24 height=24></a></div><div class="col-md-4 text-center"><a href="https://news.ycombinator.com/submitlink?t=How+to+commit+a+code+hack+and+not+perish+along+the+way&amp;u=https%3A%2F%2Fjmmv.dev%2F2015%2F06%2Fhow-to-commit-a-code-hack.html" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/ycombinator.png alt="Hacker News" width=24 height=24></a></div><div class="col-md-4 text-center"><a href="https://twitter.com/intent/tweet?status=How+to+commit+a+code+hack+and+not+perish+along+the+way+%E2%80%94+https%3A%2F%2Fjmmv.dev%2F2015%2F06%2Fhow-to-commit-a-code-hack.html+%E2%80%94+cc+%40jmmv" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/Twitter_Social_Icon_Circle_Color.png alt=Twitter width=24 height=24></a></div></div></div></div><div class="row my-4" id=postCommentRow><div class=col><div class=media><img class=mr-3 src=/octicons/pencil.svg width=32px height=32px><div class="media-body container"><form method=post id=newPost><div class=row><div class="col my-1"><textarea class=form-control rows=1 id=postCommentContent onclick=showPostComment() placeholder="Leave a comment"></textarea></div></div><div class="row newPostControls" style=display:none><div class="col my-1 form-group"><label for=postCommentAuthor>Your name (optional):</label>
<input type=text class=form-control id=postCommentAuthor></div></div><div class="row newPostControls" style=display:none><div class="col my-1 form-group"><label for=postCommentEmail>Your email (optional):</label>
<input type=text class=form-control type=email id=postCommentEmail>
<small class="form-text text-muted">Invisible to all readers; if provided, you will receive notifications when replied to (not implemented yet)</small></div></div><div class=row id=postCommentError style=display:none><div class="col mt-1 alert-danger"><p></p></div></div><div class="row newPostControls" style=display:none><button class="col-md-3 my-1 btn btn-primary" type=submit id=submitCommentButton>Post</button>
<small class="col-md-9 my-1 text-muted">Comments are subject to moderation. This feature is experimental and is powered by <a href=/software/endtracker.html>EndTRACKER</a>. If you experience any issues, please <a href=/about.html#contact>contact me off-band</a>.</small></div></form></div></div></div></div><script>function hidePostComment(){var t,e=document.getElementById("postCommentContent");e.rows=1,e.value="",t=document.getElementsByClassName("newPostControls"),Array.prototype.forEach.call(t,function(e){e.style.display="none"})}function showPostComment(){var e,t=document.getElementById("postCommentContent");t.rows=5,e=document.getElementsByClassName("newPostControls"),Array.prototype.forEach.call(e,function(e){e.style.display=""})}const form=document.querySelector("#newPost");form.onsubmit=function(e){e.preventDefault();let t=document.getElementById("postCommentAuthor").value,n=document.getElementById("postCommentEmail").value,s=document.getElementById("postCommentContent").value;postComment(t,n,s,hidePostComment)}</script></div></div><div class="col-md-3 sidebar d-none d-md-block"><div class=row><div class="col text-center p-2"><p><a href=/about.html class=clear-link><img src=/images/avatars/20181124-snow.jpg class="rounded-circle shadow my-2" style=width:100px><br><b>Julio Merino</b><br>A blog on operating systems, programming languages, testing, build systems, my own software
projects and even personal productivity. Specifics include FreeBSD, Linux, Rust, Bazel and
EndBASIC.</a></p><div class=row><div class=col><div class=form-group><form action=https://endtracker.jmmv.dev/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/subscribers/add method=post><input type=text name=email placeholder="Enter your email" class="form-control input-sm text-center my-1">
<button type=submit class="btn btn-primary btn-block my-1">Subscribe</button></form></div></div></div><div class="row px-2"><div class="col-sm-5 text-left"><small><span class=subscriber-count>0</span> subscribers</small></div><div class="col-sm-7 text-right"><p><a rel=me href=https://mastodon.online/@jmmv><img src=/images/badges/mastodon-logo.svg width=32px height=32px alt="Follow @jmmv on Mastodon">
</a><a href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fjmmv.dev%2F&amp;screen_name=jmmv"><img src=/images/badges/Twitter_logo_blue.svg width=32px height=32px alt="Follow @jmmv on Twitter">
</a><a href=/feed.xml><img src=/images/badges/feed-icon-28x28.png alt="RSS feed"></a></p></div></div></div></div><div class=row><div class=col><h2>Featured software</h2><ul><li class=overflow-ellipsis><a href=https://www.endbasic.dev/ target=_blank>EndBASIC: Online BASIC+DOS env</a></li><li class=overflow-ellipsis><a href=https://endtracker.jmmv.dev/ target=_blank>EndTRACKER: Services for static sites</a></li></ul></div></div><div class=row><div class=col><h2>Featured posts</h2><ul><li class=overflow-ellipsis><a href=/2023/06/fast-machines-slow-machines.html>Fast machines, slow machines</a></li><li class=overflow-ellipsis><a href=/2022/12/endbasic-0.10.html>EndBASIC 0.10: Core language, evolved</a></li><li class=overflow-ellipsis><a href=/2022/10/bye-microsoft-hi-snowflake.html>Farewell, Microsoft; hello, Snowflake!</a></li><li class=overflow-ellipsis><a href=/2022/05/rust-is-hard-but-does-it-matter.html>Rust is hard, yes, but does it matter?</a></li><li class=overflow-ellipsis><a href=/2022/04/rust-traits-and-dependency-injection.html>Rust traits and dependency injection</a></li><li class=overflow-ellipsis><a href=/2022/03/a-year-on-windows-intro.html>A year on Windows: Introduction</a></li><li class=overflow-ellipsis><a href=/2021/04/always-be-quitting.html>Always be quitting</a></li><li class=overflow-ellipsis><a href=/2021/02/google-monorepos-and-caching.html>How does Google keep build times low?</a></li><li class=overflow-ellipsis><a href=/2020/12/google-no-clean-builds.html>How does Google avoid clean builds?</a></li><li class=overflow-ellipsis><a href=/2020/12/unit-testing-a-console-app.html>Unit-testing a console app (a text editor)</a></li><li class=overflow-ellipsis><a href=/essays.html#featured>More...</a></li></ul></div></div></div></div></div><footer class=container-fluid><div class=row><div class="col-4 order-2 text-right"><p class=float-right><a href=#>Back to top</a></p></div><div class="col-8 order-1 mr-auto"><p>Copyright 2004&ndash;2025
Julio Merino</p></div></div></footer><script type=module>
  import { addAnchorsToHeaders, addElementClasses, BatchClient } from "\/js\/main.0de73782e9e0fbcb4184fb5793949b3b0d0ada16455df89320415b4dcc052f88.js";

  var batchClient = new BatchClient(SITE_ID);
  batchClient.doAll({
    put_request: true, get_comments: true, get_subscriber_count: true, get_votes: true });

  window.voteThumbsUp = function() { batchClient.voteThumbsUp(); }
  window.voteThumbsDown = function() { batchClient.voteThumbsDown(); }

  window.postComment = function(...args) {
    batchClient.postComment(...args);
  };

  addAnchorsToHeaders();
  addElementClasses();
</script><noscript><img src="https://hugo-dynamic.jmmv.dev/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/pages/aHR0cHM6Ly9qbW12LmRldi8yMDE1LzA2L2hvdy10by1jb21taXQtYS1jb2RlLWhhY2suaHRtbA==/stamp.gif" style=display:none></noscript></body></html>