<!doctype html><html lang=en xmlns=http://www.w3.org/1999/xhtml xmlns:fb=http://ogp.me/ns/fb#><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:site_name" content="Julio Merino (jmmv.dev)"><meta property="twitter:site" content="@jmmv"><title>bazel - Julio Merino (jmmv.dev)</title><meta property="og:title" content="bazel - Julio Merino (jmmv.dev)"><meta property="twitter:title" content="bazel - Julio Merino (jmmv.dev)"><meta name=description content><meta property="og:description" content><meta property="twitter:description" content><meta name=author content="Julio Merino"><meta property="twitter:creator" content="@jmmv"><meta name=generator content="Hugo 0.111.3"><meta property="og:url" content="https://jmmv.dev/tags/bazel/index/"><meta property="og:type" content="blog"><meta property="twitter:card" content="summary"><link rel=canonical href=https://jmmv.dev/tags/bazel/index/><link rel=alternate type=application/rss+xml title="Julio Merino (jmmv.dev)" href=/feed.xml><link rel=stylesheet href=/sass/main.min.cb91349cd93211a37e7d5dc131c35a170fc795721c03373cd05571327eea206b.css><link rel=stylesheet href=/css/chroma.css><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicons/favicon-96x96.png sizes=96x96><meta property="og:image" content="/images/favicons/favicon-1200x1200.png"><meta property="twitter:image" content="https://jmmv.dev/images/favicons/favicon-1200x1200.png"><script>const SITE_ID="e8da9f62-b7ac-4fe9-bf20-7c527199a376",BASE_URL="https://jmmv.dev/"</script></head><body><header class=site-header><nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary"><a class=navbar-brand href=/><img src=/images/favicons/favicon-30x30.png width=30 height=30 class="d-inline-block align-top" alt>
&nbsp;jmmv.dev</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=/about.html>About</a></li><li class=nav-item><a class=nav-link href=/blog.html>Blog</a></li><li class=nav-item><a class=nav-link href=/resume.html>Resume</a></li><li class=nav-item><a class=nav-link href=/software.html>Software</a></li></ul><ul class="navbar-nav mr-4"><li class=nav-item><a class=nav-link href=/archive.html>Archive</a></li><li class=nav-item><a class=nav-link href=/series.html>Series</a></li><li class=nav-item><a class=nav-link href=/tags.html>Tags</a></li></ul><form class=form-inline method=get role=search action=https://www.google.com/search><div class=input-group><input type=search name=query class=form-control placeholder=Search aria-label=Search><div class=input-group-append><button type=submit value=Search class="btn btn-light">
<img src=/octicons/search.svg></button></div></div><input type=hidden name=sitesearch value=https://jmmv.dev/></form></div></nav></header><div class=page-header><div class=container><h1>Posts: bazel</h1><p>Showing 42 posts</p></div></div><div class=container><div class=row><div class=col-md-9><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2023/11/end-to-end-tool-testing-with-bazel.html>End-to-end tool testing with Bazel and shtk</a></h2><p>If you use Bazel, your project is of moderate size. And because your project is of moderate size, it almost-certainly builds one or more binaries, at least one of which is a CLI tool. But let&rsquo;s face it: you don&rsquo;t have end-to-end testing for those tools, do you?
I&rsquo;m sure you have split the binary&rsquo;s main function into its own file so that the rest of the tool can be put in a library, and I&rsquo;m extra-sure that you have unit tests for such library. But&mldr; those tests do little to verify the functionality and quality of the tool as experienced by the end user. Consider: What exactly does the tool print to the console on success? Does it show errors nicely when they happen, or does it dump internal stack traces? How does it handle unknown flags or bad arguments? Is the built-in help message nicely rendered when your terminal is really wide? What if the terminal is narrow?
You must write end-to-end tests for your tools but, usually, that isn’t easy to do. Until today. Combining shtk with Bazel via the new rules_shtk ruleset makes it trivial to write tests that verify the behavior of your CLI tools&mdash;no matter what language they are written in&mdash;and in this article I’m going to show you how.</p><p class=text-muted>November 4, 2023
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/blogsystem5>blogsystem5</a>, <a href=/tags/shell>shell</a>, <a href=/tags/shtk>shtk</a>, <a href=/tags/testing>testing</a><br><a class=text-reset href=/2023/11/end-to-end-tool-testing-with-bazel.html>Continue reading (about
7 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2023/10/bazelcon-2023-et-al-trip-report.html>BazelCon 2023 et al. trip report</a></h2><p>I&rsquo;m exhausted. I just came back to Seattle from a 10-day trip in which I attended three different Bazel events: the Build Meetup in Reykjavik, the Bazel Community Day in Munich, and BazelCon 2023 in Munich too. Oh, and because I was on the other side of the world, I also paid a visit to my family in Spain.
Attending these events has been incredibly useful and productive: I got exposure to many ideas and discussions that would just not happen online, I got to build connections with very interesting people and, of course, it has also been super fun too to reconnect with old coworkers and friends.
This article contains the summary of the things I learned and the things I want to follow up on. These are just a bunch of cleaned-up notes which I took and are in the context of my work with Bazel at Snowflake and my interests on build tools, so this is not endorsed by Snowflake.</p><p class=text-muted>October 30, 2023
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/blogsystem5>blogsystem5</a>, <a href=/tags/snowflake>snowflake</a><br><a class=text-reset href=/2023/10/bazelcon-2023-et-al-trip-report.html>Continue reading (about
15 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2023/10/build-farm-visualizations.html>Build farm visualizations</a></h2><p>If you have followed our recent infrastructure posts, you know by now that we are actively migrating Snowflake&rsquo;s build to Bazel. What we haven&rsquo;t shared yet is that we have deployed our own Build Barn cluster to support Bazel&rsquo;s remote execution features. We have chosen to run our own build farm service for resource governance and security purposes, but also because the behavior of this system impacts the developer experience so directly that we want to have full in-house control and knowledge of it.</p><p class=text-muted>October 20, 2023
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/snowflake>snowflake</a><br><a class=text-reset href=/2023/10/build-farm-visualizations.html>Continue reading (about
10 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2023/10/analyzing-ooms-in-intellij-with-bazel.html>Analyzing OOMs in IntelliJ with Bazel</a></h2><p>A few months ago, we described how we fixed three different OOM scenarios in our ongoing migration to the Bazel build system here at Snowflake. Things had been sailing along just fine since then&mldr; but a new issue showed up recently: our IntelliJ with Bazel (IjwB) Java project started showing OOMs during its sync phase.
The reason this issue surfaced now is because, as we continue our migration to Bazel, our IjwB project has grown in size. Months ago, our project only covered a Java binary, but now that we have migrated all of its unit and integration tests as well, the project covers them too. It is common for tests to be more expensive to build and run than the binary they validate&mdash;tests depend on the binary&rsquo;s dependencies plus many other helper tools for testing&mdash;and these caused the project to grow too big to fit in our development environments. Or did they?</p><p class=text-muted>October 7, 2023
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/snowflake>snowflake</a><br><a class=text-reset href=/2023/10/analyzing-ooms-in-intellij-with-bazel.html>Continue reading (about
9 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2023/03/addressing-bazel-ooms.html>Addressing Bazel OOMs</a></h2><p>Here at Snowflake, the Developer Productivity organization (DPE for short) is tackling some important problems we face as a company: namely, lengthening build times and complex development environments. A key strategy we are pursuing to resolve these is the migration of key build processes from CMake and Maven to Bazel.
We are still in the early stages of this migration and cannot yet share many details or a success story, but we can start explaining some of the issues we encounter as we work through this ambitious project.</p><p class=text-muted>March 16, 2023
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/snowflake>snowflake</a><br><a class=text-reset href=/2023/03/addressing-bazel-ooms.html>Continue reading (about
16 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2021/03/build-time-slis-slos.html>Defining build time SLIs and SLOs</a></h2><p>Companies grow, and with them do the software projects that support them. It should be no surprise that larger programs require longer build times. And, if I had to guess, you have seen how those build times eventually grow to unbearable levels, reducing productivity and degrading quality. In this post, I examine how we can leverage the common techniques we use for production services&mdash;namely SLIs and SLOs&mdash;to keep build times on track.</p><p class=text-muted>March 12, 2021
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/development>development</a>, <a href=/tags/monorepo>monorepo</a><br><a class=text-reset href=/2021/03/build-time-slis-slos.html>Continue reading (about
16 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/star.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2021/02/google-monorepos-and-caching.html>How does Google keep build times low?</a></h2><p>Monorepos are an interesting beast. If mended properly, they enable a level of uniformity and code quality that is hard to achieve otherwise. If left unattended, however, they become unmanageable monsters of tangled dependencies, slow builds, and frustrating developer experiences. Whether you have a good or bad experience directly depends on the level of engineering support behind the monorepo. Simply put, monorepos require dedicated teams and tools to run nicely. In this post, I will look at how almost-perfect caching plays a key role in keeping build times manageable under such an environment.</p><p class=text-muted>February 26, 2021
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/featured>featured</a>, <a href=/tags/monorepo>monorepo</a>, <a href=/tags/opinion>opinion</a><br><a class=text-reset href=/2021/02/google-monorepos-and-caching.html>Continue reading (about
11 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/star.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2020/12/google-no-clean-builds.html>How does Google avoid clean builds?</a></h2><p>During my 11 years at Google, I can confidently count the number of times I had to do a &ldquo;clean build&rdquo; with one hand: their build system is so robust that incremental builds always work. Phrases like &ldquo;clean everything and try building from scratch&rdquo; are unheard of. So&mldr; you can color me skeptical when someone says that incremental build problems are due to bugs in the build files and not due to a suboptimal build system. The answer lies in having a robust build system, and in this post I&rsquo;ll examine the common causes behind incremental build breakages, what the build system can do to avoid them, and how Bazel accomplishes most of them.</p><p class=text-muted>December 31, 2020
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/featured>featured</a>, <a href=/tags/google>google</a>, <a href=/tags/monorepo>monorepo</a>, <a href=/tags/opinion>opinion</a><br><a class=text-reset href=/2020/12/google-no-clean-builds.html>Continue reading (about
20 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2020/10/bazel-jni.html>The final boss: Bazel's own JNI code</a></h2><p>As you might have read elsewhere, I&rsquo;m leaving the Bazel team and Google in about a week. My plan for these last few weeks was to hand things off as cleanly as possible&mldr; but I was also nerd-sniped by a bug that came my way a fortnight ago. Fixing it has been my self-inflicted punishment for leaving, and oh my, it has been painful. Very painful.
Let me tell you the story of this final boss.</p><p class=text-muted>October 9, 2020
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/bug>bug</a><br><a class=text-reset href=/2020/10/bazel-jni.html>Continue reading (about
13 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2020/09/bazel-test-streaming-bug.html>Bazel output streaming, Ctrl+C, and test flakiness</a></h2><p>About two weeks ago, I found a very interesting bug in Bazel&rsquo;s test output streaming functionality while writing tests for a new feature related to Ctrl+C interrupts. I fixed the bug, wrote a test for it, and&mldr; the test itself came back as flaky, which made me find another very subtle bug in the test that needed a one-line fix. This is the story of both.
Bazel has a feature known as test output streaming: by default, Bazel captures the outputs (stdout and stderr) of the tests it runs, saves those in local log files, and tells the user where they are when a test fails.</p><p class=text-muted>September 18, 2020
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/bug>bug</a><br><a class=text-reset href=/2020/09/bazel-test-streaming-bug.html>Continue reading (about
9 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2020/09/bazel-ui-locking.html>Bazel UI locking and file downloads</a></h2><p>About a month ago, I was benchmarking the impact of a new Bazel feature and I noticed that a test build that should have taken only a few seconds took almost 10 minutes. My Internet connection was flaking out indeed, but something else didn&rsquo;t seem right. So I looked and found that Bazel was doing network calls within a critical section, and these were the root cause behind the massive slowdown. But how did we get such an obvious no-no into the codebase? Read on to see how this happened and how gnarly it was to fix!</p><p class=text-muted>September 1, 2020
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/bug>bug</a><br><a class=text-reset href=/2020/09/bazel-ui-locking.html>Continue reading (about
12 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2020/06/shipping-bazel-new-dynamic-scheduler.html>Shipping Bazel's new dynamic scheduler</a></h2><p>Back in September 2019, I embarked into the task of rewriting Bazel&rsquo;s dynamic scheduler to deal with slow and flaky networks. Initial testing had shown that dynamic builds might become slower, and it was all due to this feature having been designed for a different use case (in-office, high-speed network). We had to fix two different issues in the scheduler.
The first fix was making the downloads of the remote artifacts happen without holding the output lock.</p><p class=text-muted>June 12, 2020
&#183;
Tags:
<a href=/tags/bazel>bazel</a><br><a class=text-reset href=/2020/06/shipping-bazel-new-dynamic-scheduler.html>Continue reading (about
10 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2020/05/codesign-and-ssh.html>Running codesign over SSH with a new key</a></h2><p>I just spent sometime between 30 minutes and 1 hour convincing the Mac Pro that sits in my office to successfully codesign an iOS app via Bazel. This was after having to update the signing key to a newer one and after rebooting the machine due to the macOS 10.15.5 upgrade—all remotely thanks to COVID-19.
The build of the app was failing with an errSecInternalComponent error printed by codesign. It is not the first time I face this, but in all previous cases, I had either been at the computer to click through security popups, had had functional Chrome Remote Desktop access, or did not have to install a new signing key remotely.</p><p class=text-muted>May 29, 2020
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/macos>macos</a><br><a class=text-reset href=/2020/05/codesign-and-ssh.html>Continue reading (about
3 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/star.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2020/01/system-rewrites-and-tuning.html>Ensuring system rewrites are truly necessary</a></h2><p>You probably know that software rewrites, while very tempting, are expensive and can be the mistake that kills a project or a company. Yet they are routinely proposed as the solution to all problems. Is there anything you can do to minimize the risk? In this post, I propose that you actively improve the old system to ensure the new system cannot make progress in a haphazard way. This forces the new system to be designed in such a way that delivers breakthrough improvements and not just incremental improvements.</p><p class=text-muted>January 24, 2020
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/essay>essay</a>, <a href=/tags/featured>featured</a>, <a href=/tags/sre>sre</a><br><a class=text-reset href=/2020/01/system-rewrites-and-tuning.html>Continue reading (about
7 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2020/01/osxfuse-hardlinks-dladdr.html>The OSXFUSE, hard links, and dladdr puzzle</a></h2><p>Hello everyone and welcome to this new decade!
It&rsquo;s already 2020 and I&rsquo;m only 17 days late in writing a first post. I was planning to start with an opinion article, but as its draft is taking longer than I wanted&mldr; I&rsquo;ll present you the story of a recent crazy bug that has kept me busy for the last couple of days.
Java crashes with Bazel and sandboxfs On a machine running macOS Catalina, install sandboxfs and build Bazel with sandboxfs enabled, like this:</p><p class=text-muted>January 17, 2020
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/fuse>fuse</a>, <a href=/tags/internals>internals</a>, <a href=/tags/programming>programming</a>, <a href=/tags/sandboxfs>sandboxfs</a><br><a class=text-reset href=/2020/01/osxfuse-hardlinks-dladdr.html>Continue reading (about
13 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/12/bazel-dynamic-execution-tree-artifacts.html>Tree artifacts and transient files</a></h2><p>To conclude the deep dive into Bazel&rsquo;s dynamic spawn strategy, let&rsquo;s look at the nightmare that tree artifacts have been with the local lock-free feature. And, yes, I&rsquo;m double-posting today because I really want to finish these series before the end of the decade1!
Tree artifacts are a fancy name for action outputs that are directories, not files. What&rsquo;s special about them is that Bazel does not know a priori what the directory contents are: the rule behind the action just specifies that there will be a directory with files, and Bazel has to treat that as the unit of output from the action.</p><p class=text-muted>December 31, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a><br><a class=text-reset href=/2019/12/bazel-dynamic-execution-tree-artifacts.html>Continue reading (about
4 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/12/bazel-dynamic-execution-local-lockfree.html>Lifting the local lock for dynamic execution</a></h2><p>In the previous post, we saw how accounting for artifact download times makes the dynamic strategy live to its promise of delivering the best of local and remote build times.
Or does it? If you think about it closely, that change made it so that builds that were purely local couldn&rsquo;t be made worse by enabling the dynamic scheduler: the dynamic strategy would always favor the local branch of a spawn if the remote one took a long time.</p><p class=text-muted>December 31, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a><br><a class=text-reset href=/2019/12/bazel-dynamic-execution-local-lockfree.html>Continue reading (about
4 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/12/bazel-dynamic-execution-download-times.html>Artifact downloads and dynamic execution</a></h2><p>In the previous post of this series, we looked at how the now-legacy implementation of the dynamic strategy uses a per-spawn lock to guard accesses to the output tree. This lock is problematic for a variety of reasons and we are going to peek into one of those here.
To recap, the remote strategy does the following:
Send spawn execution RPC to the remote service. Wait for successful execution (which can come quickly from a cache hit).</p><p class=text-muted>December 30, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a><br><a class=text-reset href=/2019/12/bazel-dynamic-execution-download-times.html>Continue reading (about
5 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/12/bazel-dynamic-execution-output-locking.html>Output conflicts and dynamic execution</a></h2><p>When the dynamic scheduler is active, Bazel runs the same spawn (aka command line) remotely and locally at the same time via two separate strategies. These two strategies want to write to the same output files (e.g. object files, archives, or final binaries) on the local disk. In computing, two things trying to affect the same thing require some kind of coördination.
You might think, however, that because we assume that both strategies are equivalent and will write the same contents to disk1, this is not problematic.</p><p class=text-muted>December 27, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/sandboxfs>sandboxfs</a><br><a class=text-reset href=/2019/12/bazel-dynamic-execution-output-locking.html>Continue reading (about
4 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/12/bazel-dynamic-execution-strategy.html>Bazel's dynamic strategy</a></h2><p>After introducing Bazel&rsquo;s dynamic execution a couple of posts ago, it&rsquo;s time to dive into its actual implementation details as promised. But pardon for the interruption in the last post, as I had to take a little detour to cover a necessary topic (local resources) for today&rsquo;s article.
Simply put, dynamic execution is implemented as &ldquo;just&rdquo; one more strategy called dynamic. The dynamic strategy, however, is different from all others because it does not have a corresponding spawn runner.</p><p class=text-muted>December 26, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a><br><a class=text-reset href=/2019/12/bazel-dynamic-execution-strategy.html>Continue reading (about
3 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/12/bazel-local-resources.html>How does Bazel track local resource usage?</a></h2><p>How does Bazel avoid melting your workstation with concurrent subprocesses? Or&mldr; tries to, because I know it still does that sometimes? There are two mechanisms as play: the jobs number and the local resources tracker. Let&rsquo;s dive into them.
The jobs number, given by the --jobs flag, configures the number of concurrent Skyframe evaluators during the execution phase1. What a mouthful. What this essentially means is that jobs indicates the number of threads used to walk the graph looking for actions to execute&mdash;and also executing them.</p><p class=text-muted>December 23, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a><br><a class=text-reset href=/2019/12/bazel-local-resources.html>Continue reading (about
5 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/12/bazel-dynamic-execution-introduction.html>Introduction to Bazel's dynamic execution</a></h2><p>Bazel&rsquo;s dynamic execution is a feature that makes your builds faster by using remote and local resources, transparently and at the same time. We launched this feature in Bazel 0.21 back in February 2019 along an introductory blog post and have been hard at work since then to improve it.
The reason dynamic execution makes builds faster is two-fold:
first, because we can hide hiccups in the connectivity to the remote build service; and, second, because we can take advantage of things like persistent workers, which are designed to offer super-fast edit/build/test cycles.</p><p class=text-muted>December 20, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a><br><a class=text-reset href=/2019/12/bazel-dynamic-execution-introduction.html>Continue reading (about
3 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/12/bazel-strategies.html>What are Bazel's strategies?</a></h2><p>&ldquo;Strategies? Will you talk about Bazel&rsquo;s strategy for world domination 🙀?&rdquo; No&mldr; not exactly that.
Dynamic execution has been quite a hot topic in my work over the last few months and I am getting ready to publish a series of posts on it soon. But before I do that, I need to first review Bazel&rsquo;s execution strategies because they play a big role in understanding what dynamic execution is and how it&rsquo;s implemented.</p><p class=text-muted>December 14, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/sandboxfs>sandboxfs</a><br><a class=text-reset href=/2019/12/bazel-strategies.html>Continue reading (about
6 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/11/wait-for-process-group-darwin.html>Waiting for process groups, macOS edition</a></h2><p>In the previous posts, we saw why waiting for a process group is complicated and we covered a specific, bullet-proof mechanism to accomplish this on Linux. Now is the time to investigate this same topic on macOS. Remember that the problem we are trying to solve (#10245) is the following: given a process group, wait for all of its processes to fully terminate.
macOS has a bunch of fancy features that other systems do not have, but process control is not among them.</p><p class=text-muted>November 15, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/darwin>darwin</a>, <a href=/tags/macos>macos</a>, <a href=/tags/unix>unix</a><br><a class=text-reset href=/2019/11/wait-for-process-group-darwin.html>Continue reading (about
8 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/11/wait-for-process-group-linux.html>Waiting for process groups, Linux edition</a></h2><p>In the previous post, we saw why waiting for a process group to terminate is important (at least in the context of Bazel), and we also saw why this is a difficult thing to do in a portable manner. So today, let&rsquo;s dive into how to do this properly on a Linux system.
On Linux, we have two routes: using the child subreaper feature or using PID namespaces. We&rsquo;ll focus on the former because that&rsquo;s what we&rsquo;ll use to fix (#10245) the process wrapper1, and because they are sufficient to fully address our problem.</p><p class=text-muted>November 14, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/linux>linux</a>, <a href=/tags/unix>unix</a><br><a class=text-reset href=/2019/11/wait-for-process-group-linux.html>Continue reading (about
4 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/11/wait-for-process-group.html>Waiting for process groups, introduction</a></h2><p>Process groups are a feature of Unix systems to group related processes under a common identifier, known as the PGID. Using the PGID, one can look for these related process and send signals in unison to them. This is typically used by shell interpreters to manage processes.
For example, let&rsquo;s launch a shell command that puts two sleep invocations in the background (those with the 10- and 20-second delays) and then sleeps the direct child (with a 5-second delay)&mdash;while also putting the whole invocation in the background so that we can inspect what&rsquo;s going on:</p><p class=text-muted>November 12, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/unix>unix</a><br><a class=text-reset href=/2019/11/wait-for-process-group.html>Continue reading (about
6 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/11/bazel-process-wrapper.html>Bazel's process-wrapper helper tool</a></h2><p>As strange as it may sound, a very important job of any build tool is to orchestrate the execution of lots of other programs&mdash;and Bazel is no exception.
Once Bazel has finished loading and analyzing the build graph, Bazel enters the execution phase. In this phase, the primary thing that Bazel does is walk the graph looking for actions to execute. Then, for each action, Bazel invokes its commands&mdash;things like compiler and linker invocations&mdash;as subprocesses.</p><p class=text-muted>November 8, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/internals>internals</a>, <a href=/tags/unix>unix</a><br><a class=text-reset href=/2019/11/bazel-process-wrapper.html>Continue reading (about
6 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/11/macos-sandbox-exec.html>A quick glance at macOS' sandbox-exec</a></h2><p>macOS includes a sandboxing mechanism to closely control what processes can do on the system. Sandboxing can restrict file system accesses on a path level, control which host/port pairs can be reached over the network, limit which binaries can be executed, and much more. All applications installed via the App Store are subject to sandboxing.
This sandboxing functionality is exposed via the sandbox-exec(1) command-line utility, which unfortunately has been listed as deprecated for at least the last two major versions of macOS.</p><p class=text-muted>November 1, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/macos>macos</a><br><a class=text-reset href=/2019/11/macos-sandbox-exec.html>Continue reading (about
3 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/03/optimizing-tree-deletions.html>Optimizing tree deletions in Bazel</a></h2><p>Bazel likes creating very deep and large trees on disk during a build. One example is the output tree, which naturally contains all the artifacts of your build. Another, more problematic example is the symlink forest trees created for every action when sandboxing is enabled. As garbage gets created, it must be deleted.
It turns out, however, that deleting file system trees can be very expensive&mdash;and especially so on macOS. In fact, calls to our deleteTree algorithm routinely showed up in my profiling runs when trying to diagnose slowdowns using the dynamic scheduler.</p><p class=text-muted>March 22, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/macos>macos</a>, <a href=/tags/performance>performance</a><br><a class=text-reset href=/2019/03/optimizing-tree-deletions.html>Continue reading (about
4 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/star.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/03/macos-threads-qos-and-bazel.html>Darwin's QoS service classes and performance</a></h2><p>Since the publication of Bazel a few years ago, users have reported (and I myself have experienced) general slowdowns when Bazel is running on Macs: things like the window manager stutter and others like the web browser cannot load new pages. Similarly, after the introduction of the dynamic spawn scheduler, some users reported slower builds than pure remote or pure local builds, which made no sense.
All along we guessed that these problems were caused by Bazel&rsquo;s abuse of system threads, as it used to spawn 200 runnable threads during analysis and used to run 200 concurrent compiler subprocesses.</p><p class=text-muted>March 6, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/featured>featured</a>, <a href=/tags/macos>macos</a>, <a href=/tags/performance>performance</a><br><a class=text-reset href=/2019/03/macos-threads-qos-and-bazel.html>Continue reading (about
6 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/02/setenv-and-global-variables.html>Using setenv equals setting global variables</a></h2><p>This is the tale of yet another Bazel bug, this time involving environment variables, global state, and gRPC. Through it, I&rsquo;ll argue that you should never use setenv within a program unless you are doing so to execute something else.</p><p class=text-muted>February 22, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a><br><a class=text-reset href=/2019/02/setenv-and-global-variables.html>Continue reading (about
4 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/02/encode-your-assumptions.html>Encode your assumptions</a></h2><p>The point of this post is simple and I&rsquo;ll spoil it from the get go: every time you make an assumption in a piece of code, make such assumption explicit in the form of an assertion or error check. If you cannot do that (are you sure?), then write a detailed comment.
In fact, I&rsquo;m exceedingly convinced that the amount of assertion-like checks in a piece of code is a good indicator of the programmer&rsquo;s expertise.</p><p class=text-muted>February 7, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/production-software>production-software</a>, <a href=/tags/readability>readability</a>, <a href=/tags/software>software</a><br><a class=text-reset href=/2019/02/encode-your-assumptions.html>Continue reading (about
4 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/star.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/02/sandboxfs-0-1-0.html>Hello, sandboxfs 0.1.0</a></h2><p>I am pleased to announce that the first release of sandboxfs, 0.1.0, is finally here! You can download the sources and prebuilt binaries from the 0.1.0 release page and you can read the installation instructions for more details.
The journey to this first release has been a long one. sandboxfs was first conceived over two years ago, was first announced in August 2017, showed its first promising results in April 2018, and has been undergoing a rewrite from Go to Rust.</p><p class=text-muted>February 5, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/featured>featured</a>, <a href=/tags/pkg_comp>pkg_comp</a>, <a href=/tags/sandboxctl>sandboxctl</a>, <a href=/tags/sandboxfs>sandboxfs</a>, <a href=/tags/software>software</a><br><a class=text-reset href=/2019/02/sandboxfs-0-1-0.html>Continue reading (about
7 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2019/01/open-files-limit-macos-and-jvm.html>Open files limit, macOS, and the JVM</a></h2><p>Bazel&rsquo;s original raison d&rsquo;etre was to support Google&rsquo;s monorepo. A consequence of using a monorepo is that some builds will become very large. And large builds can be very resource hungry, especially when using a tool like Bazel that tries to parallelize as many actions as possible for efficiency reasons. There are many resource types in a system, but today I&rsquo;d like to focus on the number of open files at any given time (nofiles).</p><p class=text-muted>January 29, 2019
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/jvm>jvm</a>, <a href=/tags/macos>macos</a>, <a href=/tags/monorepo>monorepo</a>, <a href=/tags/portability>portability</a><br><a class=text-reset href=/2019/01/open-files-limit-macos-and-jvm.html>Continue reading (about
3 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2018/04/bazel-xcode-locations-cache.html>A few extra system calls... and you lose 1% build time</a></h2><p>Blaze—the variant of Bazel used internally at Google—was originally designed to build the Google monorepo. One of the beauties of sticking to a monorepo is code reuse, but this has the unfortunate side-effect of dependency bloat. As a result, Bazel and Blaze have evolved to support ever-increasingly-bigger pieces of software.
The growth of the projects built by Bazel and Blaze has had the unsurprising consequence that our engineers all now have high-end workstations with access to massive amounts of distributed resources.</p><p class=text-muted>April 30, 2018
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/google>google</a>, <a href=/tags/monorepo>monorepo</a>, <a href=/tags/software>software</a><br><a class=text-reset href=/2018/04/bazel-xcode-locations-cache.html>Continue reading (about
4 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2018/04/preliminary-sandboxfs-support-in-bazel.html>Preliminary sandboxfs support in Bazel</a></h2><p>During the summer of last year, I hosted an intern who implemented sandboxfs: a FUSE-based file system that exposes an arbitrary view of the host&rsquo;s file system under the mount point. At the end of his internship, we had a functional sandboxfs implementation and some draft patches for integration in Bazel.
The goal of sandboxfs in the context of Bazel is to improve the performance of builds when action sandboxing is enabled.</p><p class=text-muted>April 13, 2018
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/google>google</a>, <a href=/tags/sandboxfs>sandboxfs</a>, <a href=/tags/software>software</a><br><a class=text-reset href=/2018/04/preliminary-sandboxfs-support-in-bazel.html>Continue reading (about
2 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/star.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2018/03/stick-to-projects-core-language-in-tests.html>Stick to your project's core language in your tests</a></h2><p>This post is a short, generalized summary of the preceeding two. I believe those two posts put readers off due to their massive length and the fact that they were seemingly tied to Bazel and Java, thus failing to communicate the larger point I wanted to make. Let&rsquo;s try to distill their key points here in a language- and project-agnostic manner.</p><p class=text-muted>March 27, 2018
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/featured>featured</a>, <a href=/tags/google>google</a>, <a href=/tags/software>software</a><br><a class=text-reset href=/2018/03/stick-to-projects-core-language-in-tests.html>Continue reading (about
3 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2018/03/bazel-tests-in-java-part-2.html>A case for writing Bazel's integration tests in Java, part 2</a></h2><p>In part 1 of this series, I made the case that you should run away from the shell when writing integration tests for your software and that you should embrace the primary language of your project to write those.
Depending on the language you are using, doing this will mean significant more work upfront to lay out the foundations for your tests, but this work will pay off. You may also feel that the tests could be more verbose than if they were in shell, though that&rsquo;s not necessarily the case.</p><p class=text-muted>March 19, 2018
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/google>google</a>, <a href=/tags/sandboxfs>sandboxfs</a>, <a href=/tags/software>software</a><br><a class=text-reset href=/2018/03/bazel-tests-in-java-part-2.html>Continue reading (about
12 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2018/03/bazel-tests-in-java-part-1.html>A case for writing Bazel's integration tests in Java, part 1</a></h2><p>My latest developer productivity rant thesis is that integration tests should be written in the exact same language as the thing they test. Specifically, not shell.
This theory applies mostly to tests that verify infrastructure software like servers or command line tools. It is too easy to fall into the trap of using the shell because it feels like the natural choice to interact with tools. But I argue that this is a big mistake that hurts the long-term health of the project, and once trapped, it&rsquo;s hard to escape.</p><p class=text-muted>March 16, 2018
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/google>google</a>, <a href=/tags/software>software</a><br><a class=text-reset href=/2018/03/bazel-tests-in-java-part-1.html>Continue reading (about
14 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2017/08/introducing-sandboxfs.html>Introducing sandboxfs</a></h2><p>sandboxfs is a FUSE-based file system that exposes an arbitrary view of the host&rsquo;s file system under the mount point, and offers access controls that differ from those of the host. You can think of sandboxfs as an advanced version of bindfs (or mount --bind or mount_null(8) depending on your system) in which you can combine and nest directories under an arbitrary layout.
The primary use case for this project is to provide a better file system sandboxing technique for the Bazel build system.</p><p class=text-muted>August 25, 2017
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/pkg_comp>pkg_comp</a>, <a href=/tags/sandboxfs>sandboxfs</a>, <a href=/tags/software>software</a>, <a href=/tags/sourcachefs>sourcachefs</a><br><a class=text-reset href=/2017/08/introducing-sandboxfs.html>Continue reading (about
2 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/note.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2016/01/joining-blaze-team.html>Joining the Blaze team</a></h2><p>It has been over 6 years since I joined Google and throughout this time I have been in the Storage SRE family: first with GFS, then with Colossus, and last with Persistent Disk. Even though this counts as 3 different teams, the reality is that I have been doing mostly the same type of work all around.
I had pondered the idea of switching to a pure Software Engineer (SWE) role for all these years and never taken any action. Until now. Things change, and the time has come for me to make a move and pursue that thought in an effort to grow in a different direction. And why now, you ask? Well, simply because I have found a role in the NYC office for a project that I am personally passionate about.</p><p class=text-muted>January 19, 2016
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/google>google</a>, <a href=/tags/work>work</a><br><a class=text-reset href=/2016/01/joining-blaze-team.html>Continue reading (about
3 minutes)</a></p></div></div><div class="media my-4"><img class=mr-3 src=/octicons/star.svg width=32px height=32px><div class=media-body><h2 class=mt-0><a href=/2015/04/on-bazel-and-open-source.html>On Bazel and Open Source</a></h2><p>This is a rare post because I don&rsquo;t usually talk about Google stuff here, and this post is about Bazel: a tool recently published by Google. Why? Because I love its internal counterpart, Blaze, and believe that Bazel has the potential to be one of the best build tools if it is not already.
However, Bazel currently has some shortcomings to cater to a certain kind of important projects in the open source ecosystem: the projects that form the foundation of open source operating systems.</p><p class=text-muted>April 14, 2015
&#183;
Tags:
<a href=/tags/bazel>bazel</a>, <a href=/tags/featured>featured</a>, <a href=/tags/google>google</a>, <a href=/tags/software>software</a><br><a class=text-reset href=/2015/04/on-bazel-and-open-source.html>Continue reading (about
17 minutes)</a></p></div></div></div><div class="col-md-3 sidebar d-none d-md-block"><div class=row><div class="col text-center p-2"><p><a href=/about.html class=clear-link><img src=/images/avatars/20181124-snow.jpg class="rounded-circle shadow my-2" style=width:100px><br><b>Julio Merino</b><br>A blog on operating systems, programming languages, testing, build systems, my own software
projects and even personal productivity. Specifics include FreeBSD, Linux, Rust, Bazel and
EndBASIC.</a></p><div class=row><div class=col><div class=form-group><form action=https://endtracker.azurewebsites.net/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/subscribers/add method=post><input type=text name=email placeholder="Enter your email" class="form-control input-sm text-center my-1">
<button type=submit class="btn btn-primary btn-block my-1">Subscribe</button></form></div></div></div><div class="row px-2"><div class="col-sm-5 text-left"><small><span class=subscriber-count>0</span> subscribers</small></div><div class="col-sm-7 text-right"><p><a rel=me href=https://mastodon.online/@jmmv><img src=/images/badges/mastodon-logo.svg width=32px height=32px alt="Follow @jmmv on Mastodon"></a>
<a href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fjmmv.dev%2F&amp;screen_name=jmmv"><img src=/images/badges/Twitter_logo_blue.svg width=32px height=32px alt="Follow @jmmv on Twitter"></a>
<a href=/feed.xml><img src=/images/badges/feed-icon-28x28.png alt="RSS feed"></a></p></div></div></div></div><div class=row><div class=col><h2>Featured software</h2><ul><li class=overflow-ellipsis><a href=https://www.endbasic.dev/ target=_blank>EndBASIC: Online BASIC+DOS env</a></li><li class=overflow-ellipsis><a href=https://endtracker.azurewebsites.net/ target=_blank>EndTRACKER: Services for static sites</a></li></ul></div></div><div class=row><div class=col><h2>Featured posts</h2><ul><li class=overflow-ellipsis><a href=/2023/06/fast-machines-slow-machines.html>Fast machines, slow machines</a></li><li class=overflow-ellipsis><a href=/2022/12/endbasic-0.10.html>EndBASIC 0.10: Core language, evolved</a></li><li class=overflow-ellipsis><a href=/2022/10/bye-microsoft-hi-snowflake.html>Farewell, Microsoft; hello, Snowflake!</a></li><li class=overflow-ellipsis><a href=/2022/05/rust-is-hard-but-does-it-matter.html>Rust is hard, yes, but does it matter?</a></li><li class=overflow-ellipsis><a href=/2022/04/rust-traits-and-dependency-injection.html>Rust traits and dependency injection</a></li><li class=overflow-ellipsis><a href=/2022/03/a-year-on-windows-intro.html>A year on Windows: Introduction</a></li><li class=overflow-ellipsis><a href=/2021/04/always-be-quitting.html>Always be quitting</a></li><li class=overflow-ellipsis><a href=/2021/02/google-monorepos-and-caching.html>How does Google keep build times low?</a></li><li class=overflow-ellipsis><a href=/2020/12/google-no-clean-builds.html>How does Google avoid clean builds?</a></li><li class=overflow-ellipsis><a href=/2020/12/unit-testing-a-console-app.html>Unit-testing a console app (a text editor)</a></li><li class=overflow-ellipsis><a href=/essays.html#featured>More...</a></li></ul></div></div></div></div></div><footer class=container-fluid><div class=row><div class="col-4 order-2 text-right"><p class=float-right><a href=#>Back to top</a></p></div><div class="col-8 order-1 mr-auto"><p>Copyright 2004&ndash;2023 Julio Merino</p></div></div></footer><script type=module>
  import { addAnchorsToHeaders, addElementClasses, BatchClient } from "\/js\/main.d30f168b11d80082408f4a983af9a626c6e57d58f7846b2174bac40d43be33e3.js";

  var batchClient = new BatchClient(SITE_ID);
  batchClient.doAll({
    put_request: true, get_comments: true, get_subscriber_count: true, get_votes: true });

  window.voteThumbsUp = function() { batchClient.voteThumbsUp(); }
  window.voteThumbsDown = function() { batchClient.voteThumbsDown(); }

  window.postComment = function(...args) {
    batchClient.postComment(...args);
  };

  addAnchorsToHeaders();
  addElementClasses();
</script><noscript><img src="https://hugo-dynamic.jmmv.dev/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/pages/aHR0cHM6Ly9qbW12LmRldi90YWdzL2JhemVsL2luZGV4Lw==/stamp.gif" style=display:none></noscript></body></html>