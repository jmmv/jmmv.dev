<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>testing on Julio Merino (jmmv.dev)</title><link>https://jmmv.dev/tags/testing/index/</link><description>Recent content in testing on Julio Merino (jmmv.dev)</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 04 Nov 2023 07:50:00 -0700</lastBuildDate><atom:link href="https://jmmv.dev/tags/testing/index/feed.xml" rel="self" type="application/rss+xml"/><item><title>End-to-end tool testing with Bazel and shtk</title><link>https://jmmv.dev/2023/11/end-to-end-tool-testing-with-bazel.html</link><pubDate>Sat, 04 Nov 2023 07:50:00 -0700</pubDate><guid>https://jmmv.dev/2023/11/end-to-end-tool-testing-with-bazel.html</guid><description>&lt;p>If you use Bazel, your project is of moderate size. And because your project is of moderate size, it almost-certainly builds one or more binaries, at least one of which is a CLI tool. But let&amp;rsquo;s face it: you don&amp;rsquo;t have end-to-end testing for those tools, do you?&lt;/p>
&lt;p>I&amp;rsquo;m &lt;em>sure&lt;/em> you have split the binary&amp;rsquo;s &lt;code>main&lt;/code> function into its own file so that the rest of the tool can be put in a library, and I&amp;rsquo;m &lt;em>extra-sure&lt;/em> that you have unit tests for such library. But&amp;hellip; those tests do little to verify the functionality and quality of the tool &lt;em>as experienced by the end user&lt;/em>. Consider: What exactly does the tool print to the console on success? Does it show errors nicely when they happen, or does it dump internal stack traces? How does it handle unknown flags or bad arguments? Is the built-in help message nicely rendered when your terminal is really wide? What if the terminal is narrow?&lt;/p>
&lt;p>You must write end-to-end tests for your tools but, usually, that isn’t easy to do. Until today. Combining shtk with Bazel via the new &lt;code>rules_shtk&lt;/code> ruleset makes it trivial to write tests that verify the behavior of your CLI tools&amp;mdash;no matter what language they are written in&amp;mdash;and in this article I’m going to show you how.&lt;/p></description><enclosure url="https://jmmv.dev/images/2023-11-04-bazel-clamp.jpg" length="572746" type="image/jpeg"/></item><item><title>Unit-testing shell scripts and tools with shtk</title><link>https://jmmv.dev/2023/10/unit-testing-with-shtk.html</link><pubDate>Wed, 11 Oct 2023 08:30:00 -0700</pubDate><guid>https://jmmv.dev/2023/10/unit-testing-with-shtk.html</guid><description>&lt;p>While working on this static blog a few days ago, I made a change to its templates that warranted an automated test. I could have written a trivial shell script to do it, but instead I reached out for shtk&amp;rsquo;s unit-testing module. I &lt;a href="https://twitter.com/jmmv/status/1710309896670081083">tweeted about it&lt;/a> right away to just say that you can, in fact, write tests in shell because lots of developers are skeptical about any script longer than 10 lines of code.&lt;/p>
&lt;p>Interestingly, this reply came through: a pointer to a contemporary, under-development library for writing tests in Bash. Which made me think: &amp;ldquo;Hey, I had already done that years ago&amp;hellip; but nobody knows about it. Gotta fix that with a blog post!&amp;rdquo; But first, I had to bring shtk back from its ashes because I had not touched it for more than 6 years and it wasn&amp;rsquo;t read for show and tell. So I did something that I wanted to do back in the day but never did: I put together &lt;a href="https://shtk.jmmv.dev/">a website for shtk&lt;/a> to host its &lt;a href="https://shtk.jmmv.dev/docs.html">reference manual&lt;/a> and I fixed a few obvious rough edges.&lt;/p>
&lt;p>With those tweaks out of the way, we come to this article. In here, I want to show you how writing decent tests in shell is entirely possible and how shtk&amp;rsquo;s testing platform provides unique features to do integration testing of CLI apps written in any language.&lt;/p></description><enclosure url="https://jmmv.dev/images/2023-10-11-shell-hammer-wrench.jpg" length="398237" type="image/jpeg"/></item><item><title>BSDCan 2014 summary</title><link>https://jmmv.dev/2014/05/bsdcan-2014-summary.html</link><pubDate>Wed, 21 May 2014 18:50:00 -0400</pubDate><guid>https://jmmv.dev/2014/05/bsdcan-2014-summary.html</guid><description>BSDCan 2014 and the accompanying FreeBSD devsummit are officially over. Let's recap.
FreeBSD devsummit
The FreeBSD devsumit at BSDCan is, by far, the largest of them all. It is true that I already visited a devsummit once —the one in EuroBSDCon 2013—, but this is the first time I participate in the "real deal" while also being a committer.
The first impressive thing about this devsummit is that there were about 120 attendees.</description></item><item><title>GSoC 2014 idea: Port FreeBSD's old-style tests to ATF</title><link>https://jmmv.dev/2014/03/gsoc-2014-idea-port-freebsds-old-style.html</link><pubDate>Wed, 12 Mar 2014 08:22:00 -0400</pubDate><guid>https://jmmv.dev/2014/03/gsoc-2014-idea-port-freebsds-old-style.html</guid><description>Are you a student interested in contributing to a production-quality operating system by increasing its overall quality? If so, you have come to the right place!
As you may already know, the Google Summer of Code 2014 program is on and FreeBSD has been accepted as a mentoring organization. As it so happens, I have a project idea that may sound interesting to you.
During the last few months, we have been hard at work adding a standardized test suite to the FreeBSD upstream source tree as described in the TestSuite project page.</description></item><item><title>FreeBSD Test Suite tutorial at AsiaBSDCon 2014</title><link>https://jmmv.dev/2014/01/freebsd-test-suite-tutorial-at.html</link><pubDate>Wed, 08 Jan 2014 07:00:00 -0500</pubDate><guid>https://jmmv.dev/2014/01/freebsd-test-suite-tutorial-at.html</guid><description>I am pleased to announce that the tutorial on the FreeBSD Test Suite that I proposed for AsiaBSDCon 2014 has been accepted!
The conference website will soon include more details, but allow me to spoil your wait:
Goals: Learn how to use the test suite, how it is internally organized and how new tests can be written. Stretch goal: Get attendees to contribute one or more tests to the project. Audience: Mostly developers of FreeBSD that want to learn how the new test suite plugs into the system.</description></item><item><title>FreeBSD Test Suite goals and planning</title><link>https://jmmv.dev/2014/01/freebsd-test-suite-goals-and-planning.html</link><pubDate>Sun, 05 Jan 2014 11:30:00 -0500</pubDate><guid>https://jmmv.dev/2014/01/freebsd-test-suite-goals-and-planning.html</guid><description>I was really impressed and delighted to see how popular my previous (and first) post on FreeBSD testing, titled Introducing the FreeBSD Test Suite, was. Looks like this project may be of great interest to developers and users out there (not unsurprisingly) so I'll try to keep you all up-to-date with any key developments.
A first question that arises from the announcement is: where are the test suite and infrastructure headed?</description></item><item><title>Introducing the FreeBSD Test Suite</title><link>https://jmmv.dev/2013/12/introducing-freebsd-test-suite.html</link><pubDate>Tue, 31 Dec 2013 08:00:00 -0500</pubDate><guid>https://jmmv.dev/2013/12/introducing-freebsd-test-suite.html</guid><description>I joined the FreeBSD committer ranks a couple of months ago with the intention to equip FreeBSD with an out-of-the-box test suite and with a testing infrastructure. The time until now has been quite fruitful and I have been rushing to get something ready for you before the year end.
With that, I am very pleased to announce that the first mockup of the FreeBSD testing cluster is up and running!</description></item><item><title>Testing NetBSD's share/mk</title><link>https://jmmv.dev/2012/08/testing-netbsds-sharemk.html</link><pubDate>Sun, 26 Aug 2012 22:18:00 -0400</pubDate><guid>https://jmmv.dev/2012/08/testing-netbsds-sharemk.html</guid><description>For a long time, a pet peeve of mine has been the lack of tests for the build infrastructure files of NetBSD: i.e. those bsd.*.mk files that live under /usr/share/mk/ and on which the whole source tree depends.
One could argue that writing tests for these files is not strictly necessary because the successful build of NetBSD is the real final test of whether the files work or not. That's partly true, but unfortunately is not the whole story:</description></item><item><title>Dependency injection: simple class constructors</title><link>https://jmmv.dev/2010/12/dependency-injection-simple-class.html</link><pubDate>Sun, 26 Dec 2010 05:41:00 -0500</pubDate><guid>https://jmmv.dev/2010/12/dependency-injection-simple-class.html</guid><description>Following my previous post on dependency injection (DI for short), I wanted to show you today another example of code in which DI helps in making the code clearer and easier to validate. In this case, the person to blame for the original piece of code being criticized is me.
The atffile module in ATF provides a class to represent the contents of Atffiles. An Atffile is, basically, a file containing a list of test programs to run and a list of properties associated to these test programs.</description></item><item><title>Dependency injection and testing: an example</title><link>https://jmmv.dev/2010/12/dependency-injection-and-testing.html</link><pubDate>Thu, 23 Dec 2010 11:11:00 -0500</pubDate><guid>https://jmmv.dev/2010/12/dependency-injection-and-testing.html</guid><description>A coworker just sent me some Python code for review and, among such code, there was the addition of a function similar to:
def PathWithCurrentDate(prefix, now=None): &amp;#34;&amp;#34;&amp;#34;Extend a path with a year/month/day subdirectory layout. Args: prefix: string, The path to extend with the date subcomponents. now: datetime.date, The date to use for the path; if None, use the current date. Returns: string, The new computed path with the date appended. &amp;#34;&amp;#34;&amp;#34; path = os.</description></item></channel></rss>