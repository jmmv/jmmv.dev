<!doctype html><html lang=en xmlns=http://www.w3.org/1999/xhtml xmlns:fb=http://ogp.me/ns/fb#><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:site_name" content="Julio Merino (jmmv.dev)"><meta property="twitter:site" content="@jmmv"><title>Synology DS923+ vs. FreeBSD w/ZFS - Julio Merino (jmmv.dev)</title>
<meta property="og:title" content="Synology DS923+ vs. FreeBSD w/ZFS - Julio Merino (jmmv.dev)"><meta property="twitter:title" content="Synology DS923+ vs. FreeBSD w/ZFS - Julio Merino (jmmv.dev)"><meta name=description content="My interest in storage is longstanding&mdash;I loved playing with different file systems in my early Unix days and then I worked on Google&rsquo;s and Microsoft&rsquo;s distributed storage solutions&mdash;and, about four years ago, I started running a home-grown NAS leveraging FreeBSD and its excellent ZFS support. I first hosted the server on a PowerMac G5 and then upgraded it to an overkill 72-core ThinkStation that I snapped second-hand for a great price.
But as stable and low maintenance as FreeBSD is, running day-to-day services myself is not my idea of &ldquo;fun&rdquo;. This drove me to replace this machine&rsquo;s routing functionality with a dedicated pfSense box a year ago and, for similar reasons, I have been curious about dedicated NAS solutions.
I was pretty close to buying a second-hand NAS from the work classifieds channel when a Synology marketing person (hi Kyle!) contacted me to offer a partnership: they&rsquo;d ship me one of their devices for free in exchange for me publishing a few articles about it. Given my interest to drive-test one of these appliances without committing to buying one (they ain&rsquo;t cheap and I wasn&rsquo;t convinced I wanted to get rid of my FreeBSD-based solution), I was game.
And you guessed right: this article is one of those I promised to write but, before you stop reading, the answer is no. This post is not sponsored by Synology and has not been reviewed nor approved by them. The content here, including any opinions, are purely my own. And what I want do do here is compare how the Synology appliance stacks against my home-built FreeBSD server.
"><meta property="og:description" content="My interest in storage is longstanding&mdash;I loved playing with different file systems in my early Unix days and then I worked on Google&rsquo;s and Microsoft&rsquo;s distributed storage solutions&mdash;and, about four years ago, I started running a home-grown NAS leveraging FreeBSD and its excellent ZFS support. I first hosted the server on a PowerMac G5 and then upgraded it to an overkill 72-core ThinkStation that I snapped second-hand for a great price.
But as stable and low maintenance as FreeBSD is, running day-to-day services myself is not my idea of &ldquo;fun&rdquo;. This drove me to replace this machine&rsquo;s routing functionality with a dedicated pfSense box a year ago and, for similar reasons, I have been curious about dedicated NAS solutions.
I was pretty close to buying a second-hand NAS from the work classifieds channel when a Synology marketing person (hi Kyle!) contacted me to offer a partnership: they&rsquo;d ship me one of their devices for free in exchange for me publishing a few articles about it. Given my interest to drive-test one of these appliances without committing to buying one (they ain&rsquo;t cheap and I wasn&rsquo;t convinced I wanted to get rid of my FreeBSD-based solution), I was game.
And you guessed right: this article is one of those I promised to write but, before you stop reading, the answer is no. This post is not sponsored by Synology and has not been reviewed nor approved by them. The content here, including any opinions, are purely my own. And what I want do do here is compare how the Synology appliance stacks against my home-built FreeBSD server.
"><meta property="twitter:description" content="My interest in storage is longstanding&mdash;I loved playing with different file systems in my early Unix days and then I worked on Google&rsquo;s and Microsoft&rsquo;s distributed storage …"><meta name=author content="Julio Merino"><meta property="twitter:creator" content="@jmmv"><meta name=generator content="Hugo 0.145.0"><meta property="og:url" content="https://jmmv.dev/2024/12/synology-ds923-vs-freebsd.html"><meta property="og:type" content="blog"><meta property="twitter:card" content="summary"><link rel=canonical href=https://jmmv.dev/2024/12/synology-ds923-vs-freebsd.html><link rel=alternate type=application/rss+xml title="Julio Merino (jmmv.dev)" href=/feed.xml><link rel=stylesheet href=/sass/main.min.cb91349cd93211a37e7d5dc131c35a170fc795721c03373cd05571327eea206b.css><link rel=stylesheet href=/css/chroma.css><link rel=icon type=image/png href=/images/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/images/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicons/favicon-96x96.png sizes=96x96><meta property="og:image" content="/images/2024-12-13-ds923-and-thinkstation.jpg"><meta property="twitter:image" content="https://jmmv.dev/images/2024-12-13-ds923-and-thinkstation.jpg"><meta property="og:image:alt" content="Synology DS923+ on top of its shipping box right after unboxing it."><meta property="twitter:image:alt" content="Synology DS923+ on top of its shipping box right after unboxing it."><script>const SITE_ID="e8da9f62-b7ac-4fe9-bf20-7c527199a376",BASE_URL="https://jmmv.dev/"</script></head><body><img src="https://hugo-dynamic.jmmv.dev/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/pages/aHR0cHM6Ly9qbW12LmRldi8yMDI0LzEyL3N5bm9sb2d5LWRzOTIzLXZzLWZyZWVic2QuaHRtbA==/stamp.gif" style=display:none>
<script>window.location.replace("https://blogsystem5.substack.com/p/synology-ds923-vs-freebsd")</script><header class=site-header><nav class="navbar navbar-expand-md fixed-top navbar-dark bg-primary"><a class=navbar-brand href=/><img src=/images/favicons/favicon-30x30.png width=30 height=30 class="d-inline-block align-top" alt>
&nbsp;jmmv.dev
</a><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=/about.html>About</a></li><li class=nav-item><a class=nav-link href=/blog.html>Blog</a></li><li class=nav-item><a class=nav-link href=/resume.html>Resume</a></li><li class=nav-item><a class=nav-link href=/software.html>Software</a></li></ul><ul class="navbar-nav mr-4"><li class=nav-item><a class=nav-link href=/archive.html>Archive</a></li><li class=nav-item><a class=nav-link href=/series.html>Series</a></li><li class=nav-item><a class=nav-link href=/tags.html>Tags</a></li></ul><form class=form-inline method=get role=search action=https://www.google.com/search><div class=input-group><input type=search name=query class=form-control placeholder=Search aria-label=Search><div class=input-group-append><button type=submit value=Search class="btn btn-light">
<img src=/octicons/search.svg></button></div></div><input type=hidden name=sitesearch value=https://jmmv.dev/></form></div></nav></header><div class=page-header><div class=container><h1>Synology DS923+ vs. FreeBSD w/ZFS</h1><p>December 13, 2024 &#183;
About 17 minutes
&#183;
Tags:
<a href=/tags/blogsystem5>blogsystem5</a>, <a href=/tags/hardware>hardware</a></p><p class=post-meta-p>This article was
<a href=https://blogsystem5.substack.com/p/synology-ds923-vs-freebsd>originally published
on Substack</a>
in the <a href=https://blogsystem5.substack.com/>Blog System/5 newsletter</a>
and is replicated here for archival purposes.</p><figure class=cover-image><img src=/images/2024-12-13-ds923-and-thinkstation.jpg style=max-width:100%><figcaption>Synology DS923+ on top of its shipping box right after unboxing it.</figcaption></figure></div></div><div class="container post-body"><div class=row><div class=col-md-9><div class=row><div class=col><article><p>My interest in storage is longstanding&mdash;I loved playing with different file systems in my early Unix days and then I worked on Google&rsquo;s and Microsoft&rsquo;s distributed storage solutions&mdash;and, about four years ago, I started running a home-grown NAS leveraging FreeBSD and its excellent ZFS support. I first hosted the server on a PowerMac G5 and then upgraded it to an overkill 72-core ThinkStation that I snapped second-hand for a great price.</p><p>But as stable and low maintenance as FreeBSD is, running day-to-day services myself is not my idea of &ldquo;fun&rdquo;. This drove me to replace this machine&rsquo;s routing functionality with a dedicated pfSense box a year ago and, for similar reasons, I have been curious about dedicated NAS solutions.</p><p>I was pretty close to buying a second-hand NAS from the work classifieds channel when a Synology marketing person (hi Kyle!) contacted me to offer a partnership: they&rsquo;d ship me <a href=https://sy.to/hekgh>one of their devices</a> for free in exchange for me publishing a few articles about it. Given my interest to drive-test one of these appliances without committing to buying one (they ain&rsquo;t cheap and I wasn&rsquo;t convinced I wanted to get rid of my FreeBSD-based solution), I was game.</p><p>And you guessed right: this article is one of those I promised to write but, before you stop reading, the answer is no. This post is <em>not</em> sponsored by Synology and has not been reviewed nor approved by them. The content here, including any opinions, are purely my own. And what I want do do here is compare how the Synology appliance stacks against my home-built FreeBSD server.</p><div class="container action-highlight p-4 my-4 d-md-none"><div class="row text-center"><p>A blog on operating systems, programming languages, testing, build systems, my own software
projects and even personal productivity. Specifics include FreeBSD, Linux, Rust, Bazel and
EndBASIC.</p></div><div class=row><div class=col><div class=form-group><form action=https://endtracker.azurewebsites.net/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/subscribers/add method=post><input type=text name=email placeholder="Enter your email" class="form-control input-sm text-center my-1">
<button type=submit class="btn btn-primary btn-block my-1">Subscribe</button></form></div></div></div><div class="row px-2"><div class="col col-sm-5 text-left"><small><span class=subscriber-count>0</span> subscribers</small></div><div class="col col-sm-7 text-right"><p><a rel=me href=https://mastodon.online/@jmmv><img src=/images/badges/mastodon-logo.svg width=32px height=32px alt="Follow @jmmv on Mastodon">
</a><a href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fjmmv.dev%2F&amp;screen_name=jmmv"><img src=/images/badges/Twitter_logo_blue.svg width=32px height=32px alt="Follow @jmmv on Twitter">
</a><a href=/feed.xml><img src=/images/badges/feed-icon-28x28.png alt="RSS feed"></a></p></div></div></div><h1 id=the-hardware>The hardware</h1><p>Here are the two contenders in my comparison:</p><figure><img src=/images/2024-12-13-ds923-and-thinkstation.jpg><figcaption>Synology D923+ next to my ThinkStation P710 on top of a dusty LackRack in the garage.</figcaption></figure><ul><li><strong>My home-built NAS:</strong><ul><li><strong>Hardware:</strong> <a href=https://amzn.to/3DaBQze>ThinkStation P710</a> equipped with 2x Intel Xeon E5-2697 v4 processors (18c/36t) at 2.30GHz, 64GB of RAM, 2x <a href=https://amzn.to/3ZvimN7>Seagate 4TB Enterprise Capacity 7200 RPM</a> drives and a <a href=https://amzn.to/49zx3DE>Samsung 970 EVO Plus SSD</a> 500GB.</li><li><strong>Operating system:</strong> FreeBSD 14.</li><li><strong>Storage configuration:</strong> ZFS with the two HDD drives in mirror mode and with the SSD set up as the L2ARC plus ZIL log for the drive pool.</li></ul></li><li><strong>The Synology NAS:</strong><ul><li><strong>Hardware:</strong> <a href=https://amzn.to/3ZL7sUI>Synology DS923+</a> equipped with 3x <a href=https://amzn.to/4g73s6S>Synology Plus Series 4TB 5400 RPM</a> drives and the same <a href=https://amzn.to/49zx3DE>Samsung 970 EVO Plus SSD</a> 500GB that I moved from one machine to the other. The box is equipped with a 4-core AMD Ryzen Embedded R1600 and 4GB of RAM.</li><li><strong>Operating system:</strong> Synology&rsquo;s own DiskStation Manager (DSM).</li><li><strong>Storage configuration:</strong> btrfs with the three HDD drives set up in RAID 5 mode and with the SSD set up to act as the cache for the drive pool.</li></ul></li></ul><p>The two configurations are quite different&mdash;after all, I am comparing a workstation machine with lots of spare CPU and RAM to a dedicated machine specifically crafted for file sharing&mdash;so it&rsquo;s going to be difficult to be &ldquo;fair&rdquo; in any comparison. In any case, here are a few things to contrast:</p><ul><li><p><strong>IOPS:</strong> The P710 runs with 2 7200 RPM drives in mirror mode whereas the DS923+ runs with 3 5400 RPM drives in RAID 5 mode. The number of total IOPS from each is going to differ but&mldr; for all purposes, the 1Gbit NIC that each machine has is the limiting factor in performance so I haven&rsquo;t bothered to run any performance tests. Both can saturate the network, so there is that.</p></li><li><p><strong>Quality:</strong> Both the P710 and the DS923+ are impressive machines&mdash;maybe not PowerMac G5 impressive levels, but pretty, pretty close. I love the ThinkStation&rsquo;s outer design and the interior shows great cable management and airflow. As for the NAS, I love the lightweight and small form factor that allows placing it pretty much anywhere. Both are tool-less enclosures.</p></li><li><p><strong>Noise:</strong> When idle, both machines are equally quiet. The ThinkStation gets really, really loud under heavy load though, and it is also uncomfortably loud even at idle when the room temperature is warm (around or over 25C). The DS923+, however, seems quiet throughout. The Synology Plus Series HDDs are also quieter than the ones I had in the ThinkStation, and that&rsquo;s partly because they are slower 5400 RPM drives. In any case, these two machines stay in my garage so I don&rsquo;t care about their noise.</p></li><li><p><strong>Power consumption:</strong> I unfortunately do not own a tool to measure it, but it&rsquo;d be neat to compare how these two stack up. I&rsquo;m sure I&rsquo;ve thrown money away by keeping the ThinkStation online 24x7 and having those drives never rest (ZFS doesn&rsquo;t let them spin down) but it&rsquo;s hard to care about it because my power bill is dominated by heating almost year-round.</p></li></ul><h1 id=freebsd-and-zfs>FreeBSD and ZFS</h1><p>FreeBSD is my current favorite system for servers. FreeBSD remains close to its Unix roots and maintains rational and orthogonal tooling (unlike Linux), is quick and trivial to maintain (I could run through the 13 to 14 upgrade in&mldr; 15 minutes?), and bundles modern technology like ZFS and bhyve (unlike NetBSD, sadly, which used to be my BSD of choice).</p><p>It is true that FreeBSD gave me some headaches when I ran it on the PowerMac G5, but that&rsquo;s expected due to the machine being 20 years old and <a href=https://www.freebsd.org/platforms/ppc/>FreeBSD&rsquo;s PowerPC support</a> being a Tier 2 platform. The thing is that I never intended to run a NAS on the G5; it just so happened to be the only machine I had available for it. In any case, I have had <em>zero</em> problems on the ThinkStation. Mind you: when I bought this machine, both Windows and Fedora experienced occasional freezes with their default installations (before pulling upgrades from the network) and FreeBSD never has shown any signs of instability.</p><p>As for ZFS, it is hard to convey the feeling of &ldquo;power&rdquo; you experience when you type <code>zpool</code> and <code>zfs</code> commands and see the machine coordinate multiple disks to offer you a dependable storage solution. Creating file systems on a pool, creating raw volumes for VMs or iSCSI targets, taking snapshots, replicating snapshots over the network or to backup USB drives, scrubbing the drives to verify data integrity&mldr; all are trivial commands away.</p><p>ZFS feels slow though. I grew up thinking of file systems as contiguous portions of a disk and tinkering with their partitioning scheme to keep groups of data unfragmented for speedy access. Due to the way ZFS operates, however, none of this archaic knowledge applies (and to be honest, I do not know how ZFS works in detail internally). That said, a hard drive&rsquo;s seek time is around 10ms and has been like that for decades, which combined with the fact that we are now spoiled by having SSDs everywhere, exacerbates how slow an HDD-based solution feels no matter the file system.</p><figure><img src=/images/2024-12-13-defrag.png class=with-border><figcaption>Did I just mention disk fragmentation? Yeah I did, and I could not resist including this screenshot of MS-DOS 6.22's <tt>DEFRAG.EXE</tt> here. Just because.</figcaption></figure><p>Regarding network connectivity, FreeBSD offers all sorts of networked file systems and services. The base system provides NFSv3, NFSv4, FTP, and iSCSI targets. The ports (packages) system offers whatever else you may need, including SMB, DLNA, and even ancient protocols like AppleTalk or distributed protocols like Ceph. All configuration is done by hand over SSH in the traditional Unix way of editing configuration files&mdash;aka messing around with different, inconsistent text formats.</p><h1 id=synologys-dsm-and-btrfs>Synology&rsquo;s DSM and btrfs</h1><p>The DS923+ runs Synology&rsquo;s own operating system: the <a href=https://www.synology.com/en-us/dsm>DiskStation Manager (DSM)</a>. The DSM is a headless-first system designed to be accessed over the network, which is no surprise. What <em>is</em> surprising is the choice of the interface: while most networked devices offer some sort of a web-based tabbed UI, the DSM offers a desktop environment&mdash;with overlapping windows no less. This feels like a gimmick to me, and a quite neat one, but overkill nonetheless.</p><figure><img src=/images/2024-12-13-synology-dsm-overview.png><figcaption>The DSM desktop with the <i>Control Panel</i> and the <i>File Station</i> apps open to demonstrate the appearance of the web-based windowing system.</figcaption></figure><p>If we peek under the covers, which we can do by logging into the machine over SSH, we find that the DSM is a Linux system. No surprises here after seeing that its choice of file system is btrfs. But what kind of Linux is it? A weird one, let me tell you. Luckily, you do not have to interact with it at all if you don&rsquo;t want to, but hey, I&rsquo;m curious so I did look.</p><p>The DSM seems to be some sort of Debian derivative based on the fact that <code>dpkg</code> is installed, but otherwise I cannot find any other obvious remains of what might have been a Debian installation; even <code>dpkg -l</code> shows nothing. What I can tell is that the btrfs file systems are mounted under <code>/volume1</code> and, in there, we can find one directory per shared folder that we create in the UI. We can also find various directories prefixed with <code>@</code>, which is a&mldr; weird choice for Unix file names, and I understand are managed by the DSM. These include things like <code>@appdata</code> or <code>@userpreference</code>, which carry strong Windows vibes.</p><p>Considering that the DS923+ is almost a PC and runs Linux, I did look to see if it was possible to run FreeBSD instead. It turns out some people have tried this, and FreeBSD does run, but it lacks drivers to control power to the drives so it cannot actually leverage the storage devices. From what I understood, the DS923+ seems to have dedicated hardware to control power the drive pool, and this hardware logic is controlled via GPIO.</p><p>Which got me even more curious: if the DSM explicitly controls power to the drive pool, how does it boot and how does it remain responsive even after shutting down the drives? I guessed that the device comes with a tiny drive to hold the DSM and boots off of it, and upon inspecting the <code>dmesg</code> and looking for non-obvious stuff, I found this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>sd 7:0:0:0: Attached scsi generic sg3 type 0
</span></span><span class=line><span class=cl>sd 7:0:0:0: [synoboot] 245760 512-byte logical blocks: (126 MB/120 MiB)
</span></span><span class=line><span class=cl>sd 7:0:0:0: [synoboot] Write Protect is off
</span></span><span class=line><span class=cl>sd 7:0:0:0: [synoboot] Mode Sense: 23 00 00 00
</span></span><span class=line><span class=cl>sd 7:0:0:0: [synoboot] No Caching mode page found
</span></span><span class=line><span class=cl>sd 7:0:0:0: [synoboot] Assuming drive cache: write through
</span></span><span class=line><span class=cl>sd 7:0:0:0: [synoboot] Attached SCSI disk
</span></span></code></pre></div><p>Ah-ha. A small 120MB (flash?) drive that acts as the system device. However&mldr; this separation of system vs. drive pool comes with a price: the drive pool often shuts off, and powering it back on is <em>slow</em> (10&ndash;15 seconds are not unusual). When you try to reach the NAS over the network and the pool is off, it can feel as if the NAS is unreachable / down, which has already confused me a few times and caused me to started diagnosing network issues. Quite annoying to be honest, but obviously this can be configured in the <em>Hardware & Power</em> menu:</p><figure><img src=/images/2024-12-13-synology-dsm-hardware-and-power.png><figcaption>The list of available options under the Hardware & Power menu.</figcaption></figure><p>Regarding network connectivity, the DSM offers multiple networked file systems and services out of the box, namely: SMB, NFS v3, NFS v4, AFP, FTP, and rsync. I&rsquo;m actually surprised to see AFP, AppleTalk&rsquo;s &ldquo;replacement&rdquo;, in the default set of supported file systems in this day and age, but there it is. Additionally, the DSM provides its own package management system to install a limited set of additional services and utilities, which I used to add DLNA support.</p><h1 id=seeding-the-nas>Seeding the NAS</h1><p>Anyhow, let&rsquo;s change topics and talk about the DS923+ itself.</p><p>The first thing I had to do after getting the device was to seed it with data. I needed to copy about 1TB of photos and documents from the FreeBSD machine to the DS923+, which is not a lot, but is large enough that different copy mechanisms can make a huge difference in the time the copy takes. In particular, the choice of <em>protocol</em> matters for a quick copy: both SMB and NFS are OK with large files, but transferring many small files with them is painful. Fortunately, the DSM allows rsync over SSH and I used that to do the initial seeding.</p><p>Now, using rsync came with two &ldquo;problems&rdquo;. The first is that I had to know the <em>path</em> to the shared folders in the file system to specify the rsync targets. This is not clearly exposed through the UI, so I had to rely on SSH to log into the machine and figure out that the shared folders are at <code>/volume1/&lt;shared_folder>/</code> as I briefly mentioned in the previous section.</p><p>Which led to the second problem or, rather, surprise: even though I had set up 2FA for the user accounts I created in the DSM UI, 2FA was meaningless when accessing the machine over SSH. I understand why that may be, but then I question what the point of enabling 2FA really is if one can gain access to the machine without it. The same is true of SMB by the way: you just need an account&rsquo;s password, not the 2FA. So, unless you disable all networked file systems and only allow web access to the NAS, all the 2FA does is give you a false sense of security.</p><h1 id=peace-of-mind>Peace of mind</h1><p>When comparing my custom FreeBSD server to the newer DS923+, the main difference I can notice is an increase in &ldquo;peace of mind&rdquo;. Yes, FreeBSD is very stable and ZFS is great&mldr; but I wasn&rsquo;t running the ThinkStation as a dedicated NAS: I was mixing the machine&rsquo;s NAS responsibilities with those of a host for development tasks. I always felt uncomfortable about the health of the system and I wasn&rsquo;t convinced that my maintenance was &ldquo;good enough&rdquo; to safeguard my data.</p><p>As you can imagine, being uncomfortable about your data is not something you want to feel: trust is <em>The Thing</em> you most want in a storage solution, and there are a few things that stand out during the setup of the system that gave me warm feelings on this topic.</p><p>The first and obvious one is that the DSM offers to encrypt the pool right from the beginning, which is something you should always do in this day and age: encryption is cheap in CPU terms, the data you own is precious, and the devices that store it tend to be small and light so they are at risk of theft. But beware: the key is stored on the device to allow auto-mounting by default, which means a knowledgeable thief could still gain access. Thus, this level of encryption is only useful to facilitate the disposal of drives. That said, you can configure additional encryption on each shared folder if you want per-user password-protected encryption.</p><p>The second thing is that, nowhere in the setup process I was asked to create a Synology account for the NAS to be fully functional. You might think that this is a given, but seeing the state of other hardware or software products these days&mldr; it&rsquo;s not. So this sent a very welcome message. I ended up needing to create an account for certain features that required it, but these were completely optional.</p><p>The third thing, which is actually one of those features that required creating a Synology account, is the ability to send email notifications for system alerts. Email-based alerts are terrible in large organizations (and of course the DSM offers better alternatives, like ActiveInsight), but for my personal use case, emails are perfect and make a huge difference with my previous FreeBSD setup. I can rest assured that I&rsquo;ll be told about anything unusual with the DS932+ in a way that I will notice. With my custom build, I had certain monitoring features in place like weekly disk scrubs and periodic online backups&mldr; but no way to properly notify me of problems with either: if anything went wrong, I would not have known on time, and that was very unsettling.</p><p>The fourth and final thing is that the DSM has been built throughout the years by people that deal with storage all the time, and it&rsquo;s fair to assume that they know a thing or two about running a NAS. I have reasonable confidence that the configuration of the system and the storage pool is going to be &ldquo;correct&rdquo; over time, particularly across upgrades, whereas I was never quite sure of it with my manual FreeBSD setup. One such example is with the NFS configuration: setting up the NFSv4 server in the DSM was pretty much knob-free&mdash;so <a href=/2024/11/demystifying-secure-nfs.html>when things didn&rsquo;t work with the clients</a>, I could assume that the issue was almost certainly with the clients themselves.</p><h1 id=additional-apps>Additional apps</h1><p>As I mentioned earlier, the DS923+ is pretty much a PC with Linux in a tiny box, so in principle it can host any kind of software you like. The way this works is via DSM&rsquo;s own &ldquo;marketplace&rdquo; where you can find new services to add to the machine.</p><figure><img src=/images/2024-12-13-synology-dsm-package-center.png><figcaption>The DSM desktop showing the <i>Package Center</i> application.</figcaption></figure><p>I did add the optional DLNA service so that I could play videos from my Xbox, and also toyed with with the Domain Server (and later gave up due to the sheer complexity of setting up a domain just for home use). But there are other interesting optional features. For example, you can create virtual machines on the DS923+ which, despite the limited CPU and RAM of the machine, can come in handy from time to time. I suppose with a more powerful box from Synology, the story here would be quite different.</p><p>One thing to highlight is that these extra pieces of software are <em>curated</em>: you aren&rsquo;t just installing an extra service to the underlying Linux machine. You are installing an extension to the DSM, which comes with new configuration panels in the UI and full integration with the system. You never have to know that Linux is there if you don&rsquo;t want to.</p><h1 id=backup-solutions>Backup solutions</h1><p>Having a dedicated NAS with a storage pool that protects against corruption is great, but a singly-homed box like this is still subject to massive data loss due to ransomware, physical damage caused by fire or flooding, and correlated disk failures. Backups are critically important.</p><p>With the FreeBSD setup, my backup strategy involved using <code>zfs send</code> and <code>zfs receive</code> to back up snapshots into two USB drives: one kept in a fire safe and one kept offsite. This worked but I had to figure out the syntax of these commands over and over again, which didn&rsquo;t make me feel confident about these actions. I did also back up irreplaceable data to a OneDrive account using <code>rclone</code>, which was good but&mldr; manual and ad-hoc as well. Needless to say, while the backups existed, they were often stale and they were a pain to manage.</p><p>Backing up a NAS is difficult though. For one, a NAS is designed to store <em>lots</em> of data, which means the backup targets have to be large capacity-wise too. And for another, given the DS923+ reduced physical size, it is likely to end up placed in a location that isn&rsquo;t super convenient to access, which will make attaching temporary USB drives and the like an annoying experience.</p><p>For now, what I have tried is the optional <em>Cloud Sync</em> package that allows replicating to many cloud services, including OneDrive. And it&rsquo;s a joy to use. I could trivially install the package, log into my Microsoft account, and configure the two specific folders I care about backing up. I could even respect the previous file layout of my OneDrive account so I did not have to re-upload anything. And the tool supports encryption too, which you may want if you really don&rsquo;t like those cloud providers from training their AI systems with your data.</p><figure><img src=/images/2024-12-13-synology-dsm-cloud-sync.png><figcaption>Sample configuration of cloud syncing to OneDrive.</figcaption></figure><p>There is more though. Synology offers a variety of products for remote and physical backup. The one that does interest me the most is <a href=https://www.synology.com/en-global/dsm/feature/snapshot_replication>Snapshot Replication</a>, which provides something similar to what I was doing with <code>zfs send</code> and <code>zfs receive</code>, but unfortunately requires a second Synology system offsite that I don&rsquo;t have. The other solutions are <a href=https://sy.to/hf5yf>Active Backup for Business</a> and <a href=https://sy.to/tntsi>Hyper Backup</a>, which I still would like to evaluate but haven&rsquo;t had a chance to look into.</p><h1 id=future>Future</h1><p>To conclude this brief review and comparison, let me say that I&rsquo;m happy with the DS923+ experience so far. I don&rsquo;t think I <em>need</em> it because my FreeBSD solution worked well enough, but considering that I like to use the ThinkStation as the host for my VMs and as my primary development machine&mdash;aka, a fun toy&mdash;I feel more at peace with a dedicated appliance that stores my precious data.</p><p>For more details, you can visit Synology&rsquo;s product pages for the <a href=https://sy.to/hekgh>DS923+</a> and the <a href=https://sy.to/drkom>Plus Series HDDs</a>. And if you want to roll your own FreeBSD-based solution, <a href=https://docs.freebsd.org/en/books/handbook/zfs/>Chapter 22 of the FreeBSD handbook on ZFS</a> is a good place to start.</p></article></div></div><div class="container post-links"><div class=row><div class="col mr-auto text-left"><span><a href=https://jmmv.dev/2024/11/demystifying-secure-nfs.html>&#171; Previous</a></span></div><div class="col text-center"><span><a href=/archive.html>All posts</a></span></div><div class="col ml-auto text-right"><span><a href=https://jmmv.dev/2024/12/netbsd-build-system.html>Next &#187;</a></span></div></div></div><div class="container post-votes"><div class=row><div class="col-lg-4 my-2"><div class=row><div class=col><a onclick=voteThumbsUp() class="btn btn-block btn-outline-success" id=thumbs-up-btn>👍
(<span id=thumbs-up-count>0</span>)</a></div><div class=col><a onclick=voteThumbsDown() class="btn btn-block btn-outline-danger" id=thumbs-down-btn>👎
(<span id=thumbs-down-count>0</span>)</a></div></div></div><div class="col-lg-8 my-2 d-none d-sm-block"><div class=row><div class="col-md-4 text-center"><a href="https://www.reddit.com/submit?title=Synology+DS923%2B+vs.+FreeBSD+w%2FZFS&amp;url=https%3A%2F%2Fjmmv.dev%2F2024%2F12%2Fsynology-ds923-vs-freebsd.html" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/reddit.png alt=Reddit width=24 height=24></a></div><div class="col-md-4 text-center"><a href="https://news.ycombinator.com/submitlink?t=Synology+DS923%2B+vs.+FreeBSD+w%2FZFS&amp;u=https%3A%2F%2Fjmmv.dev%2F2024%2F12%2Fsynology-ds923-vs-freebsd.html" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/ycombinator.png alt="Hacker News" width=24 height=24></a></div><div class="col-md-4 text-center"><a href="https://twitter.com/intent/tweet?status=Synology+DS923%2B+vs.+FreeBSD+w%2FZFS+%E2%80%94+https%3A%2F%2Fjmmv.dev%2F2024%2F12%2Fsynology-ds923-vs-freebsd.html+%E2%80%94+cc+%40jmmv" class="btn btn-block btn-outline-primary">Share on
<img src=/images/badges/Twitter_Social_Icon_Circle_Color.png alt=Twitter width=24 height=24></a></div></div></div></div><div class="row my-4" id=postCommentRow><div class=col><div class=media><img class=mr-3 src=/octicons/pencil.svg width=32px height=32px><div class="media-body container"><form method=post id=newPost><div class=row><div class="col my-1"><textarea class=form-control rows=1 id=postCommentContent onclick=showPostComment() placeholder="Leave a comment"></textarea></div></div><div class="row newPostControls" style=display:none><div class="col my-1 form-group"><label for=postCommentAuthor>Your name (optional):</label>
<input type=text class=form-control id=postCommentAuthor></div></div><div class="row newPostControls" style=display:none><div class="col my-1 form-group"><label for=postCommentEmail>Your email (optional):</label>
<input type=text class=form-control type=email id=postCommentEmail>
<small class="form-text text-muted">Invisible to all readers; if provided, you will receive notifications when replied to (not implemented yet)</small></div></div><div class=row id=postCommentError style=display:none><div class="col mt-1 alert-danger"><p></p></div></div><div class="row newPostControls" style=display:none><button class="col-md-3 my-1 btn btn-primary" type=submit id=submitCommentButton>Post</button>
<small class="col-md-9 my-1 text-muted">Comments are subject to moderation. This feature is experimental and is powered by <a href=/software/endtracker.html>EndTRACKER</a>. If you experience any issues, please <a href=/about.html#contact>contact me off-band</a>.</small></div></form></div></div></div></div><script>function hidePostComment(){var t,e=document.getElementById("postCommentContent");e.rows=1,e.value="",t=document.getElementsByClassName("newPostControls"),Array.prototype.forEach.call(t,function(e){e.style.display="none"})}function showPostComment(){var e,t=document.getElementById("postCommentContent");t.rows=5,e=document.getElementsByClassName("newPostControls"),Array.prototype.forEach.call(e,function(e){e.style.display=""})}const form=document.querySelector("#newPost");form.onsubmit=function(e){e.preventDefault();let t=document.getElementById("postCommentAuthor").value,n=document.getElementById("postCommentEmail").value,s=document.getElementById("postCommentContent").value;postComment(t,n,s,hidePostComment)}</script></div></div><div class="col-md-3 sidebar d-none d-md-block"><div class=row><div class="col text-center p-2"><p><a href=/about.html class=clear-link><img src=/images/avatars/20181124-snow.jpg class="rounded-circle shadow my-2" style=width:100px><br><b>Julio Merino</b><br>A blog on operating systems, programming languages, testing, build systems, my own software
projects and even personal productivity. Specifics include FreeBSD, Linux, Rust, Bazel and
EndBASIC.</a></p><div class=row><div class=col><div class=form-group><form action=https://endtracker.azurewebsites.net/api/sites/e8da9f62-b7ac-4fe9-bf20-7c527199a376/subscribers/add method=post><input type=text name=email placeholder="Enter your email" class="form-control input-sm text-center my-1">
<button type=submit class="btn btn-primary btn-block my-1">Subscribe</button></form></div></div></div><div class="row px-2"><div class="col-sm-5 text-left"><small><span class=subscriber-count>0</span> subscribers</small></div><div class="col-sm-7 text-right"><p><a rel=me href=https://mastodon.online/@jmmv><img src=/images/badges/mastodon-logo.svg width=32px height=32px alt="Follow @jmmv on Mastodon">
</a><a href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fjmmv.dev%2F&amp;screen_name=jmmv"><img src=/images/badges/Twitter_logo_blue.svg width=32px height=32px alt="Follow @jmmv on Twitter">
</a><a href=/feed.xml><img src=/images/badges/feed-icon-28x28.png alt="RSS feed"></a></p></div></div></div></div><div class=row><div class=col><h2>Featured software</h2><ul><li class=overflow-ellipsis><a href=https://www.endbasic.dev/ target=_blank>EndBASIC: Online BASIC+DOS env</a></li><li class=overflow-ellipsis><a href=https://endtracker.azurewebsites.net/ target=_blank>EndTRACKER: Services for static sites</a></li></ul></div></div><div class=row><div class=col><h2>Featured posts</h2><ul><li class=overflow-ellipsis><a href=/2023/06/fast-machines-slow-machines.html>Fast machines, slow machines</a></li><li class=overflow-ellipsis><a href=/2022/12/endbasic-0.10.html>EndBASIC 0.10: Core language, evolved</a></li><li class=overflow-ellipsis><a href=/2022/10/bye-microsoft-hi-snowflake.html>Farewell, Microsoft; hello, Snowflake!</a></li><li class=overflow-ellipsis><a href=/2022/05/rust-is-hard-but-does-it-matter.html>Rust is hard, yes, but does it matter?</a></li><li class=overflow-ellipsis><a href=/2022/04/rust-traits-and-dependency-injection.html>Rust traits and dependency injection</a></li><li class=overflow-ellipsis><a href=/2022/03/a-year-on-windows-intro.html>A year on Windows: Introduction</a></li><li class=overflow-ellipsis><a href=/2021/04/always-be-quitting.html>Always be quitting</a></li><li class=overflow-ellipsis><a href=/2021/02/google-monorepos-and-caching.html>How does Google keep build times low?</a></li><li class=overflow-ellipsis><a href=/2020/12/google-no-clean-builds.html>How does Google avoid clean builds?</a></li><li class=overflow-ellipsis><a href=/2020/12/unit-testing-a-console-app.html>Unit-testing a console app (a text editor)</a></li><li class=overflow-ellipsis><a href=/essays.html#featured>More...</a></li></ul></div></div></div></div></div><footer class=container-fluid><div class=row><div class="col-4 order-2 text-right"><p class=float-right><a href=#>Back to top</a></p></div><div class="col-8 order-1 mr-auto"><p>Copyright 2004&ndash;2025
Julio Merino</p></div></div></footer><script type=module>
  import { addAnchorsToHeaders, addElementClasses, BatchClient } from "\/js\/main.0de73782e9e0fbcb4184fb5793949b3b0d0ada16455df89320415b4dcc052f88.js";

  var batchClient = new BatchClient(SITE_ID);
  batchClient.doAll({
    put_request: true, get_comments: true, get_subscriber_count: true, get_votes: true });

  window.voteThumbsUp = function() { batchClient.voteThumbsUp(); }
  window.voteThumbsDown = function() { batchClient.voteThumbsDown(); }

  window.postComment = function(...args) {
    batchClient.postComment(...args);
  };

  addAnchorsToHeaders();
  addElementClasses();
</script></body></html>